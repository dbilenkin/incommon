/*! For license information please see main.adccc87e.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+N(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),I(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var u=0;u<e.length;u++){var c=s+N(a=e[u],u);l+=I(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=I(a=a.value,t,i,c=s+N(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:S};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return j(e,(function(){t++})),t},toArray:function(e){return j(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)x.call(t,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,P(x);else{var t=r(c);null!==t&&D(_,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,v(E),E=-1),p=!0;var s=f;try{for(w(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!I());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),w(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&D(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,C=null,E=-1,T=5,N=-1;function I(){return!(t.unstable_now()-N<T)}function j(){if(null!==C){var e=t.unstable_now();N=e;var n=!0;try{n=C(!0,e)}finally{n?S():(k=!1,C=null)}}else k=!1}if("function"===typeof b)S=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=j,S=function(){R.postMessage(null)}}else S=function(){y(j,0)};function P(e){C=e,k||(k=!0,S())}function D(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(E),E=-1):g=!0,D(_,s-o))):(e.sortIndex=a,n(u,e),m||p||(m=!0,P(x))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var O,L=Object.assign;function U(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Gn){var r=Gn}Reflect.construct(e,[],t)}else{try{t.call()}catch(Gn){r=Gn}e.call(t.prototype)}else{try{throw Error()}catch(Gn){r=Gn}e()}}catch(Gn){if(Gn&&r&&"string"===typeof Gn.stack){for(var i=Gn.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case x:return"Portal";case C:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(ca){return e.body}}function Q(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function se(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Se=null;function ke(e){if(e=xi(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=ki(t),_e(e.stateNode,e.type,t))}}function Ce(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Se;if(Se=xe=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Te(e,t){return e(t)}function Ne(){}var Ie=!1;function je(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return Te(e,t,n)}finally{Ie=!1,(null!==xe||null!==Se)&&(Ne(),Ee())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=ki(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(c)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(uc){Re=!1}function De(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(ZC){this.onError(ZC)}}var Me=!1,Oe=null,Le=!1,Ue=null,Fe={onError:function(e){Me=!0,Oe=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Oe=null,De.apply(Fe,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(s(188))}function $e(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ge=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Je=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,Ze=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/at|0)|0},ot=Math.log,at=Math.LN2;var lt=64,ut=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ct(a):0!==(s&=o)&&(r=ct(s))}else 0!==(o=n&~i)?r=ct(o):0!==s&&(r=ct(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,St,kt,Ct=!1,Et=[],Tt=null,Nt=null,It=null,jt=new Map,At=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=_i(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void kt(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Lt(e)&&n.delete(t)}function Ft(){Ct=!1,null!==Tt&&Lt(Tt)&&(Tt=null),null!==Nt&&Lt(Nt)&&(Nt=null),null!==It&&Lt(It)&&(It=null),jt.forEach(Ut),At.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function Bt(e){function t(t){return zt(t,e)}if(0<Et.length){zt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Nt&&zt(Nt,e),null!==It&&zt(It,e),jt.forEach(t),At.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Rt.shift()}var Vt=w.ReactCurrentBatchConfig,qt=!0;function $t(e,t,n,r){var i=vt,s=Vt.transition;Vt.transition=null;try{vt=1,Ht(e,t,n,r)}finally{vt=i,Vt.transition=s}}function Wt(e,t,n,r){var i=vt,s=Vt.transition;Vt.transition=null;try{vt=4,Ht(e,t,n,r)}finally{vt=i,Vt.transition=s}}function Ht(e,t,n,r){if(qt){var i=Gt(e,t,n,r);if(null===i)Kr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Mt(Tt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return It=Mt(It,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return jt.set(s,Mt(jt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,At.set(s,Mt(At.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var s=xi(i);if(null!==s&&wt(s),null===(s=Gt(e,t,n,r))&&Kr(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Kt=null;function Gt(e,t,n,r){if(Kt=null,null!==(e=_i(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Xe:return 1;case Ze:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Yt=null,Xt=null;function Zt(){if(Xt)return Xt;var e,t,n=Yt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var sn,on,an,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(ln),cn=L({},ln,{view:0,detail:0}),hn=rn(cn),dn=L({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==an&&(an&&"mousemove"===e.type?(sn=e.screenX-an.screenX,on=e.screenY-an.screenY):on=sn=0,an=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=rn(dn),pn=rn(L({},dn,{dataTransfer:0})),mn=rn(L({},cn,{relatedTarget:0})),gn=rn(L({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(yn),bn=rn(L({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function kn(){return Sn}var Cn=L({},cn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=rn(Cn),Tn=rn(L({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=rn(L({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),In=rn(L({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=L({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=rn(jn),Rn=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var Mn=c&&"TextEvent"in window&&!Dn,On=c&&(!Pn||Dn&&8<Dn&&11>=Dn),Ln=String.fromCharCode(32),Un=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Qn(e){Br(e,0)}function Jn(e){if(K(Si(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(c){var Zn;if(c){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}Zn=er}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function nr(){Hn&&(Hn.detachEvent("onpropertychange",ir),Kn=Hn=null)}function ir(e){if("value"===e.propertyName&&Jn(Kn)){var t=[];Wn(t,Kn,e,we(e)),je(Qn,t)}}function sr(e,t,n){"focusin"===e?(nr(),Kn=n,(Hn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&nr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Kn)}function lr(e,t){if("click"===e)return Jn(t)}function ur(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function hr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!cr(e[i],t[i]))return!1}return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function gr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function yr(e){var t=mr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&pr(n.ownerDocument.documentElement,n)){if(null!==r&&gr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=fr(n,s);var o=fr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,br=null,wr=null,_r=null,xr=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==br||br!==G(r)||("selectionStart"in(r=br)&&gr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},_r&&hr(_r,r)||(_r=r,0<(r=Qr(wr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Er={},Tr={};function Nr(e){if(Er[e])return Er[e];if(!Cr[e])return e;var t,n=Cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Er[e]=n[t];return e}c&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var Ir=Nr("animationend"),jr=Nr("animationiteration"),Ar=Nr("animationstart"),Rr=Nr("transitionend"),Pr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Pr.set(e,t),l(t,[e])}for(var Or=0;Or<Dr.length;Or++){var Lr=Dr[Or];Mr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Mr(Ir,"onAnimationEnd"),Mr(jr,"onAnimationIteration"),Mr(Ar,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Rr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ur));function zr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var c=Oe;Me=!1,Oe=null,Le||(Le=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;zr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;zr(i,a,u),s=l}}}if(Le)throw e=Ue,Le=!1,Ue=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[$r]){e[$r]=!0,o.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||qr(t,!1,e),qr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,qr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Qt(t)){case 1:var i=$t;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=_i(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}je((function(){var r=s,i=we(n),o=[];e:{var a=Pr.get(e);if(void 0!==a){var l=un,u=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Ir:case jr:case Ar:l=gn;break;case Rr:l=In;break;case"scroll":l=hn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Ae(p,d))&&c.push(Gr(p,m,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!_i(u)&&!u[yi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?_i(u):null)&&(u!==(h=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:Si(l),f=null==u?a:Si(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,_i(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Jr(f))p++;for(f=0,m=d;m;m=Jr(m))f++;for(;0<p-f;)c=Jr(c),p--;for(;0<f-p;)d=Jr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Jr(c),d=Jr(d)}c=null}else c=null;null!==l&&Yr(o,a,l,c,!1),null!==u&&null!==h&&Yr(o,h,u,c,!0)}if("select"===(l=(a=r?Si(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(qn(a))if(Xn)g=ur;else{g=or;var y=sr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=lr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?Si(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(br=y,wr=r,_r=null);break;case"focusout":_r=wr=br=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,Sr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":Sr(o,n,i)}var v;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(On&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=Zt()):(Yt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Qr(r,b)).length&&(b=new bn(b,e,null,n,i),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Ln);case"textInput":return(e=t.data)===Ln&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Pn&&Fn(e,t)?(e=Zt(),Xt=Yt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Br(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ae(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Ae(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Ae(n,s))&&o.unshift(Gr(n,l,a)):i||null!=(l=Ae(n,s))&&o.push(Gr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function ei(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Zr,"")}function ti(e,t,n){if(t=ei(t),ei(e)!==t&&n)throw Error(s(425))}function ni(){}var ri=null,ii=null;function si(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var oi="function"===typeof setTimeout?setTimeout:void 0,ai="function"===typeof clearTimeout?clearTimeout:void 0,li="function"===typeof Promise?Promise:void 0,ui="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof li?function(e){return li.resolve(null).then(e).catch(ci)}:oi;function ci(e){setTimeout((function(){throw e}))}function hi(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function di(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function fi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var pi=Math.random().toString(36).slice(2),mi="__reactFiber$"+pi,gi="__reactProps$"+pi,yi="__reactContainer$"+pi,vi="__reactEvents$"+pi,bi="__reactListeners$"+pi,wi="__reactHandles$"+pi;function _i(e){var t=e[mi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yi]||n[mi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=fi(e);null!==e;){if(n=e[mi])return n;e=fi(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[mi]||e[yi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Si(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ki(e){return e[gi]||null}var Ci=[],Ei=-1;function Ti(e){return{current:e}}function Ni(e){0>Ei||(e.current=Ci[Ei],Ci[Ei]=null,Ei--)}function Ii(e,t){Ei++,Ci[Ei]=e.current,e.current=t}var Ai={},Ri=Ti(Ai),Pi=Ti(!1),Di=Ai;function Mi(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Li(){Ni(Pi),Ni(Ri)}function Ui(e,t,n){if(Ri.current!==Ai)throw Error(s(168));Ii(Ri,t),Ii(Pi,n)}function Fi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return L({},n,r)}function zi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Di=Ri.current,Ii(Ri,e),Ii(Pi,Pi.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Fi(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ni(Pi),Ni(Ri),Ii(Ri,e)):Ni(Pi),Ii(Pi,n)}var Vi=null,qi=!1,$i=!1;function Wi(e){null===Vi?Vi=[e]:Vi.push(e)}function Hi(){if(!$i&&null!==Vi){$i=!0;var e=0,t=vt;try{var n=Vi;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,qi=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),He(Xe,Hi),i}finally{vt=t,$i=!1}}return null}var Ki=[],Gi=0,Qi=null,Ji=0,Yi=[],Xi=0,Zi=null,es=1,ts="";function ns(e,t){Ki[Gi++]=Ji,Ki[Gi++]=Qi,Qi=e,Ji=t}function rs(e,t,n){Yi[Xi++]=es,Yi[Xi++]=ts,Yi[Xi++]=Zi,Zi=e;var r=es;e=ts;var i=32-st(r)-1;r&=~(1<<i),n+=1;var s=32-st(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,es=1<<32-st(t)+i|n<<i|r,ts=s+e}else es=1<<s|n<<i|r,ts=e}function is(e){null!==e.return&&(ns(e,1),rs(e,1,0))}function ss(e){for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,Ji=Ki[--Gi],Ki[Gi]=null;for(;e===Zi;)Zi=Yi[--Xi],Yi[Xi]=null,ts=Yi[--Xi],Yi[Xi]=null,es=Yi[--Xi],Yi[Xi]=null}var os=null,as=null,ls=!1,us=null;function cs(e,t){var n=Ou(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function hs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,os=e,as=di(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,os=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:es,overflow:ts}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ou(18,null,null,0)).stateNode=t,n.return=e,e.child=n,os=e,as=null,!0);default:return!1}}function ds(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function fs(e){if(ls){var t=as;if(t){var n=t;if(!hs(e,t)){if(ds(e))throw Error(s(418));t=di(n.nextSibling);var r=os;t&&hs(e,t)?cs(r,n):(e.flags=-4097&e.flags|2,ls=!1,os=e)}}else{if(ds(e))throw Error(s(418));e.flags=-4097&e.flags|2,ls=!1,os=e}}}function ps(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;os=e}function ms(e){if(e!==os)return!1;if(!ls)return ps(e),ls=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!si(e.type,e.memoizedProps)),t&&(t=as)){if(ds(e))throw gs(),Error(s(418));for(;t;)cs(e,t),t=di(t.nextSibling)}if(ps(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){as=di(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}as=null}}else as=os?di(e.stateNode.nextSibling):null;return!0}function gs(){for(var e=as;e;)e=di(e.nextSibling)}function ys(){as=os=null,ls=!1}function vs(e){null===us?us=[e]:us.push(e)}var bs=w.ReactCurrentBatchConfig;function ws(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function _s(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xs(e){return(0,e._init)(e._payload)}function Ss(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Uu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&xs(s)===t.type)?((r=i(t,n.props)).ref=ws(e,t,n),r.return=e,r):((r=Fu(n.type,n.key,n.props,null,e.mode,r)).ref=ws(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=zu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Fu(t.type,t.key,t.props,null,e.mode,n)).ref=ws(e,null,t),n.return=e,n;case x:return(t=qu(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=zu(t,e.mode,n,null)).return=e,t;_s(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case x:return n.key===i?c(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);_s(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);_s(t,r)}return null}function m(i,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),ls&&ns(i,m),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return ls&&ns(i,m),u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),ls&&ns(i,m),u}function g(i,a,l,u){var c=M(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===h?c=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),ls&&ns(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return ls&&ns(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),ls&&ns(i,g),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===S){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&xs(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=ws(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((s=zu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Fu(o.type,o.key,o.props,null,r.mode,l)).ref=ws(r,s,o),l.return=r,r=l)}return a(r);case x:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=qu(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(M(o))return g(r,s,o,l);_s(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Vu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ks=Ss(!0),Cs=Ss(!1),Es=Ti(null),Ts=null,Ns=null,Is=null;function js(){Is=Ns=Ts=null}function As(e){var t=Es.current;Ni(Es),e._currentValue=t}function Rs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){Ts=e,Is=Ns=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ka=!0),e.firstContext=null)}function Ds(e){var t=e._currentValue;if(Is!==e)if(e={context:e,memoizedValue:t,next:null},null===Ns){if(null===Ts)throw Error(s(308));Ns=e,Ts.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Ms=null;function Os(e){null===Ms?Ms=[e]:Ms.push(e)}function Ls(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Us(e,r)}function Us(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Fs=!1;function zs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Pl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Us(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Us(e,n)}function $s(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ws(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hs(e,t,n,r){var i=e.updateQueue;Fs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=L({},h,d);break e;case 2:Fs=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Bl|=o,e.lanes=o,e.memoizedState=h}}function Ks(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Gs={},Qs=Ti(Gs),Js=Ti(Gs),Ys=Ti(Gs);function Xs(e){if(e===Gs)throw Error(s(174));return e}function Zs(e,t){switch(Ii(Ys,t),Ii(Js,e),Ii(Qs,Gs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ni(Qs),Ii(Qs,t)}function eo(){Ni(Qs),Ni(Js),Ni(Ys)}function to(e){Xs(Ys.current);var t=Xs(Qs.current),n=le(t,e.type);t!==n&&(Ii(Js,e),Ii(Qs,n))}function no(e){Js.current===e&&(Ni(Qs),Ni(Js))}var ro=Ti(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var so=[];function oo(){for(var e=0;e<so.length;e++)so[e]._workInProgressVersionPrimary=null;so.length=0}var ao=w.ReactCurrentDispatcher,lo=w.ReactCurrentBatchConfig,uo=0,co=null,ho=null,fo=null,po=!1,mo=!1,go=0,yo=0;function vo(){throw Error(s(321))}function bo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function wo(e,t,n,r,i,o){if(uo=o,co=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=null===e||null===e.memoizedState?ra:ia,e=n(r,i),mo){o=0;do{if(mo=!1,go=0,25<=o)throw Error(s(301));o+=1,fo=ho=null,t.updateQueue=null,ao.current=sa,e=n(r,i)}while(mo)}if(ao.current=na,t=null!==ho&&null!==ho.next,uo=0,fo=ho=co=null,po=!1,t)throw Error(s(300));return e}function _o(){var e=0!==go;return go=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fo?co.memoizedState=fo=e:fo=fo.next=e,fo}function So(){if(null===ho){var e=co.alternate;e=null!==e?e.memoizedState:null}else e=ho.next;var t=null===fo?co.memoizedState:fo.next;if(null!==t)fo=t,ho=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ho=e).memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},null===fo?co.memoizedState=fo=e:fo=fo.next=e}return fo}function ko(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=So(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ho,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((uo&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,co.lanes|=h,Bl|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,cr(r,t.memoizedState)||(ka=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,co.lanes|=o,Bl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=So(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);cr(o,t.memoizedState)||(ka=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function No(e,t){var n=co,r=So(),i=t(),o=!cr(r.memoizedState,i);if(o&&(r.memoizedState=i,ka=!0),r=r.queue,zo(Ao.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==fo&&1&fo.memoizedState.tag){if(n.flags|=2048,Mo(9,jo.bind(null,n,r,i,t),void 0,null),null===Dl)throw Error(s(349));0!==(30&uo)||Io(n,t,i)}return i}function Io(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function jo(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&Po(e)}function Ao(e,t,n){return n((function(){Ro(t)&&Po(e)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cr(e,n)}catch(r){return!0}}function Po(e){var t=Us(e,1);null!==t&&au(t,e,1,-1)}function Do(e){var t=xo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:e},t.queue=e,e=e.dispatch=Xo.bind(null,co,e),[t.memoizedState,e]}function Mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return So().memoizedState}function Lo(e,t,n,r){var i=xo();co.flags|=e,i.memoizedState=Mo(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var i=So();r=void 0===r?null:r;var s=void 0;if(null!==ho){var o=ho.memoizedState;if(s=o.destroy,null!==r&&bo(r,o.deps))return void(i.memoizedState=Mo(t,n,s,r))}co.flags|=e,i.memoizedState=Mo(1|t,n,s,r)}function Fo(e,t){return Lo(8390656,8,e,t)}function zo(e,t){return Uo(2048,8,e,t)}function Bo(e,t){return Uo(4,2,e,t)}function Vo(e,t){return Uo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $o(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,qo.bind(null,t,e),n)}function Wo(){}function Ho(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ko(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t,n){return 0===(21&uo)?(e.baseState&&(e.baseState=!1,ka=!0),e.memoizedState=n):(cr(n,t)||(n=pt(),co.lanes|=n,Bl|=n,e.baseState=!0),t)}function Qo(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=lo.transition;lo.transition={};try{e(!1),t()}finally{vt=n,lo.transition=r}}function Jo(){return So().memoizedState}function Yo(e,t,n){var r=ou(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zo(e))ea(t,n);else if(null!==(n=Ls(e,t,n,r))){au(n,e,r,su()),ta(n,t,r)}}function Xo(e,t,n){var r=ou(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zo(e))ea(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,cr(a,o)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(Gn){}null!==(n=Ls(e,t,i,r))&&(au(n,e,r,i=su()),ta(n,t,r))}}function Zo(e){var t=e.alternate;return e===co||null!==t&&t===co}function ea(e,t){mo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ta(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var na={readContext:Ds,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},ra={readContext:Ds,useCallback:function(e,t){return xo().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:Fo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lo(4,2,e,t)},useMemo:function(e,t){var n=xo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yo.bind(null,co,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:Do,useDebugValue:Wo,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Qo.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=co,i=xo();if(ls){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Dl)throw Error(s(349));0!==(30&uo)||Io(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Fo(Ao.bind(null,r,o,e),[e]),r.flags|=2048,Mo(9,jo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=xo(),t=Dl.identifierPrefix;if(ls){var n=ts;t=":"+t+"R"+(n=(es&~(1<<32-st(es)-1)).toString(32)+n),0<(n=go++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=yo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ia={readContext:Ds,useCallback:Ho,useContext:Ds,useEffect:zo,useImperativeHandle:$o,useInsertionEffect:Bo,useLayoutEffect:Vo,useMemo:Ko,useReducer:Co,useRef:Oo,useState:function(){return Co(ko)},useDebugValue:Wo,useDeferredValue:function(e){return Go(So(),ho.memoizedState,e)},useTransition:function(){return[Co(ko)[0],So().memoizedState]},useMutableSource:To,useSyncExternalStore:No,useId:Jo,unstable_isNewReconciler:!1},sa={readContext:Ds,useCallback:Ho,useContext:Ds,useEffect:zo,useImperativeHandle:$o,useInsertionEffect:Bo,useLayoutEffect:Vo,useMemo:Ko,useReducer:Eo,useRef:Oo,useState:function(){return Eo(ko)},useDebugValue:Wo,useDeferredValue:function(e){var t=So();return null===ho?t.memoizedState=e:Go(t,ho.memoizedState,e)},useTransition:function(){return[Eo(ko)[0],So().memoizedState]},useMutableSource:To,useSyncExternalStore:No,useId:Jo,unstable_isNewReconciler:!1};function oa(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function aa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var la={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=su(),i=ou(e),s=Vs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=qs(e,s,i))&&(au(t,e,i,r),$s(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=su(),i=ou(e),s=Vs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=qs(e,s,i))&&(au(t,e,i,r),$s(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=su(),r=ou(e),i=Vs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=qs(e,i,r))&&(au(t,e,r,n),$s(t,e,r))}};function ua(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,s))}function ha(e,t,n){var r=!1,i=Ai,s=t.contextType;return"object"===typeof s&&null!==s?s=Ds(s):(i=Oi(t)?Di:Ri.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Mi(e,i):Ai),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=la,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function da(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&la.enqueueReplaceState(t,t.state,null)}function fa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},zs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ds(s):(s=Oi(t)?Di:Ri.current,i.context=Mi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(aa(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&la.enqueueReplaceState(i,i.state,null),Hs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function pa(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ma(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ga(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ya="function"===typeof WeakMap?WeakMap:Map;function va(e,t,n){(n=Vs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ql||(Ql=!0,Jl=r),ga(0,t)},n}function ba(e,t,n){(n=Vs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ga(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ga(0,t),"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function wa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ya;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ju.bind(null,e,t,n),t.then(e,e))}function _a(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xa(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Vs(-1,1)).tag=2,qs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var Sa=w.ReactCurrentOwner,ka=!1;function Ca(e,t,n,r){t.child=null===e?Cs(t,null,n,r):ks(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return Ps(t,i),r=wo(e,t,n,r,s,i),n=_o(),null===e||ka?(ls&&n&&is(t),t.flags|=1,Ca(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qa(e,t,i))}function Ta(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Lu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Na(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:hr)(o,r)&&e.ref===t.ref)return Qa(e,t,i)}return t.flags|=1,(e=Uu(s,r)).ref=t.ref,e.return=t,t.child=e}function Na(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(hr(s,r)&&e.ref===t.ref){if(ka=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Qa(e,t,i);0!==(131072&e.flags)&&(ka=!0)}}return Aa(e,t,n,r,i)}function Ia(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ul,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ul,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ii(Ul,Ll),Ll|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ii(Ul,Ll),Ll|=r;return Ca(e,t,i,n),t.child}function ja(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,i){var s=Oi(n)?Di:Ri.current;return s=Mi(t,s),Ps(t,i),n=wo(e,t,n,r,s,i),r=_o(),null===e||ka?(ls&&r&&is(t),t.flags|=1,Ca(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Qa(e,t,i))}function Ra(e,t,n,r,i){if(Oi(n)){var s=!0;zi(t)}else s=!1;if(Ps(t,i),null===t.stateNode)Ga(e,t),ha(t,n,r),fa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ds(u):u=Mi(t,u=Oi(n)?Di:Ri.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&da(t,o,r,u),Fs=!1;var d=t.memoizedState;o.state=d,Hs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Pi.current||Fs?("function"===typeof c&&(aa(t,n,c,r),l=t.memoizedState),(a=Fs||ua(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Bs(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:oa(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ds(l):l=Mi(t,l=Oi(n)?Di:Ri.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&da(t,o,r,l),Fs=!1,d=t.memoizedState,o.state=d,Hs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Pi.current||Fs?("function"===typeof f&&(aa(t,n,f,r),p=t.memoizedState),(u=Fs||ua(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Pa(e,t,n,r,s,i)}function Pa(e,t,n,r,i,s){ja(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Bi(t,n,!1),Qa(e,t,s);r=t.stateNode,Sa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ks(t,e.child,null,s),t.child=ks(t,null,a,s)):Ca(e,t,a,s),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function Da(e){var t=e.stateNode;t.pendingContext?Ui(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ui(0,t.context,!1),Zs(e,t.containerInfo)}function Ma(e,t,n,r,i){return ys(),vs(i),t.flags|=256,Ca(e,t,n,r),t.child}var Oa,La,Ua,Fa,za={dehydrated:null,treeContext:null,retryLane:0};function Ba(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var r,i=t.pendingProps,o=ro.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(ro,1&o),null===e)return fs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bu(l,i,0,null),e=zu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ba(n),t.memoizedState=za,e):qa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,$a(e,t,a,r=ma(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Bu({mode:"visible",children:r.children},i,0,null),(o=zu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ks(t,e.child,null,a),t.child.memoizedState=Ba(a),t.memoizedState=za,o);if(0===(1&t.mode))return $a(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,$a(e,t,a,r=ma(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ka||l){if(null!==(r=Dl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Us(e,i),au(r,e,i,-1))}return wu(),$a(e,t,a,r=ma(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ru.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,as=di(i.nextSibling),os=t,ls=!0,us=null,null!==e&&(Yi[Xi++]=es,Yi[Xi++]=ts,Yi[Xi++]=Zi,es=e.id,ts=e.overflow,Zi=t),t=qa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Uu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Uu(r,a):(a=zu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ba(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=za,i}return e=(a=e.child).sibling,i=Uu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function qa(e,t){return(t=Bu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $a(e,t,n,r){return null!==r&&vs(r),ks(t,e.child,null,n),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Rs(e.return,t,n)}function Ha(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ka(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ca(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ha(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ha(t,!0,n,null,s);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Uu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ja(e,t){if(!ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ya(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xa(e,t,n){var r=t.pendingProps;switch(ss(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ya(t),null;case 1:case 17:return Oi(t.type)&&Li(),Ya(t),null;case 3:return r=t.stateNode,eo(),Ni(Pi),Ni(Ri),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ms(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==us&&(hu(us),us=null))),La(e,t),Ya(t),null;case 5:no(t);var i=Xs(Ys.current);if(n=t.type,null!==e&&null!=t.stateNode)Ua(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ya(t),null}if(e=Xs(Qs.current),ms(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[mi]=t,r[gi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Ur.length;i++)Vr(Ur[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":J(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&ti(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&ti(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ni)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[mi]=t,e[gi]=r,Oa(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ur.length;i++)Vr(Ur[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":J(e,r),i=Q(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Vr("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ni)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ya(t),null;case 6:if(e&&null!=t.stateNode)Fa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Xs(Ys.current),Xs(Qs.current),ms(t)){if(r=t.stateNode,n=t.memoizedProps,r[mi]=t,(o=r.nodeValue!==n)&&null!==(e=os))switch(e.tag){case 3:ti(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ti(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[mi]=t,t.stateNode=r}return Ya(t),null;case 13:if(Ni(ro),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ls&&null!==as&&0!==(1&t.mode)&&0===(128&t.flags))gs(),ys(),t.flags|=98560,o=!1;else if(o=ms(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[mi]=t}else ys(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ya(t),o=!1}else null!==us&&(hu(us),us=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Fl&&(Fl=3):wu())),null!==t.updateQueue&&(t.flags|=4),Ya(t),null);case 4:return eo(),La(e,t),null===e&&Wr(t.stateNode.containerInfo),Ya(t),null;case 10:return As(t.type._context),Ya(t),null;case 19:if(Ni(ro),null===(o=t.memoizedState))return Ya(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ja(o,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=io(e))){for(t.flags|=128,Ja(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Kl&&(t.flags|=128,r=!0,Ja(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ja(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ls)return Ya(t),null}else 2*Je()-o.renderingStartTime>Kl&&1073741824!==n&&(t.flags|=128,r=!0,Ja(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ro.current,Ii(ro,r?1&n|2:1&n),t):(Ya(t),null);case 22:case 23:return gu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Ya(t),6&t.subtreeFlags&&(t.flags|=8192)):Ya(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Za(e,t){switch(ss(t),t.tag){case 1:return Oi(t.type)&&Li(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ni(Pi),Ni(Ri),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ni(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ys()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ni(ro),null;case 4:return eo(),null;case 10:return As(t.type._context),null;case 22:case 23:return gu(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},La=function(){},Ua=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xs(Qs.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ni)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Vr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Fa=function(e,t,n,r){n!==r&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,rl=null;function il(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Iu(e,t,r)}else n.current=null}function sl(e,t,n){try{n()}catch(r){Iu(e,t,r)}}var ol=!1;function al(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&sl(t,n,s)}i=i.next}while(i!==r)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ul(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function cl(e){var t=e.alternate;null!==t&&(e.alternate=null,cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[mi],delete t[gi],delete t[vi],delete t[bi],delete t[wi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hl(e){return 5===e.tag||3===e.tag||4===e.tag}function dl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||hl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ni));else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var ml=null,gl=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:tl||il(n,t);case 6:var r=ml,i=gl;ml=null,yl(e,t,n),gl=i,null!==(ml=r)&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ml.removeChild(n.stateNode));break;case 18:null!==ml&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?hi(e.parentNode,n):1===e.nodeType&&hi(e,n),Bt(e)):hi(ml,n.stateNode));break;case 4:r=ml,i=gl,ml=n.stateNode.containerInfo,gl=!0,yl(e,t,n),ml=r,gl=i;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&sl(n,t,o),i=i.next}while(i!==r)}yl(e,t,n);break;case 1:if(!tl&&(il(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Iu(n,t,a)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(r=tl)||null!==n.memoizedState,yl(e,t,n),tl=r):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach((function(t){var r=Pu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function wl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ml=l.stateNode,gl=!1;break e;case 3:case 4:ml=l.stateNode.containerInfo,gl=!0;break e}l=l.return}if(null===ml)throw Error(s(160));vl(o,a,i),ml=null,gl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(Gn){Iu(i,t,Gn)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)_l(t,e),t=t.sibling}function _l(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wl(t,e),xl(e),4&r){try{al(3,e,e.return),ll(3,e)}catch(g){Iu(e,e.return,g)}try{al(5,e,e.return)}catch(g){Iu(e,e.return,g)}}break;case 1:wl(t,e),xl(e),512&r&&null!==n&&il(n,n.return);break;case 5:if(wl(t,e),xl(e),512&r&&null!==n&&il(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Iu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),ve(l,a);var c=ve(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?ce(i,d):"children"===h?he(i,d):b(i,h,d,c)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[gi]=o}catch(g){Iu(e,e.return,g)}}break;case 6:if(wl(t,e),xl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Iu(e,e.return,g)}}break;case 3:if(wl(t,e),xl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Iu(e,e.return,g)}break;case 4:default:wl(t,e),xl(e);break;case 13:wl(t,e),xl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Je())),4&r&&bl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(c=tl)||h,wl(t,e),tl=c):wl(t,e),xl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(rl=e,h=e.child;null!==h;){for(d=rl=h;null!==rl;){switch(p=(f=rl).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:il(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Iu(r,n,g)}}break;case 5:il(f,f.return);break;case 22:if(null!==f.memoizedState){El(d);continue}}null!==p?(p.return=f,rl=p):El(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=pe("display",a))}catch(g){Iu(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Iu(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wl(t,e),xl(e),4&r&&bl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(hl(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),pl(e,dl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;fl(e,dl(e),o);break;default:throw Error(s(161))}}catch($n){Iu(e,e.return,$n)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Sl(e,t,n){rl=e,kl(e,t,n)}function kl(e,t,n){for(var r=0!==(1&e.mode);null!==rl;){var i=rl,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||el;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||tl;a=el;var u=tl;if(el=o,(tl=l)&&!u)for(rl=i;null!==rl;)l=(o=rl).child,22===o.tag&&null!==o.memoizedState?Tl(i):null!==l?(l.return=o,rl=l):Tl(i);for(;null!==s;)rl=s,kl(s,t,n),s=s.sibling;rl=i,el=a,tl=u}Cl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,rl=s):Cl(e)}}function Cl(e){for(;null!==rl;){var t=rl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!tl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:oa(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ks(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ks(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}tl||512&t.flags&&ul(t)}catch(rr){Iu(t,t.return,rr)}}if(t===e){rl=null;break}if(null!==(n=t.sibling)){n.return=t.return,rl=n;break}rl=t.return}}function El(e){for(;null!==rl;){var t=rl;if(t===e){rl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,rl=n;break}rl=t.return}}function Tl(e){for(;null!==rl;){var t=rl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch($n){Iu(t,n,$n)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch($n){Iu(t,i,$n)}}var s=t.return;try{ul(t)}catch($n){Iu(t,s,$n)}break;case 5:var o=t.return;try{ul(t)}catch($n){Iu(t,o,$n)}}}catch($n){Iu(t,t.return,$n)}if(t===e){rl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,rl=a;break}rl=t.return}}var Nl,Il=Math.ceil,jl=w.ReactCurrentDispatcher,Al=w.ReactCurrentOwner,Rl=w.ReactCurrentBatchConfig,Pl=0,Dl=null,Ml=null,Ol=0,Ll=0,Ul=Ti(0),Fl=0,zl=null,Bl=0,Vl=0,ql=0,$l=null,Wl=null,Hl=0,Kl=1/0,Gl=null,Ql=!1,Jl=null,Yl=null,Xl=!1,Zl=null,eu=0,tu=0,nu=null,ru=-1,iu=0;function su(){return 0!==(6&Pl)?Je():-1!==ru?ru:ru=Je()}function ou(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==Ol?Ol&-Ol:null!==bs.transition?(0===iu&&(iu=pt()),iu):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function au(e,t,n,r){if(50<tu)throw tu=0,nu=null,Error(s(185));gt(e,n,r),0!==(2&Pl)&&e===Dl||(e===Dl&&(0===(2&Pl)&&(Vl|=n),4===Fl&&du(e,Ol)),lu(e,r),1===n&&0===Pl&&0===(1&t.mode)&&(Kl=Je()+500,qi&&Hi()))}function lu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-st(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=dt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Dl?Ol:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){qi=!0,Wi(e)}(fu.bind(null,e)):Wi(fu.bind(null,e)),ui((function(){0===(6&Pl)&&Hi()})),n=null;else{switch(bt(r)){case 1:n=Xe;break;case 4:n=Ze;break;case 16:default:n=et;break;case 536870912:n=nt}n=Du(n,uu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uu(e,t){if(ru=-1,iu=0,0!==(6&Pl))throw Error(s(327));var n=e.callbackNode;if(Tu()&&e.callbackNode!==n)return null;var r=ht(e,e===Dl?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=_u(e,r);else{t=r;var i=Pl;Pl|=2;var o=bu();for(Dl===e&&Ol===t||(Gl=null,Kl=Je()+500,yu(e,t));;)try{Su();break}catch(l){vu(e,l)}js(),jl.current=o,Pl=i,null!==Ml?t=0:(Dl=null,Ol=0,t=Fl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=cu(e,i))),1===t)throw n=zl,yu(e,0),du(e,r),lu(e,Je()),n;if(6===t)du(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!cr(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=_u(e,r))&&(0!==(o=ft(e))&&(r=o,t=cu(e,o))),1===t))throw n=zl,yu(e,0),du(e,r),lu(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Eu(e,Wl,Gl);break;case 3:if(du(e,r),(130023424&r)===r&&10<(t=Hl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){su(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=oi(Eu.bind(null,e,Wl,Gl),t);break}Eu(e,Wl,Gl);break;case 4:if(du(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Il(r/1960))-r)){e.timeoutHandle=oi(Eu.bind(null,e,Wl,Gl),r);break}Eu(e,Wl,Gl);break;default:throw Error(s(329))}}}return lu(e,Je()),e.callbackNode===n?uu.bind(null,e):null}function cu(e,t){var n=$l;return e.current.memoizedState.isDehydrated&&(yu(e,t).flags|=256),2!==(e=_u(e,t))&&(t=Wl,Wl=n,null!==t&&hu(t)),e}function hu(e){null===Wl?Wl=e:Wl.push.apply(Wl,e)}function du(e,t){for(t&=~ql,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function fu(e){if(0!==(6&Pl))throw Error(s(327));Tu();var t=ht(e,0);if(0===(1&t))return lu(e,Je()),null;var n=_u(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=cu(e,r))}if(1===n)throw n=zl,yu(e,0),du(e,t),lu(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e,Wl,Gl),lu(e,Je()),null}function pu(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Kl=Je()+500,qi&&Hi())}}function mu(e){null!==Zl&&0===Zl.tag&&0===(6&Pl)&&Tu();var t=Pl;Pl|=1;var n=Rl.transition,r=vt;try{if(Rl.transition=null,vt=1,e)return e()}finally{vt=r,Rl.transition=n,0===(6&(Pl=t))&&Hi()}}function gu(){Ll=Ul.current,Ni(Ul)}function yu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ai(n)),null!==Ml)for(n=Ml.return;null!==n;){var r=n;switch(ss(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:eo(),Ni(Pi),Ni(Ri),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ni(ro);break;case 10:As(r.type._context);break;case 22:case 23:gu()}n=n.return}if(Dl=e,Ml=e=Uu(e.current,null),Ol=Ll=t,Fl=0,zl=null,ql=Vl=Bl=0,Wl=$l=null,null!==Ms){for(t=0;t<Ms.length;t++)if(null!==(r=(n=Ms[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ms=null}return e}function vu(e,t){for(;;){var n=Ml;try{if(js(),ao.current=na,po){for(var r=co.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(uo=0,fo=ho=co=null,mo=!1,go=0,Al.current=null,null===n||null===n.return){Fl=1,zl=t,Ml=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Ol,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=_a(a);if(null!==p){p.flags&=-257,xa(p,a,l,0,t),1&p.mode&&wa(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){wa(o,c,t),wu();break e}u=Error(s(426))}else if(ls&&1&l.mode){var y=_a(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),xa(y,a,l,0,t),vs(pa(u,l));break e}}o=u=pa(u,l),4!==Fl&&(Fl=2),null===$l?$l=[o]:$l.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ws(o,va(0,u,t));break e;case 1:l=u;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ws(o,ba(o,l,t));break e}}o=o.return}while(null!==o)}Cu(n)}catch(ar){t=ar,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function bu(){var e=jl.current;return jl.current=na,null===e?na:e}function wu(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Dl||0===(268435455&Bl)&&0===(268435455&Vl)||du(Dl,Ol)}function _u(e,t){var n=Pl;Pl|=2;var r=bu();for(Dl===e&&Ol===t||(Gl=null,yu(e,t));;)try{xu();break}catch(i){vu(e,i)}if(js(),Pl=n,jl.current=r,null!==Ml)throw Error(s(261));return Dl=null,Ol=0,Fl}function xu(){for(;null!==Ml;)ku(Ml)}function Su(){for(;null!==Ml&&!Ge();)ku(Ml)}function ku(e){var t=Nl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?Cu(e):Ml=t,Al.current=null}function Cu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xa(n,t,Ll)))return void(Ml=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return Fl=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Fl&&(Fl=5)}function Eu(e,t,n){var r=vt,i=Rl.transition;try{Rl.transition=null,vt=1,function(e,t,n,r){do{Tu()}while(null!==Zl);if(0!==(6&Pl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Dl&&(Ml=Dl=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Du(et,(function(){return Tu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Rl.transition,Rl.transition=null;var a=vt;vt=1;var l=Pl;Pl|=4,Al.current=null,function(e,t){if(ri=qt,gr(e=mr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(ji){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ii={focusedElem:e,selectionRange:n},qt=!1,rl=t;null!==rl;)if(e=(t=rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,rl=e;else for(;null!==rl;){t=rl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:oa(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(ji){Iu(t,t.return,ji)}if(null!==(e=t.sibling)){e.return=t.return,rl=e;break}rl=t.return}m=ol,ol=!1}(e,n),_l(n,e),yr(ii),qt=!!ri,ii=ri=null,e.current=n,Sl(n,e,i),Qe(),Pl=l,vt=a,Rl.transition=o}else e.current=n;if(Xl&&(Xl=!1,Zl=e,eu=i),o=e.pendingLanes,0===o&&(Yl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),lu(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ql)throw Ql=!1,e=Jl,Jl=null,e;0!==(1&eu)&&0!==e.tag&&Tu(),o=e.pendingLanes,0!==(1&o)?e===nu?tu++:(tu=0,nu=e):tu=0,Hi()}(e,t,n,r)}finally{Rl.transition=i,vt=r}return null}function Tu(){if(null!==Zl){var e=bt(eu),t=Rl.transition,n=vt;try{if(Rl.transition=null,vt=16>e?16:e,null===Zl)var r=!1;else{if(e=Zl,Zl=null,eu=0,0!==(6&Pl))throw Error(s(331));var i=Pl;for(Pl|=4,rl=e.current;null!==rl;){var o=rl,a=o.child;if(0!==(16&rl.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(rl=c;null!==rl;){var h=rl;switch(h.tag){case 0:case 11:case 15:al(8,h,o)}var d=h.child;if(null!==d)d.return=h,rl=d;else for(;null!==rl;){var f=(h=rl).sibling,p=h.return;if(cl(h),h===c){rl=null;break}if(null!==f){f.return=p,rl=f;break}rl=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}rl=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,rl=a;else e:for(;null!==rl;){if(0!==(2048&(o=rl).flags))switch(o.tag){case 0:case 11:case 15:al(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,rl=v;break e}rl=o.return}}var b=e.current;for(rl=b;null!==rl;){var w=(a=rl).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,rl=w;else e:for(a=b;null!==rl;){if(0!==(2048&(l=rl).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(ar){Iu(l,l.return,ar)}if(l===a){rl=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,rl=_;break e}rl=l.return}}if(Pl=i,Hi(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(ar){}r=!0}return r}finally{vt=n,Rl.transition=t}}return!1}function Nu(e,t,n){e=qs(e,t=va(0,t=pa(n,t),1),1),t=su(),null!==e&&(gt(e,1,t),lu(e,t))}function Iu(e,t,n){if(3===e.tag)Nu(e,e,n);else for(;null!==t;){if(3===t.tag){Nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=qs(t,e=ba(t,e=pa(n,e),1),1),e=su(),null!==t&&(gt(t,1,e),lu(t,e));break}}t=t.return}}function ju(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=su(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Ol&n)===n&&(4===Fl||3===Fl&&(130023424&Ol)===Ol&&500>Je()-Hl?yu(e,0):ql|=n),lu(e,t)}function Au(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=su();null!==(e=Us(e,t))&&(gt(e,t,n),lu(e,n))}function Ru(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Au(e,n)}function Pu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Au(e,n)}function Du(e,t){return He(e,t)}function Mu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ou(e,t,n,r){return new Mu(e,t,n,r)}function Lu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uu(e,t){var n=e.alternate;return null===n?((n=Ou(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fu(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Lu(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return zu(n.children,i,o,t);case k:a=8,i|=8;break;case C:return(e=Ou(12,n,t,2|i)).elementType=C,e.lanes=o,e;case I:return(e=Ou(13,n,t,i)).elementType=I,e.lanes=o,e;case j:return(e=Ou(19,n,t,i)).elementType=j,e.lanes=o,e;case P:return Bu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case T:a=9;break e;case N:a=11;break e;case A:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ou(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function zu(e,t,n,r){return(e=Ou(7,e,r,t)).lanes=n,e}function Bu(e,t,n,r){return(e=Ou(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Vu(e,t,n){return(e=Ou(6,e,null,t)).lanes=n,e}function qu(e,t,n){return(t=Ou(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $u(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wu(e,t,n,r,i,s,o,a,l){return e=new $u(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ou(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zs(s),e}function Hu(e){if(!e)return Ai;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Fi(e,n,t)}return t}function Ku(e,t,n,r,i,s,o,a,l){return(e=Wu(n,r,!0,e,0,s,0,a,l)).context=Hu(null),n=e.current,(s=Vs(r=su(),i=ou(n))).callback=void 0!==t&&null!==t?t:null,qs(n,s,i),e.current.lanes=i,gt(e,i,r),lu(e,r),e}function Gu(e,t,n,r){var i=t.current,s=su(),o=ou(i);return n=Hu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Vs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=qs(i,t,o))&&(au(e,i,o,s),$s(e,i,o)),o}function Qu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ju(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yu(e,t){Ju(e,t),(e=e.alternate)&&Ju(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)ka=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ka=!1,function(e,t,n){switch(t.tag){case 3:Da(t),ys();break;case 5:to(t);break;case 1:Oi(t.type)&&zi(t);break;case 4:Zs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(Ii(ro,1&ro.current),null!==(e=Qa(e,t,n))?e.sibling:null);Ii(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ka(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Qa(e,t,n)}(e,t,n);ka=0!==(131072&e.flags)}else ka=!1,ls&&0!==(1048576&t.flags)&&rs(t,Ji,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var i=Mi(t,Ri.current);Ps(t,n),i=wo(null,t,r,e,i,n);var o=_o();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,zi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,zs(t),i.updater=la,t.stateNode=i,i._reactInternals=t,fa(t,r,e,n),t=Pa(null,t,r,!0,o,n)):(t.tag=0,ls&&o&&is(t),Ca(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===A)return 14}return 2}(r),e=oa(r,e),i){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=Ra(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Ta(null,t,r,oa(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:oa(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:oa(r,i),n);case 3:e:{if(Da(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Bs(e,t),Hs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ma(e,t,r,n,i=pa(Error(s(423)),t));break e}if(r!==i){t=Ma(e,t,r,n,i=pa(Error(s(424)),t));break e}for(as=di(t.stateNode.containerInfo.firstChild),os=t,ls=!0,us=null,n=Cs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ys(),r===i){t=Qa(e,t,n);break e}Ca(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&fs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,si(r,i)?a=null:null!==o&&si(r,o)&&(t.flags|=32),ja(e,t),Ca(e,t,a,n),t.child;case 6:return null===e&&fs(t),null;case 13:return Va(e,t,n);case 4:return Zs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ks(t,null,r,n):Ca(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:oa(r,i),n);case 7:return Ca(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ca(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ii(Es,r._currentValue),r._currentValue=a,null!==o)if(cr(o.value,a)){if(o.children===i.children&&!Pi.current){t=Qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Vs(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Rs(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Rs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ca(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ps(t,n),r=r(i=Ds(i)),t.flags|=1,Ca(e,t,r,n),t.child;case 14:return i=oa(r=t.type,t.pendingProps),Ta(e,t,r,i=oa(r.type,i),n);case 15:return Na(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:oa(r,i),Ga(e,t),t.tag=1,Oi(r)?(e=!0,zi(t)):e=!1,Ps(t,n),ha(t,r,i),fa(t,r,i,n),Pa(null,t,r,!0,e,n);case 19:return Ka(e,t,n);case 22:return Ia(e,t,n)}throw Error(s(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function Zu(e){this._internalRoot=e}function ec(e){this._internalRoot=e}function tc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function nc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function rc(){}function ic(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Qu(o);a.call(e)}}Gu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Qu(o);s.call(e)}}var o=Ku(t,r,e,0,null,!1,0,"",rc);return e._reactRootContainer=o,e[yi]=o.current,Wr(8===e.nodeType?e.parentNode:e),mu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Qu(l);a.call(e)}}var l=Wu(e,0,!1,null,0,!1,0,"",rc);return e._reactRootContainer=l,e[yi]=l.current,Wr(8===e.nodeType?e.parentNode:e),mu((function(){Gu(t,l,n,r)})),l}(n,t,e,i,r);return Qu(o)}ec.prototype.render=Zu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Gu(e,t,null,null)},ec.prototype.unmount=Zu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;mu((function(){Gu(null,e,null,null)})),t[yi]=null}},ec.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ot(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(yt(t,1|n),lu(t,Je()),0===(6&Pl)&&(Kl=Je()+500,Hi()))}break;case 13:mu((function(){var t=Us(e,1);if(null!==t){var n=su();au(t,e,1,n)}})),Yu(e,1)}},_t=function(e){if(13===e.tag){var t=Us(e,134217728);if(null!==t)au(t,e,134217728,su());Yu(e,134217728)}},xt=function(e){if(13===e.tag){var t=ou(e),n=Us(e,t);if(null!==n)au(n,e,t,su());Yu(e,t)}},St=function(){return vt},kt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ki(r);if(!i)throw Error(s(90));K(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=pu,Ne=mu;var sc={usingClientEntryPoint:!1,Events:[xi,Si,ki,Ce,Ee,pu]},oc={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ac={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{rt=lc.inject(ac),it=lc}catch(uc){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!tc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!tc(e))throw Error(s(299));var n=!1,r="",i=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Wu(e,1,!1,null,0,n,0,r,i),e[yi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Zu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e){return mu(e)},t.hydrate=function(e,t,n){if(!nc(t))throw Error(s(200));return ic(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!tc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Ku(t,null,e,1,null!=n?n:null,i,0,o,a),e[yi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new ec(t)},t.render=function(e,t,n){if(!nc(t))throw Error(s(200));return ic(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nc(e))throw Error(s(40));return!!e._reactRootContainer&&(mu((function(){ic(null,null,e,!1,(function(){e._reactRootContainer=null,e[yi]=null}))})),!0)},t.unstable_batchedUpdates=pu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ic(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".5ff19fd2.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="incommon:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/incommon/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],u=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)s=o[u],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkincommon=self.webpackChunkincommon||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r={};n.r(r),n.d(r,{hasBrowserEnv:()=>dR,hasStandardBrowserEnv:()=>pR,hasStandardBrowserWebWorkerEnv:()=>mR,navigator:()=>fR,origin:()=>gR});var i,s=n(43),o=n.t(s,2),a=n(391),l=n(950),u=n.t(l,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const h="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?y(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function y(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,l=i.Pop,u=null,f=y();function y(){return(a.state||{idx:null}).idx}function v(){l=i.Pop;let e=y(),t=null==e?null:e-f;f=e,u&&u({action:l,location:w.location,delta:t})}function b(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,a.replaceState(c({},a.state,{idx:f}),""));let w={get action(){return l},get location(){return e(s,a)},listen(e){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(h,v),u=e,()=>{s.removeEventListener(h,v),u=null}},createHref:e=>t(s,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=i.Push;let r=m(w.location,e,t);n&&n(r,e),f=y()+1;let c=p(r,f),h=w.createHref(r);try{a.pushState(c,"",h)}catch(Bm){if(Bm instanceof DOMException&&"DataCloneError"===Bm.name)throw Bm;s.location.assign(h)}o&&u&&u({action:l,location:w.location,delta:1})},replace:function(e,t){l=i.Replace;let r=m(w.location,e,t);n&&n(r,e),f=y();let s=p(r,f),c=w.createHref(r);a.replaceState(s,"",c),o&&u&&u({action:l,location:w.location,delta:0})},go:e=>a.go(e)};return w}var b;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(b||(b={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,n){return void 0===n&&(n="/"),_(e,t,n,!1)}function _(e,t,n,r){let i=M(("string"===typeof t?y(t):t).pathname||"/",n);if(null==i)return null;let s=x(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=D(i);o=R(s[a],e,r)}return o}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(d(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=z([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),x(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:A(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of S(e.path))i(e,t,r);else i(e,t)})),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=S(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const k=/^:[\w-]+$/,C=3,E=2,T=1,N=10,I=-2,j=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(j)&&(r+=I),t&&(r+=E),n.filter((e=>!j(e))).reduce(((e,t)=>e+(k.test(t)?C:""===t?T:N)),r)}function R(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,u="/"===s?t:t.slice(s.length)||"/",c=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),h=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),o.push({params:i,pathname:z([s,c.pathname]),pathnameBase:B(z([s,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(s=z([s,c.pathnameBase]))}return o}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function D(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Bm){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Bm+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function L(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function U(e,t){let n=L(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function F(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=y(e):(i=c({},e),d(!i.pathname||!i.pathname.includes("?"),O("?","pathname","search",i)),d(!i.pathname||!i.pathname.includes("#"),O("#","pathname","hash",i)),d(!i.search||!i.search.includes("#"),O("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?y(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:V(r),hash:q(i)}}(i,s),u=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!h||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],H=(new Set(W),["get",...W]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const G=s.createContext(null);const Q=s.createContext(null);const J=s.createContext(null);const Y=s.createContext(null);const X=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=s.createContext(null);function ee(){return null!=s.useContext(Y)}function te(){return ee()||d(!1),s.useContext(Y).location}function ne(e){s.useContext(J).static||s.useLayoutEffect(e)}function re(){let{isDataRoute:e}=s.useContext(X);return e?function(){let{router:e}=pe(de.UseNavigateStable),t=ge(fe.UseNavigateStable),n=s.useRef(!1);ne((()=>{n.current=!0}));let r=s.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,K({fromRouteId:t},i)))}),[e,t]);return r}():function(){ee()||d(!1);let e=s.useContext(G),{basename:t,future:n,navigator:r}=s.useContext(J),{matches:i}=s.useContext(X),{pathname:o}=te(),a=JSON.stringify(U(i,n.v7_relativeSplatPath)),l=s.useRef(!1);ne((()=>{l.current=!0}));let u=s.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=F(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:z([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[t,r,a,o,e]);return u}()}function ie(){let{matches:e}=s.useContext(X),t=e[e.length-1];return t?t.params:{}}function se(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(J),{matches:i}=s.useContext(X),{pathname:o}=te(),a=JSON.stringify(U(i,r.v7_relativeSplatPath));return s.useMemo((()=>F(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function oe(e,t,n,r){ee()||d(!1);let{navigator:o,static:a}=s.useContext(J),{matches:l}=s.useContext(X),u=l[l.length-1],c=u?u.params:{},h=(u&&u.pathname,u?u.pathnameBase:"/");u&&u.route;let f,p=te();if(t){var m;let e="string"===typeof t?y(t):t;"/"===h||(null==(m=e.pathname)?void 0:m.startsWith(h))||d(!1),f=e}else f=p;let g=f.pathname||"/",v=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=!a&&n&&n.matches&&n.matches.length>0?n.matches:w(e,{pathname:v});let _=he(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:z([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:z([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,n,r);return t&&_?s.createElement(Y.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:i.Pop}},_):_}function ae(){let e=function(){var e;let t=s.useContext(Z),n=me(fe.UseRouteError),r=ge(fe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=$(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const le=s.createElement(ae,null);class ue extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(X.Provider,{value:this.props.routeContext},s.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(G);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(X.Provider,{value:t},r)}function he(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||d(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<a.length;s++){let e=a[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(c=s),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight(((e,r,i)=>{let o,h=!1,d=null,f=null;var p;n&&(o=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||le,u&&(c<0&&0===i?(p="route-fallback",!1||ye[p]||(ye[p]=!0),h=!0,f=null):c===i&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=o?d:h?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ce,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(ue,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fe||{});function pe(e){let t=s.useContext(G);return t||d(!1),t}function me(e){let t=s.useContext(Q);return t||d(!1),t}function ge(e){let t=function(){let e=s.useContext(X);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const ye={};function ve(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}o.startTransition;function be(e){d(!1)}function we(e){let{basename:t="/",children:n=null,location:r,navigationType:o=i.Pop,navigator:a,static:l=!1,future:u}=e;ee()&&d(!1);let c=t.replace(/^\/*/,"/"),h=s.useMemo((()=>({basename:c,navigator:a,static:l,future:K({v7_relativeSplatPath:!1},u)})),[c,u,a,l]);"string"===typeof r&&(r=y(r));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:v="default"}=r,b=s.useMemo((()=>{let e=M(f,c);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:v},navigationType:o}}),[c,f,p,m,g,v,o]);return null==b?null:s.createElement(J.Provider,{value:h},s.createElement(Y.Provider,{children:n,value:b}))}function _e(e){let{children:t,location:n}=e;return oe(xe(t),n)}new Promise((()=>{}));s.Component;function xe(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,((e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,xe(e.props.children,i));e.type!==be&&d(!1),e.props.index&&e.props.children&&d(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=xe(e.props.children,i)),n.push(o)})),n}function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(PP){}new Map;const Ee=o.startTransition;u.flushSync,o.useId;function Te(e){let{basename:t,children:n,future:r,window:i}=e,o=s.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),v((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=y(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),m("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:g(t))}),(function(e,t){f("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),a)));let l=o.current,[u,c]=s.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},d=s.useCallback((e=>{h&&Ee?Ee((()=>c(e))):c(e)}),[c,h]);return s.useLayoutEffect((()=>l.listen(d)),[l,d]),s.useEffect((()=>ve(r)),[r]),s.createElement(we,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const Ne="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,je=s.forwardRef((function(e,t){let n,{onClick:r,relative:i,reloadDocument:o,replace:a,state:l,target:u,to:c,preventScrollReset:h,viewTransition:f}=e,p=ke(e,Ce),{basename:m}=s.useContext(J),y=!1;if("string"===typeof c&&Ie.test(c)&&(n=c,Ne))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=M(t.pathname,m);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:y=!0}catch(PP){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;ee()||d(!1);let{basename:r,navigator:i}=s.useContext(J),{hash:o,pathname:a,search:l}=se(e,{relative:n}),u=a;return"/"!==r&&(u="/"===a?r:z([r,a])),i.createHref({pathname:u,search:l,hash:o})}(c,{relative:i}),b=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:l}=void 0===t?{}:t,u=re(),c=te(),h=se(e,{relative:a});return s.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:g(c)===g(h);u(e,{replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:l})}}),[c,u,h,r,i,n,e,o,a,l])}(c,{replace:a,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:f});return s.createElement("a",Se({},p,{href:n||v,onClick:y||o?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:u}))}));var Ae,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));const Pe=!1,De=!1,Me="${JSCORE_VERSION}",Oe=function(e,t){if(!e)throw Le(t)},Le=function(e){return new Error("Firebase Database ("+Me+") INTERNAL ASSERT FAILED: "+e)},Ue=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ue(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new ze;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ze extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Be=function(e){const t=Ue(e);return Fe.encodeByteArray(t,!0)},Ve=function(e){return Be(e).replace(/\./g,"")},qe=function(e){try{return Fe.decodeString(e,!0)}catch(PP){console.error("base64Decode failed: ",PP)}return null};function $e(e){return We(void 0,e)}function We(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=We(e[n],t[n]));return e}const He=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ke=()=>{try{return He()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/incommon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(PP){return}const t=e&&qe(e[1]);return t&&JSON.parse(t)})()}catch(PP){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${PP}`)}},Ge=e=>{const t=(e=>{var t,n;return null===(n=null===(t=Ke())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Qe=()=>{var e;return null===(e=Ke())||void 0===e?void 0:e.config};class Je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ye(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function Ze(){return!0===Pe||!0===De}function et(){try{return"object"===typeof indexedDB}catch(PP){return!1}}function tt(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Bm){t(Bm)}}))}class nt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,nt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rt.prototype.create)}}class rt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(it,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new nt(n,s,t)}}const it=/\{\$([^}]+)}/g;function st(e){return JSON.parse(e)}function ot(e){return JSON.stringify(e)}const at=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=st(qe(s[0])||""),n=st(qe(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(PP){}return{header:t,claims:n,data:r,signature:i}};function lt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ut(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ct(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ht(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function dt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(ft(n)&&ft(s)){if(!dt(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ft(e){return null!==e&&"object"===typeof e}class pt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let c=0;c<16;c++)n[c]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let c=0;c<16;c++)n[c]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let c=16;c<80;c++){const e=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],u=this.chain_[4];for(let c=0;c<80;c++){c<40?c<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):c<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+u+i+n[c]&4294967295;u=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function mt(e,t){return`${e} failed: ${t} argument `}const gt=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function yt(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function vt(e){return e&&e._delegate?e._delegate:e}class bt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const wt="[DEFAULT]";class _t{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Je;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(PP){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(PP){if(r)return null;throw PP}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:wt})}catch(PP){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(PP){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===wt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;return this.component?this.component.multipleInstances?e:wt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class xt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _t(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const St=[];var kt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(kt||(kt={}));const Ct={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},Et=kt.INFO,Tt={[kt.DEBUG]:"log",[kt.VERBOSE]:"log",[kt.INFO]:"info",[kt.WARN]:"warn",[kt.ERROR]:"error"},Nt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Tt[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class It{constructor(e){this.name=e,this._logLevel=Et,this._logHandler=Nt,this._userLogHandler=null,St.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ct[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,kt.DEBUG,...t),this._logHandler(this,kt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,kt.VERBOSE,...t),this._logHandler(this,kt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,kt.INFO,...t),this._logHandler(this,kt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,kt.WARN,...t),this._logHandler(this,kt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,kt.ERROR,...t),this._logHandler(this,kt.ERROR,...t)}}let jt,At;const Rt=new WeakMap,Pt=new WeakMap,Dt=new WeakMap,Mt=new WeakMap,Ot=new WeakMap;let Lt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Pt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Dt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ut(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(At||(At=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Bt(this),n),zt(Rt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zt(e.apply(Bt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Bt(this),t,...r);return Dt.set(s,t.sort?t.sort():[t]),zt(s)}}function Ft(e){return"function"===typeof e?Ut(e):(e instanceof IDBTransaction&&function(e){if(Pt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Pt.set(e,t)}(e),t=e,(jt||(jt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Lt):e);var t}function zt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(zt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Rt.set(t,e)})).catch((()=>{})),Ot.set(t,e),t}(e);if(Mt.has(e))return Mt.get(e);const t=Ft(e);return t!==e&&(Mt.set(e,t),Ot.set(t,e)),t}const Bt=e=>Ot.get(e);const Vt=["get","getKey","getAll","getAllKeys","count"],qt=["put","add","delete","clear"],$t=new Map;function Wt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if($t.get(t))return $t.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=qt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Vt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return $t.set(t,s),s}Lt=(e=>({...e,get:(t,n,r)=>Wt(t,n)||e.get(t,n,r),has:(t,n)=>!!Wt(t,n)||e.has(t,n)}))(Lt);class Ht{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Kt="@firebase/app",Gt="0.9.13",Qt=new It("@firebase/app"),Jt="@firebase/app-compat",Yt="@firebase/analytics-compat",Xt="@firebase/analytics",Zt="@firebase/app-check-compat",en="@firebase/app-check",tn="@firebase/auth",nn="@firebase/auth-compat",rn="@firebase/database",sn="@firebase/database-compat",on="@firebase/functions",an="@firebase/functions-compat",ln="@firebase/installations",un="@firebase/installations-compat",cn="@firebase/messaging",hn="@firebase/messaging-compat",dn="@firebase/performance",fn="@firebase/performance-compat",pn="@firebase/remote-config",mn="@firebase/remote-config-compat",gn="@firebase/storage",yn="@firebase/storage-compat",vn="@firebase/firestore",bn="@firebase/firestore-compat",wn="firebase",_n="[DEFAULT]",xn={[Kt]:"fire-core",[Jt]:"fire-core-compat",[Xt]:"fire-analytics",[Yt]:"fire-analytics-compat",[en]:"fire-app-check",[Zt]:"fire-app-check-compat",[tn]:"fire-auth",[nn]:"fire-auth-compat",[rn]:"fire-rtdb",[sn]:"fire-rtdb-compat",[on]:"fire-fn",[an]:"fire-fn-compat",[ln]:"fire-iid",[un]:"fire-iid-compat",[cn]:"fire-fcm",[hn]:"fire-fcm-compat",[dn]:"fire-perf",[fn]:"fire-perf-compat",[pn]:"fire-rc",[mn]:"fire-rc-compat",[gn]:"fire-gcs",[yn]:"fire-gcs-compat",[vn]:"fire-fst",[bn]:"fire-fst-compat","fire-js":"fire-js",[wn]:"fire-js-all"},Sn=new Map,kn=new Map;function Cn(e,t){try{e.container.addComponent(t)}catch(PP){Qt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,PP)}}function En(e){const t=e.name;if(kn.has(t))return Qt.debug(`There were multiple attempts to register component ${t}.`),!1;kn.set(t,e);for(const n of Sn.values())Cn(n,e);return!0}function Tn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Nn=new rt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class In{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new bt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const jn="9.23.0";function An(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:_n,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Nn.create("bad-app-name",{appName:String(i)});if(n||(n=Qe()),!n)throw Nn.create("no-options");const s=Sn.get(i);if(s){if(dt(n,s.options)&&dt(r,s.config))return s;throw Nn.create("duplicate-app",{appName:i})}const o=new xt(i);for(const l of kn.values())o.addComponent(l);const a=new In(n,r,o);return Sn.set(i,a),a}function Rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n;const t=Sn.get(e);if(!t&&e===_n&&Qe())return An();if(!t)throw Nn.create("no-app",{appName:e});return t}function Pn(e,t,n){var r;let i=null!==(r=xn[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Qt.warn(e.join(" "))}En(new bt(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Dn="firebase-heartbeat-store";let Mn=null;function On(){return Mn||(Mn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=zt(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(zt(o.result),e.oldVersion,e.newVersion,zt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Dn)}}).catch((e=>{throw Nn.create("idb-open",{originalErrorMessage:e.message})}))),Mn}async function Ln(e,t){try{const n=(await On()).transaction(Dn,"readwrite"),r=n.objectStore(Dn);await r.put(t,Un(e)),await n.done}catch(PP){if(PP instanceof nt)Qt.warn(PP.message);else{const t=Nn.create("idb-set",{originalErrorMessage:null===PP||void 0===PP?void 0:PP.message});Qt.warn(t.message)}}}function Un(e){return`${e.name}!${e.options.appId}`}class Fn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Bn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=zn();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=zn(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Vn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Vn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Ve(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function zn(){return(new Date).toISOString().substring(0,10)}class Bn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!et()&&tt().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await On();return await t.transaction(Dn).objectStore(Dn).get(Un(e))}catch(PP){if(PP instanceof nt)Qt.warn(PP.message);else{const t=Nn.create("idb-get",{originalErrorMessage:null===PP||void 0===PP?void 0:PP.message});Qt.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ln(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ln(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Vn(e){return Ve(JSON.stringify({version:2,heartbeats:e})).length}var qn;qn="",En(new bt("platform-logger",(e=>new Ht(e)),"PRIVATE")),En(new bt("heartbeat",(e=>new Fn(e)),"PRIVATE")),Pn(Kt,Gt,qn),Pn(Kt,Gt,"esm2017"),Pn("fire-js","");var $n,Wn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Hn={},Kn=Kn||{},Gn=Wn||self;function Qn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Jn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Yn="closure_uid_"+(1e9*Math.random()>>>0),Xn=0;function Zn(e,t,n){return e.call.apply(e.bind,arguments)}function er(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function tr(e,t,n){return(tr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Zn:er).apply(null,arguments)}function nr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function rr(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function ir(){this.s=this.s,this.o=this.o}ir.prototype.s=!1,ir.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,Yn)&&e[Yn]||(e[Yn]=++Xn)}(this)},ir.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function or(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ar(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Qn(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function lr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}lr.prototype.h=function(){this.defaultPrevented=!0};var ur=function(){if(!Gn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Gn.addEventListener("test",(()=>{}),t),Gn.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function cr(e){return/^[\s\xa0]*$/.test(e)}function hr(){var e=Gn.navigator;return e&&(e=e.userAgent)?e:""}function dr(e){return-1!=hr().indexOf(e)}function fr(e){return fr[" "](e),e}fr[" "]=function(){};var pr,mr,gr=dr("Opera"),yr=dr("Trident")||dr("MSIE"),vr=dr("Edge"),br=vr||yr,wr=dr("Gecko")&&!(-1!=hr().toLowerCase().indexOf("webkit")&&!dr("Edge"))&&!(dr("Trident")||dr("MSIE"))&&!dr("Edge"),_r=-1!=hr().toLowerCase().indexOf("webkit")&&!dr("Edge");function xr(){var e=Gn.document;return e?e.documentMode:void 0}e:{var Sr="",kr=function(){var e=hr();return wr?/rv:([^\);]+)(\)|;)/.exec(e):vr?/Edge\/([\d\.]+)/.exec(e):yr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):_r?/WebKit\/(\S+)/.exec(e):gr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(kr&&(Sr=kr?kr[1]:""),yr){var Cr=xr();if(null!=Cr&&Cr>parseFloat(Sr)){pr=String(Cr);break e}}pr=Sr}if(Gn.document&&yr){var Er=xr();mr=Er||(parseInt(pr,10)||void 0)}else mr=void 0;var Tr=mr;function Nr(e,t){if(lr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(wr){e:{try{fr(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ir[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Nr.$.h.call(this)}}rr(Nr,lr);var Ir={2:"touch",3:"pen",4:"mouse"};Nr.prototype.h=function(){Nr.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var jr="closure_listenable_"+(1e6*Math.random()|0),Ar=0;function Rr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ar,this.fa=this.ia=!1}function Pr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Dr(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Mr(e){const t={};for(const n in e)t[n]=e[n];return t}const Or="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Or.length;t++)n=Or[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ur(e){this.src=e,this.g={},this.h=0}function Fr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=sr(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Pr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function zr(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Ur.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=zr(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Rr(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Br="closure_lm_"+(1e6*Math.random()|0),Vr={};function qr(e,t,n,r,i){if(r&&r.once)return Wr(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)qr(e,t[s],n,r,i);return null}return n=Xr(n),e&&e[jr]?e.O(t,n,Jn(r)?!!r.capture:!!r,i):$r(e,t,n,!1,r,i)}function $r(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Jn(i)?!!i.capture:!!i,a=Jr(e);if(a||(e[Br]=a=new Ur(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Qr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ur||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Gr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Wr(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Wr(e,t[s],n,r,i);return null}return n=Xr(n),e&&e[jr]?e.P(t,n,Jn(r)?!!r.capture:!!r,i):$r(e,t,n,!0,r,i)}function Hr(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Hr(e,t[s],n,r,i);else r=Jn(r)?!!r.capture:!!r,n=Xr(n),e&&e[jr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=zr(s=e.g[t],n,r,i))&&(Pr(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Jr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=zr(t,n,r,i)),(n=-1<e?t[e]:null)&&Kr(n))}function Kr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[jr])Fr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Gr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Jr(t))?(Fr(n,e),0==n.h&&(n.src=null,t[Br]=null)):Pr(e)}}}function Gr(e){return e in Vr?Vr[e]:Vr[e]="on"+e}function Qr(e,t){if(e.fa)e=!0;else{t=new Nr(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Kr(e),e=n.call(r,t)}return e}function Jr(e){return(e=e[Br])instanceof Ur?e:null}var Yr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xr(e){return"function"===typeof e?e:(e[Yr]||(e[Yr]=function(t){return e.handleEvent(t)}),e[Yr])}function Zr(){ir.call(this),this.i=new Ur(this),this.S=this,this.J=null}function ei(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new lr(t,e);else if(t instanceof lr)t.target=t.target||e;else{var i=t;Lr(t=new lr(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ti(o,r,!0,t)&&i}if(i=ti(o=t.g=e,r,!0,t)&&i,i=ti(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ti(o=t.g=n[s],r,!1,t)&&i}function ti(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Fr(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}rr(Zr,ir),Zr.prototype[jr]=!0,Zr.prototype.removeEventListener=function(e,t,n,r){Hr(this,e,t,n,r)},Zr.prototype.N=function(){if(Zr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Pr(n[r]);delete t.g[e],t.h--}}this.J=null},Zr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Zr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ni=Gn.JSON.stringify;function ri(){var e=ci;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ii=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new si),(e=>e.reset()));class si{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function oi(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ai(e){Gn.setTimeout((()=>{throw e}),0)}let li,ui=!1,ci=new class{constructor(){this.h=this.g=null}add(e,t){const n=ii.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},hi=()=>{const e=Gn.Promise.resolve(void 0);li=()=>{e.then(di)}};var di=()=>{for(var e;e=ri();){try{e.h.call(e.g)}catch(n){ai(n)}var t=ii;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ui=!1};function fi(e,t){Zr.call(this),this.h=e||1,this.g=t||Gn,this.j=tr(this.qb,this),this.l=Date.now()}function pi(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function mi(e,t,n){if("function"===typeof e)n&&(e=tr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=tr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Gn.setTimeout(e,t||0)}function gi(e){e.g=mi((()=>{e.g=null,e.i&&(e.i=!1,gi(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}rr(fi,Zr),($n=fi.prototype).ga=!1,$n.T=null,$n.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ei(this,"tick"),this.ga&&(pi(this),this.start()))}},$n.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$n.N=function(){fi.$.N.call(this),pi(this),delete this.g};class yi extends ir{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gi(this)}N(){super.N(),this.g&&(Gn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(e){ir.call(this),this.h=e,this.g={}}rr(vi,ir);var bi=[];function wi(e,t,n,r){Array.isArray(n)||(n&&(bi[0]=n.toString()),n=bi);for(var i=0;i<n.length;i++){var s=qr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function _i(e){Dr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Kr(e)}),e),e.g={}}function xi(){this.g=!0}function Si(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ni(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}vi.prototype.N=function(){vi.$.N.call(this),_i(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xi.prototype.Ea=function(){this.g=!1},xi.prototype.info=function(){};var ki={},Ci=null;function Ei(){return Ci=Ci||new Zr}function Ti(e){lr.call(this,ki.Ta,e)}function Ni(e){const t=Ei();ei(t,new Ti(t))}function Ii(e,t){lr.call(this,ki.STAT_EVENT,e),this.stat=t}function ji(e){const t=Ei();ei(t,new Ii(t,e))}function Ai(e,t){lr.call(this,ki.Ua,e),this.size=t}function Ri(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Gn.setTimeout((function(){e()}),t)}ki.Ta="serverreachability",rr(Ti,lr),ki.STAT_EVENT="statevent",rr(Ii,lr),ki.Ua="timingevent",rr(Ai,lr);var Pi={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Di={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Mi(){}function Oi(e){return e.h||(e.h=e.i())}function Li(){}Mi.prototype.h=null;var Ui,Fi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function zi(){lr.call(this,"d")}function Bi(){lr.call(this,"c")}function Vi(){}function qi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new vi(this),this.P=Wi,e=br?125:void 0,this.V=new fi(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $i}function $i(){this.i=null,this.g="",this.h=!1}rr(zi,lr),rr(Bi,lr),rr(Vi,Mi),Vi.prototype.g=function(){return new XMLHttpRequest},Vi.prototype.i=function(){return{}},Ui=new Vi;var Wi=45e3,Hi={},Ki={};function Gi(e,t,n){e.L=1,e.v=fs(ls(t)),e.s=n,e.S=!0,Qi(e,null)}function Qi(e,t){e.G=Date.now(),Zi(e),e.A=ls(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Es(n.i,"t",r),e.C=0,n=e.l.J,e.h=new $i,e.g=To(e.l,n?t:null,!e.s),0<e.O&&(e.M=new yi(tr(e.Pa,e,e.g),e.O)),wi(e.U,e.g,"readystatechange",e.nb),t=e.I?Mr(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ni(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Ji(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Yi(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=Xi(e,n),r==Ki){4==t&&(e.o=4,ji(14),i=!1),Si(e.j,e.m,null,"[Incomplete Response]");break}if(r==Hi){e.o=4,ji(15),Si(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Si(e.j,e.m,r,null),is(e,r)}Ji(e)&&r!=Ki&&r!=Hi&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ji(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),bo(t),t.M=!0,ji(11))):(Si(e.j,e.m,n,"[Invalid Chunked Response]"),rs(e),ns(e))}function Xi(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ki:(n=Number(t.substring(n,r)),isNaN(n)?Hi:(r+=1)+n>t.length?Ki:(t=t.slice(r,r+n),e.C=r+n,t))}function Zi(e){e.Y=Date.now()+e.P,es(e,e.P)}function es(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ri(tr(e.lb,e),t)}function ts(e){e.B&&(Gn.clearTimeout(e.B),e.B=null)}function ns(e){0==e.l.H||e.J||xo(e.l,e)}function rs(e){ts(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,pi(e.V),_i(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function is(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ps(n.i,e)))if(!e.K&&Ps(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(ZC){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;_o(n),co(n)}vo(n),ji(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ri(tr(n.ib,n),6e3));if(1>=Rs(n.i)&&n.oa){try{n.oa()}catch(ZC){}n.oa=void 0}}else ko(n,11)}else if((e.K||n.g==e)&&_o(n),!cr(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ds(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,ds(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Eo(r,r.J?r.pa:null,r.Y),o.K){Ms(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(ts(a),Zi(a)),r.g=o}else yo(r);0<n.j.length&&fo(n)}else"stop"!=u[0]&&"close"!=u[0]||ko(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?ko(n,7):uo(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Ni()}catch(ZC){}}function ss(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Qn(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Qn(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Qn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}($n=qi.prototype).setTimeout=function(e){this.P=e},$n.nb=function(e){e=e.target;const t=this.M;t&&3==ro(e)?t.l():this.Pa(e)},$n.Pa=function(e){try{if(e==this.g)e:{const c=ro(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||br||this.g&&(this.h.h||this.g.ja()||io(this.g)))){this.J||4!=c||7==t||Ni(),ts(this);var n=this.g.da();this.ca=n;t:if(Ji(this)){var r=io(this.g);e="";var i=r.length,s=4==ro(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rs(this),ns(this);var o="";break t}this.h.i=new Gn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cr(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,ji(12),rs(this),ns(this);break e}Si(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,is(this,n)}this.S?(Yi(this,c,o),br&&this.i&&3==c&&(wi(this.U,this.V,"tick",this.mb),this.V.start())):(Si(this.j,this.m,o,null),is(this,o)),4==c&&rs(this),this.i&&!this.J&&(4==c?xo(this.l,this):(this.i=!1,Zi(this)))}else(function(e){const t={};e=(e.g&&2<=ro(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(cr(e[r]))continue;var n=oi(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ji(12)):(this.o=0,ji(13)),rs(this),ns(this)}}}catch(c){}},$n.mb=function(){if(this.g){var e=ro(this.g),t=this.g.ja();this.C<t.length&&(ts(this),Yi(this,e,t),this.i&&4!=e&&Zi(this))}},$n.cancel=function(){this.J=!0,rs(this)},$n.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Ni(),ji(17)),rs(this),this.o=2,ns(this)):es(this,this.Y-e)};var os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function as(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof as){this.h=e.h,us(this,e.j),this.s=e.s,this.g=e.g,cs(this,e.m),this.l=e.l;var t=e.i,n=new xs;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),hs(this,n),this.o=e.o}else e&&(t=String(e).match(os))?(this.h=!1,us(this,t[1]||"",!0),this.s=ps(t[2]||""),this.g=ps(t[3]||"",!0),cs(this,t[4]),this.l=ps(t[5]||"",!0),hs(this,t[6]||"",!0),this.o=ps(t[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}function ls(e){return new as(e)}function us(e,t,n){e.j=n?ps(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function cs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function hs(e,t,n){t instanceof xs?(e.i=t,function(e,t){t&&!e.j&&(Ss(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ks(this,t),Es(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ms(t,ws)),e.i=new xs(t,e.h))}function ds(e,t,n){e.i.set(t,n)}function fs(e){return ds(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ps(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ms(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,gs),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function gs(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}as.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ms(t,ys,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ms(t,ys,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ms(n,"/"==n.charAt(0)?bs:vs,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ms(n,_s)),e.join("")};var ys=/[#\/\?@]/g,vs=/[#\?:]/g,bs=/[#\?]/g,ws=/[#\?@]/g,_s=/#/g;function xs(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Ss(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ks(e,t){Ss(e),t=Ts(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Cs(e,t){return Ss(e),t=Ts(e,t),e.g.has(t)}function Es(e,t,n){ks(e,t),0<n.length&&(e.i=null,e.g.set(Ts(e,t),or(n)),e.h+=n.length)}function Ts(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}($n=xs.prototype).add=function(e,t){Ss(this),this.i=null,e=Ts(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},$n.forEach=function(e,t){Ss(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},$n.ta=function(){Ss(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},$n.Z=function(e){Ss(this);let t=[];if("string"===typeof e)Cs(this,e)&&(t=t.concat(this.g.get(Ts(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},$n.set=function(e,t){return Ss(this),this.i=null,Cs(this,e=Ts(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},$n.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},$n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Ns=class{constructor(e,t){this.g=e,this.map=t}};function Is(e){this.l=e||js,Gn.PerformanceNavigationTiming?e=0<(e=Gn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Gn.g&&Gn.g.Ka&&Gn.g.Ka()&&Gn.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var js=10;function As(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Rs(e){return e.h?1:e.g?e.g.size:0}function Ps(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ds(e,t){e.g?e.g.add(t):e.h=t}function Ms(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Os(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return or(e.i)}Is.prototype.cancel=function(){if(this.i=Os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ls=class{stringify(e){return Gn.JSON.stringify(e,void 0)}parse(e){return Gn.JSON.parse(e,void 0)}};function Us(){this.g=new Ls}function Fs(e,t,n){const r=n||"";try{ss(e,(function(e,n){let i=e;Jn(e)&&(i=ni(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(PP){throw t.push(r+"type="+encodeURIComponent("_badmap")),PP}}function zs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Bs(e){this.l=e.fc||null,this.j=e.ob||!1}function Vs(e,t){Zr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=qs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rr(Bs,Mi),Bs.prototype.g=function(){return new Vs(this.l,this.j)},Bs.prototype.i=function(e){return function(){return e}}({}),rr(Vs,Zr);var qs=0;function $s(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Ws(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Hs(e)}function Hs(e){e.onreadystatechange&&e.onreadystatechange.call(e)}($n=Vs.prototype).open=function(e,t){if(this.readyState!=qs)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Hs(this)},$n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Gn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},$n.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ws(this)),this.readyState=qs},$n.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Gn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$s(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},$n.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ws(this):Hs(this),3==this.readyState&&$s(this)}},$n.Za=function(e){this.g&&(this.response=this.responseText=e,Ws(this))},$n.Ya=function(e){this.g&&(this.response=e,Ws(this))},$n.ka=function(){this.g&&Ws(this)},$n.setRequestHeader=function(e,t){this.v.append(e,t)},$n.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},$n.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ks=Gn.JSON.parse;function Gs(e){Zr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Qs,this.L=this.M=!1}rr(Gs,Zr);var Qs="",Js=/^https?$/i,Ys=["POST","PUT"];function Xs(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Zs(e),to(e)}function Zs(e){e.F||(e.F=!0,ei(e,"complete"),ei(e,"error"))}function eo(e){if(e.h&&"undefined"!=typeof Kn&&(!e.C[1]||4!=ro(e)||2!=e.da()))if(e.v&&4==ro(e))mi(e.La,0,e);else if(ei(e,"readystatechange"),4==ro(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(os)[1]||null;!i&&Gn.self&&Gn.self.location&&(i=Gn.self.location.protocol.slice(0,-1)),r=!Js.test(i?i.toLowerCase():"")}n=r}if(n)ei(e,"complete"),ei(e,"success");else{e.m=6;try{var s=2<ro(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Zs(e)}}finally{to(e)}}}function to(e,t){if(e.g){no(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ei(e,"ready");try{n.onreadystatechange=r}catch(PP){}}}function no(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Gn.clearTimeout(e.A),e.A=null)}function ro(e){return e.g?e.g.readyState:0}function io(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Qs:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ca){return null}}function so(e){let t="";return Dr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function oo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=so(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ds(e,t,n))}function ao(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function lo(e){this.Ga=0,this.j=[],this.l=new xi,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ao("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ao("baseRetryDelayMs",5e3,e),this.hb=ao("retryDelaySeedMs",1e4,e),this.eb=ao("forwardChannelMaxRetries",2,e),this.xa=ao("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Is(e&&e.concurrentRequestLimit),this.Ja=new Us,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function uo(e){if(ho(e),3==e.H){var t=e.W++,n=ls(e.I);if(ds(n,"SID",e.K),ds(n,"RID",t),ds(n,"TYPE","terminate"),mo(e,n),(t=new qi(e,e.l,t)).L=2,t.v=fs(ls(n)),n=!1,Gn.navigator&&Gn.navigator.sendBeacon)try{n=Gn.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Gn.Image&&((new Image).src=t.v,n=!0),n||(t.g=To(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Zi(t)}Co(e)}function co(e){e.g&&(bo(e),e.g.cancel(),e.g=null)}function ho(e){co(e),e.u&&(Gn.clearTimeout(e.u),e.u=null),_o(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Gn.clearTimeout(e.m),e.m=null)}function fo(e){if(!As(e.i)&&!e.m){e.m=!0;var t=e.Na;li||hi(),ui||(li(),ui=!0),ci.add(t,e),e.C=0}}function po(e,t){var n;n=t?t.m:e.W++;const r=ls(e.I);ds(r,"SID",e.K),ds(r,"RID",n),ds(r,"AID",e.V),mo(e,r),e.o&&e.s&&oo(r,e.o,e.s),n=new qi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=go(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ds(e.i,n),Gi(n,r,t)}function mo(e,t){e.na&&Dr(e.na,(function(e,n){ds(t,n,e)})),e.h&&ss({},(function(e,n){ds(t,n,e)}))}function go(e,t,n){n=Math.min(e.j.length,n);var r=e.h?tr(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Fs(a,e,"req"+n+"_")}catch(_a){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function yo(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;li||hi(),ui||(li(),ui=!0),ci.add(t,e),e.A=0}}function vo(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ri(tr(e.Ma,e),So(e,e.A)),e.A++,!0)}function bo(e){null!=e.B&&(Gn.clearTimeout(e.B),e.B=null)}function wo(e){e.g=new qi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ls(e.wa);ds(t,"RID","rpc"),ds(t,"SID",e.K),ds(t,"AID",e.V),ds(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ds(t,"TO",e.qa),ds(t,"TYPE","xmlhttp"),mo(e,t),e.o&&e.s&&oo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=fs(ls(t)),n.s=null,n.S=!0,Qi(n,e)}function _o(e){null!=e.v&&(Gn.clearTimeout(e.v),e.v=null)}function xo(e,t){var n=null;if(e.g==t){_o(e),bo(e),e.g=null;var r=2}else{if(!Ps(e.i,t))return;n=t.F,Ms(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;ei(r=Ei(),new Ai(r,n)),fo(e)}else yo(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Rs(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ri(tr(e.Na,e,t),So(e,e.C)),e.C++,!0))}(e,t)||2==r&&vo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ko(e,5);break;case 4:ko(e,10);break;case 3:ko(e,6);break;default:ko(e,2)}}function So(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ko(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=tr(e.pb,e);n||(n=new as("//www.google.com/images/cleardot.gif"),Gn.location&&"http"==Gn.location.protocol||us(n,"https"),fs(n)),function(e,t){const n=new xi;if(Gn.Image){const r=new Image;r.onload=nr(zs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=nr(zs,n,r,"TestLoadImage: error",!1,t),r.onabort=nr(zs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=nr(zs,n,r,"TestLoadImage: timeout",!1,t),Gn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ji(2);e.H=0,e.h&&e.h.za(t),Co(e),ho(e)}function Co(e){if(e.H=0,e.ma=[],e.h){const t=Os(e.i);0==t.length&&0==e.j.length||(ar(e.ma,t),ar(e.ma,e.j),e.i.i.length=0,or(e.j),e.j.length=0),e.h.ya()}}function Eo(e,t,n){var r=n instanceof as?ls(n):new as(n);if(""!=r.g)t&&(r.g=t+"."+r.g),cs(r,r.m);else{var i=Gn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new as(null);r&&us(s,r),t&&(s.g=t),i&&cs(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&ds(r,n,t),ds(r,"VER",e.ra),mo(e,r),r}function To(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Gs(new Bs({ob:!0})):new Gs(e.va)).Oa(e.J),t}function No(){}function Io(){if(yr&&!(10<=Number(Tr)))throw Error("Environmental error: no available transport.")}function jo(e,t){Zr.call(this),this.g=new lo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!cr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!cr(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Po(this)}function Ao(e){zi.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ro(){Bi.call(this),this.status=1}function Po(e){this.g=e}function Do(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Mo(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Oo(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}($n=Gs.prototype).Oa=function(e){this.M=e},$n.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ui.g(),this.C=this.u?Oi(this.u):Oi(Ui),this.g.onreadystatechange=tr(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Xs(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Gn.FormData&&e instanceof Gn.FormData,!(0<=sr(Ys,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{no(this),0<this.B&&((this.L=function(e){return yr&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=tr(this.ua,this)):this.A=mi(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Xs(this,s)}},$n.ua=function(){"undefined"!=typeof Kn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ei(this,"timeout"),this.abort(8))},$n.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ei(this,"complete"),ei(this,"abort"),to(this))},$n.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),to(this,!0)),Gs.$.N.call(this)},$n.La=function(){this.s||(this.G||this.v||this.l?eo(this):this.kb())},$n.kb=function(){eo(this)},$n.isActive=function(){return!!this.g},$n.da=function(){try{return 2<ro(this)?this.g.status:-1}catch(e){return-1}},$n.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},$n.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ks(t)}},$n.Ia=function(){return this.m},$n.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},($n=lo.prototype).ra=8,$n.H=1,$n.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new qi(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Mr(s),Lr(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=go(this,i,t),ds(n=ls(this.I),"RID",e),ds(n,"CVER",22),this.F&&ds(n,"X-HTTP-Session-Id",this.F),mo(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(so(s)))+"&"+t:this.o&&oo(n,this.o,s)),Ds(this.i,i),this.bb&&ds(n,"TYPE","init"),this.P?(ds(n,"$req",t),ds(n,"SID","null"),i.aa=!0,Gi(i,n,null)):Gi(i,n,t),this.H=2}}else 3==this.H&&(e?po(this,e):0==this.j.length||As(this.i)||po(this))},$n.Ma=function(){if(this.u=null,wo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ri(tr(this.jb,this),e)}},$n.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ji(10),co(this),wo(this))},$n.ib=function(){null!=this.v&&(this.v=null,co(this),vo(this),ji(19))},$n.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ji(2)):(this.l.info("Failed to ping google.com"),ji(1))},$n.isActive=function(){return!!this.h&&this.h.isActive(this)},($n=No.prototype).Ba=function(){},$n.Aa=function(){},$n.za=function(){},$n.ya=function(){},$n.isActive=function(){return!0},$n.Va=function(){},Io.prototype.g=function(e,t){return new jo(e,t)},rr(jo,Zr),jo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ji(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Eo(e,null,e.Y),fo(e)},jo.prototype.close=function(){uo(this.g)},jo.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ni(e),e=n);t.j.push(new Ns(t.fb++,e)),3==t.H&&fo(t)},jo.prototype.N=function(){this.g.h=null,delete this.j,uo(this.g),delete this.g,jo.$.N.call(this)},rr(Ao,zi),rr(Ro,Bi),rr(Po,No),Po.prototype.Ba=function(){ei(this.g,"a")},Po.prototype.Aa=function(e){ei(this.g,new Ao(e))},Po.prototype.za=function(e){ei(this.g,new Ro)},Po.prototype.ya=function(){ei(this.g,"b")},rr(Do,(function(){this.blockSize=-1})),Do.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Do.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Mo(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Mo(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Mo(this,r),i=0;break}}this.h=i,this.i+=t},Do.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Lo={};function Uo(e){return-128<=e&&128>e?function(e,t){var n=Lo;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Oo([0|e],0>e?-1:0)})):new Oo([0|e],0>e?-1:0)}function Fo(e){if(isNaN(e)||!isFinite(e))return Bo;if(0>e)return Ho(Fo(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=zo;return new Oo(t,0)}var zo=4294967296,Bo=Uo(0),Vo=Uo(1),qo=Uo(16777216);function $o(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Wo(e){return-1==e.h}function Ho(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Oo(n,~e.h).add(Vo)}function Ko(e,t){return e.add(Ho(t))}function Go(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Qo(e,t){this.g=e,this.h=t}function Jo(e,t){if($o(t))throw Error("division by zero");if($o(e))return new Qo(Bo,Bo);if(Wo(e))return t=Jo(Ho(e),t),new Qo(Ho(t.g),Ho(t.h));if(Wo(t))return t=Jo(e,Ho(t)),new Qo(Ho(t.g),t.h);if(30<e.g.length){if(Wo(e)||Wo(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Vo,r=t;0>=r.X(e);)n=Yo(n),r=Yo(r);var i=Xo(n,1),s=Xo(r,1);for(r=Xo(r,2),n=Xo(n,2);!$o(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Xo(r,1),n=Xo(n,1)}return t=Ko(e,i.R(t)),new Qo(i,t)}for(i=Bo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Fo(n)).R(t);Wo(o)||0<o.X(e);)o=(s=Fo(n-=r)).R(t);$o(s)&&(s=Vo),i=i.add(s),e=Ko(e,o)}return new Qo(i,e)}function Yo(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Oo(n,e.h)}function Xo(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Oo(i,e.h)}($n=Oo.prototype).ea=function(){if(Wo(this))return-Ho(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:zo+r)*t,t*=zo}return e},$n.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if($o(this))return"0";if(Wo(this))return"-"+Ho(this).toString(e);for(var t=Fo(Math.pow(e,6)),n=this,r="";;){var i=Jo(n,t).g,s=((0<(n=Ko(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if($o(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},$n.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},$n.X=function(e){return Wo(e=Ko(this,e))?-1:$o(e)?0:1},$n.abs=function(){return Wo(this)?Ho(this):this},$n.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Oo(n,-2147483648&n[n.length-1]?-1:0)},$n.R=function(e){if($o(this)||$o(e))return Bo;if(Wo(this))return Wo(e)?Ho(this).R(Ho(e)):Ho(Ho(this).R(e));if(Wo(e))return Ho(this.R(Ho(e)));if(0>this.X(qo)&&0>e.X(qo))return Fo(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Go(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Go(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Go(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Go(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Oo(n,0)},$n.gb=function(e){return Jo(this,e).h},$n.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Oo(n,this.h&e.h)},$n.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Oo(n,this.h|e.h)},$n.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Oo(n,this.h^e.h)},Io.prototype.createWebChannel=Io.prototype.g,jo.prototype.send=jo.prototype.u,jo.prototype.open=jo.prototype.m,jo.prototype.close=jo.prototype.close,Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,Di.COMPLETE="complete",Li.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",Zr.prototype.listen=Zr.prototype.O,Gs.prototype.listenOnce=Gs.prototype.P,Gs.prototype.getLastError=Gs.prototype.Sa,Gs.prototype.getLastErrorCode=Gs.prototype.Ia,Gs.prototype.getStatus=Gs.prototype.da,Gs.prototype.getResponseJson=Gs.prototype.Wa,Gs.prototype.getResponseText=Gs.prototype.ja,Gs.prototype.send=Gs.prototype.ha,Gs.prototype.setWithCredentials=Gs.prototype.Oa,Do.prototype.digest=Do.prototype.l,Do.prototype.reset=Do.prototype.reset,Do.prototype.update=Do.prototype.j,Oo.prototype.add=Oo.prototype.add,Oo.prototype.multiply=Oo.prototype.R,Oo.prototype.modulo=Oo.prototype.gb,Oo.prototype.compare=Oo.prototype.X,Oo.prototype.toNumber=Oo.prototype.ea,Oo.prototype.toString=Oo.prototype.toString,Oo.prototype.getBits=Oo.prototype.D,Oo.fromNumber=Fo,Oo.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ho(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Fo(Math.pow(n,8)),i=Bo,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Fo(Math.pow(n,o)),i=i.R(o).add(Fo(a))):i=(i=i.R(r)).add(Fo(a))}return i};var Zo=Hn.createWebChannelTransport=function(){return new Io},ea=Hn.getStatEventTarget=function(){return Ei()},ta=Hn.ErrorCode=Pi,na=Hn.EventType=Di,ra=Hn.Event=ki,ia=Hn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},sa=Hn.FetchXmlHttpFactory=Bs,oa=Hn.WebChannel=Li,aa=Hn.XhrIo=Gs,la=Hn.Md5=Do,ua=Hn.Integer=Oo;const ca="@firebase/firestore";class ha{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ha.UNAUTHENTICATED=new ha(null),ha.GOOGLE_CREDENTIALS=new ha("google-credentials-uid"),ha.FIRST_PARTY=new ha("first-party-uid"),ha.MOCK_USER=new ha("mock-user");let da="9.23.0";const fa=new It("@firebase/firestore");function pa(){return fa.logLevel}function ma(e){if(fa.logLevel<=kt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(va);fa.debug(`Firestore (${da}): ${e}`,...i)}}function ga(e){if(fa.logLevel<=kt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(va);fa.error(`Firestore (${da}): ${e}`,...i)}}function ya(e){if(fa.logLevel<=kt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(va);fa.warn(`Firestore (${da}): ${e}`,...i)}}function va(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ba(){const e=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw ga(e),new Error(e)}function wa(e,t){e||ba()}function _a(e,t){return e}const xa={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Sa extends nt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ka{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ca{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ea{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ha.UNAUTHENTICATED)))}shutdown(){}}class Ta{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Na{constructor(e){this.t=e,this.currentUser=ha.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ka;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ka,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{ma("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ma("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ka)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ma("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(wa("string"==typeof t.accessToken),new Ca(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wa(null===e||"string"==typeof e),new ha(e)}}class Ia{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=ha.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ja{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Ia(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(ha.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Aa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ra{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&ma("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,ma("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{ma("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):ma("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(wa("string"==typeof e.token),this.T=e.token,new Aa(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Pa(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Da{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Pa(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Ma(e,t){return e<t?-1:e>t?1:0}function Oa(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class La{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Sa(xa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Sa(xa.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Sa(xa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Sa(xa.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return La.fromMillis(Date.now())}static fromDate(e){return La.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new La(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ma(this.nanoseconds,e.nanoseconds):Ma(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ua{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ua(e)}static min(){return new Ua(new La(0,0))}static max(){return new Ua(new La(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fa{constructor(e,t,n){void 0===t?t=0:t>e.length&&ba(),void 0===n?n=e.length-t:n>e.length-t&&ba(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Fa.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fa?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class za extends Fa{construct(e,t,n){return new za(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Sa(xa.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new za(e)}static emptyPath(){return new za([])}}const Ba=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Va extends Fa{construct(e,t,n){return new Va(e,t,n)}static isValidIdentifier(e){return Ba.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Va.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Va(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Sa(xa.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Sa(xa.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Sa(xa.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Sa(xa.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Va(t)}static emptyPath(){return new Va([])}}class qa{constructor(e){this.path=e}static fromPath(e){return new qa(za.fromString(e))}static fromName(e){return new qa(za.fromString(e).popFirst(5))}static empty(){return new qa(za.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===za.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return za.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qa(new za(e.slice()))}}class $a{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}$a.UNKNOWN_ID=-1;function Wa(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ua.fromTimestamp(1e9===r?new La(n+1,0):new La(n,r));return new Ka(i,qa.empty(),t)}function Ha(e){return new Ka(e.readTime,e.key,-1)}class Ka{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ka(Ua.min(),qa.empty(),-1)}static max(){return new Ka(Ua.max(),qa.empty(),-1)}}function Ga(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=qa.comparator(e.documentKey,t.documentKey),0!==n?n:Ma(e.largestBatchId,t.largestBatchId))}const Qa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ja{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ya(e){if(e.code!==xa.FAILED_PRECONDITION||e.message!==Qa)throw e;ma("LocalStore","Unexpectedly lost primary lease")}class Xa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ba(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xa(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Xa?t:Xa.resolve(t)}catch(e){return Xa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Xa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Xa.reject(t)}static resolve(e){return new Xa(((t,n)=>{t(e)}))}static reject(e){return new Xa(((t,n)=>{n(e)}))}static waitFor(e){return new Xa(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Xa.resolve(!1);for(const n of e)t=t.next((e=>e?Xa.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Xa(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Xa(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Za(e){return"IndexedDbTransactionError"===e.name}class el{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function tl(e){return null==e}function nl(e){return 0===e&&1/e==-1/0}function rl(e){return"number"==typeof e&&Number.isInteger(e)&&!nl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}el.ct=-1;const il=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],sl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ol=sl;function al(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ll(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ul(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class cl{constructor(e,t){this.comparator=e,this.root=t||dl.EMPTY}insert(e,t){return new cl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dl.BLACK,null,null))}remove(e){return new cl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hl(this.root,e,this.comparator,!1)}getReverseIterator(){return new hl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hl(this.root,e,this.comparator,!0)}}class hl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:dl.RED,this.left=null!=r?r:dl.EMPTY,this.right=null!=i?i:dl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new dl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return dl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ba();if(this.right.isRed())throw ba();const e=this.left.check();if(e!==this.right.check())throw ba();return e+(this.isRed()?0:1)}}dl.EMPTY=null,dl.RED=!0,dl.BLACK=!1,dl.EMPTY=new class{constructor(){this.size=0}get key(){throw ba()}get value(){throw ba()}get color(){throw ba()}get left(){throw ba()}get right(){throw ba()}copy(e,t,n,r,i){return this}insert(e,t,n){return new dl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fl{constructor(e){this.comparator=e,this.data=new cl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pl(this.data.getIterator())}getIteratorFrom(e){return new pl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof fl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new fl(this.comparator);return t.data=e,t}}class pl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ml{constructor(e){this.fields=e,e.sort(Va.comparator)}static empty(){return new ml([])}unionWith(e){let t=new fl(Va.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ml(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class gl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class yl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new gl("Invalid base64 string: "+e):e}}(e);return new yl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new yl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ma(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yl.EMPTY_BYTE_STRING=new yl("");const vl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bl(e){if(wa(!!e),"string"==typeof e){let t=0;const n=vl.exec(e);if(wa(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:wl(e.seconds),nanos:wl(e.nanos)}}function wl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function _l(e){return"string"==typeof e?yl.fromBase64String(e):yl.fromUint8Array(e)}function xl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sl(e){const t=e.mapValue.fields.__previous_value__;return xl(t)?Sl(t):t}function kl(e){const t=bl(e.mapValue.fields.__local_write_time__.timestampValue);return new La(t.seconds,t.nanos)}class Cl{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class El{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new El("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof El&&e.projectId===this.projectId&&e.database===this.database}}const Tl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Nl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xl(e)?4:Vl(e)?9007199254740991:10:ba()}function Il(e,t){if(e===t)return!0;const n=Nl(e);if(n!==Nl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return kl(e).isEqual(kl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=bl(e.timestampValue),r=bl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return _l(e.bytesValue).isEqual(_l(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wl(e.geoPointValue.latitude)===wl(t.geoPointValue.latitude)&&wl(e.geoPointValue.longitude)===wl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wl(e.integerValue)===wl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=wl(e.doubleValue),r=wl(t.doubleValue);return n===r?nl(n)===nl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Oa(e.arrayValue.values||[],t.arrayValue.values||[],Il);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(al(n)!==al(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Il(n[i],r[i])))return!1;return!0}(e,t);default:return ba()}}function jl(e,t){return void 0!==(e.values||[]).find((e=>Il(e,t)))}function Al(e,t){if(e===t)return 0;const n=Nl(e),r=Nl(t);if(n!==r)return Ma(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ma(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=wl(e.integerValue||e.doubleValue),r=wl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Rl(e.timestampValue,t.timestampValue);case 4:return Rl(kl(e),kl(t));case 5:return Ma(e.stringValue,t.stringValue);case 6:return function(e,t){const n=_l(e),r=_l(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ma(n[i],r[i]);if(0!==e)return e}return Ma(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ma(wl(e.latitude),wl(t.latitude));return 0!==n?n:Ma(wl(e.longitude),wl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Al(n[i],r[i]);if(e)return e}return Ma(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Tl.mapValue&&t===Tl.mapValue)return 0;if(e===Tl.mapValue)return 1;if(t===Tl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ma(r[o],s[o]);if(0!==e)return e;const t=Al(n[r[o]],i[s[o]]);if(0!==t)return t}return Ma(r.length,s.length)}(e.mapValue,t.mapValue);default:throw ba()}}function Rl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ma(e,t);const n=bl(e),r=bl(t),i=Ma(n.seconds,r.seconds);return 0!==i?i:Ma(n.nanos,r.nanos)}function Pl(e){return Dl(e)}function Dl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=bl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?_l(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,qa.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Dl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Dl(e.fields[i])}`;return n+"}"}(e.mapValue):ba();var t,n}function Ml(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ol(e){return!!e&&"integerValue"in e}function Ll(e){return!!e&&"arrayValue"in e}function Ul(e){return!!e&&"nullValue"in e}function Fl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zl(e){return!!e&&"mapValue"in e}function Bl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ll(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Bl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Bl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Vl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class ql{constructor(e){this.value=e}static empty(){return new ql({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!zl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bl(t)}setAll(e){let t=Va.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Bl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());zl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Il(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];zl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ll(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new ql(Bl(this.value))}}function $l(e){const t=[];return ll(e.fields,((e,n)=>{const r=new Va([e]);if(zl(n)){const e=$l(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new ml(t)}class Wl{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Wl(e,0,Ua.min(),Ua.min(),Ua.min(),ql.empty(),0)}static newFoundDocument(e,t,n,r){return new Wl(e,1,t,Ua.min(),n,r,0)}static newNoDocument(e,t){return new Wl(e,2,t,Ua.min(),Ua.min(),ql.empty(),0)}static newUnknownDocument(e,t){return new Wl(e,3,t,Ua.min(),Ua.min(),ql.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ua.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ql.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ql.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ua.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Wl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hl{constructor(e,t){this.position=e,this.inclusive=t}}function Kl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?qa.comparator(qa.fromName(o.referenceValue),n.key):Al(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Gl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Il(e.position[n],t.position[n]))return!1;return!0}class Ql{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Jl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Yl{}class Xl extends Yl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ou(e,t,n):"array-contains"===t?new cu(e,n):"in"===t?new hu(e,n):"not-in"===t?new du(e,n):"array-contains-any"===t?new fu(e,n):new Xl(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new au(e,n):new lu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Al(t,this.value)):null!==t&&Nl(this.value)===Nl(t)&&this.matchesComparison(Al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ba()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Zl extends Yl{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Zl(e,t)}matches(e){return eu(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function eu(e){return"and"===e.op}function tu(e){return nu(e)&&eu(e)}function nu(e){for(const t of e.filters)if(t instanceof Zl)return!1;return!0}function ru(e){if(e instanceof Xl)return e.field.canonicalString()+e.op.toString()+Pl(e.value);if(tu(e))return e.filters.map((e=>ru(e))).join(",");{const t=e.filters.map((e=>ru(e))).join(",");return`${e.op}(${t})`}}function iu(e,t){return e instanceof Xl?function(e,t){return t instanceof Xl&&e.op===t.op&&e.field.isEqual(t.field)&&Il(e.value,t.value)}(e,t):e instanceof Zl?function(e,t){return t instanceof Zl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&iu(n,t.filters[r])),!0)}(e,t):void ba()}function su(e){return e instanceof Xl?function(e){return`${e.field.canonicalString()} ${e.op} ${Pl(e.value)}`}(e):e instanceof Zl?function(e){return e.op.toString()+" {"+e.getFilters().map(su).join(" ,")+"}"}(e):"Filter"}class ou extends Xl{constructor(e,t,n){super(e,t,n),this.key=qa.fromName(n.referenceValue)}matches(e){const t=qa.comparator(e.key,this.key);return this.matchesComparison(t)}}class au extends Xl{constructor(e,t){super(e,"in",t),this.keys=uu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lu extends Xl{constructor(e,t){super(e,"not-in",t),this.keys=uu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function uu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>qa.fromName(e.referenceValue)))}class cu extends Xl{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ll(t)&&jl(t.arrayValue,this.value)}}class hu extends Xl{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jl(this.value.arrayValue,t)}}class du extends Xl{constructor(e,t){super(e,"not-in",t)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jl(this.value.arrayValue,t)}}class fu extends Xl{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ll(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>jl(this.value.arrayValue,e)))}}class pu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function mu(e){return new pu(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function gu(e){const t=_a(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ru(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),tl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Pl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Pl(e))).join(",")),t.dt=e}return t.dt}function yu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Jl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!iu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Gl(e.startAt,t.startAt)&&Gl(e.endAt,t.endAt)}function vu(e){return qa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class bu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function wu(e,t,n,r,i,s,o,a){return new bu(e,t,n,r,i,s,o,a)}function _u(e){return new bu(e)}function xu(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Su(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ku(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function Cu(e){return null!==e.collectionGroup}function Eu(e){const t=_a(e);if(null===t.wt){t.wt=[];const e=ku(t),n=Su(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Ql(e)),t.wt.push(new Ql(Va.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Ql(Va.keyField(),e))}}}return t.wt}function Tu(e){const t=_a(e);if(!t._t)if("F"===t.limitType)t._t=mu(t.path,t.collectionGroup,Eu(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Eu(t)){const t="desc"===i.dir?"asc":"desc";e.push(new Ql(i.field,t))}const n=t.endAt?new Hl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hl(t.startAt.position,t.startAt.inclusive):null;t._t=mu(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Nu(e,t){t.getFirstInequalityField(),ku(e);const n=e.filters.concat([t]);return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Iu(e,t,n){return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ju(e,t){return yu(Tu(e),Tu(t))&&e.limitType===t.limitType}function Au(e){return`${gu(Tu(e))}|lt:${e.limitType}`}function Ru(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>su(e))).join(", ")}]`),tl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Pl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Pl(e))).join(",")),`Target(${t})`}(Tu(e))}; limitType=${e.limitType})`}function Pu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):qa.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Eu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Kl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Eu(e),t))&&!(e.endAt&&!function(e,t,n){const r=Kl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Eu(e),t))}(e,t)}function Du(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Mu(e){return(t,n)=>{let r=!1;for(const i of Eu(e)){const e=Ou(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ou(e,t,n){const r=e.field.isKeyField()?qa.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Al(r,i):ba()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ba()}}class Lu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ll(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ul(this.inner)}size(){return this.innerSize}}const Uu=new cl(qa.comparator);function Fu(){return Uu}const zu=new cl(qa.comparator);function Bu(){let e=zu;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Vu(e){let t=zu;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function qu(){return Wu()}function $u(){return Wu()}function Wu(){return new Lu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Hu=new cl(qa.comparator),Ku=new fl(qa.comparator);function Gu(){let e=Ku;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Qu=new fl(Ma);function Ju(){return Qu}function Yu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nl(t)?"-0":t}}function Xu(e){return{integerValue:""+e}}function Zu(e,t){return rl(t)?Xu(t):Yu(e,t)}class ec{constructor(){this._=void 0}}function tc(e,t,n){return e instanceof ic?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&xl(t)&&(t=Sl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof sc?oc(e,t):e instanceof ac?lc(e,t):function(e,t){const n=rc(e,t),r=cc(n)+cc(e.gt);return Ol(n)&&Ol(e.gt)?Xu(r):Yu(e.serializer,r)}(e,t)}function nc(e,t,n){return e instanceof sc?oc(e,t):e instanceof ac?lc(e,t):n}function rc(e,t){return e instanceof uc?Ol(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class ic extends ec{}class sc extends ec{constructor(e){super(),this.elements=e}}function oc(e,t){const n=hc(t);for(const r of e.elements)n.some((e=>Il(e,r)))||n.push(r);return{arrayValue:{values:n}}}class ac extends ec{constructor(e){super(),this.elements=e}}function lc(e,t){let n=hc(t);for(const r of e.elements)n=n.filter((e=>!Il(e,r)));return{arrayValue:{values:n}}}class uc extends ec{constructor(e,t){super(),this.serializer=e,this.gt=t}}function cc(e){return wl(e.integerValue||e.doubleValue)}function hc(e){return Ll(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class dc{constructor(e,t){this.field=e,this.transform=t}}class fc{constructor(e,t){this.version=e,this.transformResults=t}}class pc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pc}static exists(e){return new pc(void 0,e)}static updateTime(e){return new pc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class gc{}function yc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Tc(e.key,pc.none()):new xc(e.key,e.data,pc.none());{const n=e.data,r=ql.empty();let i=new fl(Va.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Sc(e.key,r,new ml(i.toArray()),pc.none())}}function vc(e,t,n){e instanceof xc?function(e,t,n){const r=e.value.clone(),i=Cc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Sc?function(e,t,n){if(!mc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Cc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(kc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function bc(e,t,n,r){return e instanceof xc?function(e,t,n,r){if(!mc(e.precondition,t))return n;const i=e.value.clone(),s=Ec(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Sc?function(e,t,n,r){if(!mc(e.precondition,t))return n;const i=Ec(e.fieldTransforms,r,t),s=t.data;return s.setAll(kc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return mc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function wc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=rc(r.transform,e||null);null!=i&&(null===n&&(n=ql.empty()),n.set(r.field,i))}return n||null}function _c(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Oa(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof sc&&t instanceof sc||e instanceof ac&&t instanceof ac?Oa(e.elements,t.elements,Il):e instanceof uc&&t instanceof uc?Il(e.gt,t.gt):e instanceof ic&&t instanceof ic}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class xc extends gc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Sc extends gc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function kc(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Cc(e,t,n){const r=new Map;wa(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,nc(o,a,n[i]))}return r}function Ec(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,tc(e,s,t))}return r}class Tc extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nc extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ic{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&vc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=bc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=bc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=$u();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=yc(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Ua.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Gu())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,((e,t)=>_c(e,t)))&&Oa(this.baseMutations,e.baseMutations,((e,t)=>_c(e,t)))}}class jc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){wa(e.mutations.length===n.length);let r=Hu;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new jc(e,t,n,r)}}class Ac{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Rc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Pc,Dc;function Mc(e){switch(e){default:return ba();case xa.CANCELLED:case xa.UNKNOWN:case xa.DEADLINE_EXCEEDED:case xa.RESOURCE_EXHAUSTED:case xa.INTERNAL:case xa.UNAVAILABLE:case xa.UNAUTHENTICATED:return!1;case xa.INVALID_ARGUMENT:case xa.NOT_FOUND:case xa.ALREADY_EXISTS:case xa.PERMISSION_DENIED:case xa.FAILED_PRECONDITION:case xa.ABORTED:case xa.OUT_OF_RANGE:case xa.UNIMPLEMENTED:case xa.DATA_LOSS:return!0}}function Oc(e){if(void 0===e)return ga("GRPC error has no .code"),xa.UNKNOWN;switch(e){case Pc.OK:return xa.OK;case Pc.CANCELLED:return xa.CANCELLED;case Pc.UNKNOWN:return xa.UNKNOWN;case Pc.DEADLINE_EXCEEDED:return xa.DEADLINE_EXCEEDED;case Pc.RESOURCE_EXHAUSTED:return xa.RESOURCE_EXHAUSTED;case Pc.INTERNAL:return xa.INTERNAL;case Pc.UNAVAILABLE:return xa.UNAVAILABLE;case Pc.UNAUTHENTICATED:return xa.UNAUTHENTICATED;case Pc.INVALID_ARGUMENT:return xa.INVALID_ARGUMENT;case Pc.NOT_FOUND:return xa.NOT_FOUND;case Pc.ALREADY_EXISTS:return xa.ALREADY_EXISTS;case Pc.PERMISSION_DENIED:return xa.PERMISSION_DENIED;case Pc.FAILED_PRECONDITION:return xa.FAILED_PRECONDITION;case Pc.ABORTED:return xa.ABORTED;case Pc.OUT_OF_RANGE:return xa.OUT_OF_RANGE;case Pc.UNIMPLEMENTED:return xa.UNIMPLEMENTED;case Pc.DATA_LOSS:return xa.DATA_LOSS;default:return ba()}}(Dc=Pc||(Pc={}))[Dc.OK=0]="OK",Dc[Dc.CANCELLED=1]="CANCELLED",Dc[Dc.UNKNOWN=2]="UNKNOWN",Dc[Dc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dc[Dc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dc[Dc.NOT_FOUND=5]="NOT_FOUND",Dc[Dc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dc[Dc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dc[Dc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dc[Dc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dc[Dc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dc[Dc.ABORTED=10]="ABORTED",Dc[Dc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dc[Dc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dc[Dc.INTERNAL=13]="INTERNAL",Dc[Dc.UNAVAILABLE=14]="UNAVAILABLE",Dc[Dc.DATA_LOSS=15]="DATA_LOSS";class Lc{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Uc}static getOrCreateInstance(){return null===Uc&&(Uc=new Lc),Uc}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let Uc=null;function Fc(){return new TextEncoder}const zc=new ua([4294967295,4294967295],0);function Bc(e){const t=Fc().encode(e),n=new la;return n.update(t),new Uint8Array(n.digest())}function Vc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ua([n,r],0),new ua([i,s],0)]}class qc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new $c(`Invalid padding: ${t}`);if(n<0)throw new $c(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new $c(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new $c(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=ua.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(ua.fromNumber(n)));return 1===r.compare(zc)&&(r=new ua([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Bc(e),[n,r]=Vc(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new qc(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=Bc(e),[n,r]=Vc(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class $c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Hc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Wc(Ua.min(),r,new cl(Ma),Fu(),Gu())}}class Hc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Hc(n,t,Gu(),Gu(),Gu())}}class Kc{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class Gc{constructor(e,t){this.targetId=e,this.Vt=t}}class Qc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Jc{constructor(){this.St=0,this.Dt=Zc(),this.Ct=yl.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Gu(),t=Gu(),n=Gu();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ba()}})),new Hc(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Zc()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Yc{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Fu(),this.zt=Xc(),this.Wt=new cl(Ma)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:ba()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(vu(s))if(0===r){const e=new qa(s.path);this.Yt(n,e,Wl.newNoDocument(e,Ua.min()))}else wa(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Lc.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,l;const u={localCacheCount:t,existenceFilterCount:n.count},c=n.unchangedNames;return c&&(u.bloomFilter={applied:0===e,hashCount:null!==(r=null==c?void 0:c.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==c?void 0:c.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==c?void 0:c.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),u}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=_l(i).toUint8Array()}catch(e){if(e instanceof gl)return ya("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new qc(a,s,o)}catch(e){return ya(e instanceof $c?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&vu(i.target)){const t=new qa(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Wl.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=Gu();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new Wc(e,t,this.Wt,this.jt,n);return this.jt=Fu(),this.zt=Xc(),this.Wt=new cl(Ma),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Jc,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new fl(Ma),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ma("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Jc),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Xc(){return new cl(qa.comparator)}function Zc(){return new cl(qa.comparator)}const eh={asc:"ASCENDING",desc:"DESCENDING"},th={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nh={and:"AND",or:"OR"};class rh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ih(e,t){return e.useProto3Json||tl(t)?t:{value:t}}function sh(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function oh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ah(e,t){return sh(e,t.toTimestamp())}function lh(e){return wa(!!e),Ua.fromTimestamp(function(e){const t=bl(e);return new La(t.seconds,t.nanos)}(e))}function uh(e,t){return function(e){return new za(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ch(e){const t=za.fromString(e);return wa(jh(t)),t}function hh(e,t){return uh(e.databaseId,t.path)}function dh(e,t){const n=ch(t);if(n.get(1)!==e.databaseId.projectId)throw new Sa(xa.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Sa(xa.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new qa(gh(n))}function fh(e,t){return uh(e.databaseId,t)}function ph(e){const t=ch(e);return 4===t.length?za.emptyPath():gh(t)}function mh(e){return new za(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gh(e){return wa(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function yh(e,t,n){return{name:hh(e,t),fields:n.value.mapValue.fields}}function vh(e,t){let n;if(t instanceof xc)n={update:yh(e,t.key,t.value)};else if(t instanceof Tc)n={delete:hh(e,t.key)};else if(t instanceof Sc)n={update:yh(e,t.key,t.data),updateMask:Ih(t.fieldMask)};else{if(!(t instanceof Nc))return ba();n={verify:hh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ic)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof sc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ac)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof uc)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw ba()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ah(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ba()}(e,t.precondition)),n}function bh(e,t){return{documents:[fh(e,t.path)]}}function wh(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=fh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=fh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Nh(Zl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Eh(e.field),direction:Sh(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=ih(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function _h(e){let t=ph(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){wa(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=xh(e);return t instanceof Zl&&tu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Ql(Th(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,tl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Hl(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Hl(n,t)}(n.endAt)),wu(t,i,o,s,a,"F",l,u)}function xh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Th(e.unaryFilter.field);return Xl.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Th(e.unaryFilter.field);return Xl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Th(e.unaryFilter.field);return Xl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Th(e.unaryFilter.field);return Xl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ba()}}(e):void 0!==e.fieldFilter?function(e){return Xl.create(Th(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ba()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Zl.create(e.compositeFilter.filters.map((e=>xh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ba()}}(e.compositeFilter.op))}(e):ba()}function Sh(e){return eh[e]}function kh(e){return th[e]}function Ch(e){return nh[e]}function Eh(e){return{fieldPath:e.canonicalString()}}function Th(e){return Va.fromServerFormat(e.fieldPath)}function Nh(e){return e instanceof Xl?function(e){if("=="===e.op){if(Fl(e.value))return{unaryFilter:{field:Eh(e.field),op:"IS_NAN"}};if(Ul(e.value))return{unaryFilter:{field:Eh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Fl(e.value))return{unaryFilter:{field:Eh(e.field),op:"IS_NOT_NAN"}};if(Ul(e.value))return{unaryFilter:{field:Eh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eh(e.field),op:kh(e.op),value:e.value}}}(e):e instanceof Zl?function(e){const t=e.getFilters().map((e=>Nh(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ch(e.op),filters:t}}}(e):ba()}function Ih(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function jh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ah{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ua.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ua.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Ah(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ah(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ah(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ah(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Rh{constructor(e){this.fe=e}}function Ph(e){const t=_h({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Iu(t,t.limit,"L"):t}class Dh{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(wl(e.integerValue));else if("doubleValue"in e){const n=wl(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),nl(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(_l(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Vl(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ba()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),qa.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Dh.Ve=new Dh;class Mh{constructor(){this.rn=new Oh}addToCollectionParentIndex(e,t){return this.rn.add(t),Xa.resolve()}getCollectionParents(e,t){return Xa.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Xa.resolve()}deleteFieldIndex(e,t){return Xa.resolve()}getDocumentsMatchingTarget(e,t){return Xa.resolve(null)}getIndexType(e,t){return Xa.resolve(0)}getFieldIndexes(e,t){return Xa.resolve([])}getNextCollectionGroupToUpdate(e){return Xa.resolve(null)}getMinOffset(e,t){return Xa.resolve(Ka.min())}getMinOffsetFromCollectionGroup(e,t){return Xa.resolve(Ka.min())}updateCollectionGroup(e,t,n){return Xa.resolve()}updateIndexEntries(e,t){return Xa.resolve()}}class Oh{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fl(za.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new fl(za.comparator)).toArray()}}new Uint8Array(0);class Lh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Lh(e,Lh.DEFAULT_COLLECTION_PERCENTILE,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Lh.DEFAULT_COLLECTION_PERCENTILE=10,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lh.DEFAULT=new Lh(41943040,Lh.DEFAULT_COLLECTION_PERCENTILE,Lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lh.DISABLED=new Lh(-1,0,0);class Uh{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Uh(0)}static Mn(){return new Uh(-1)}}class Fh{constructor(){this.changes=new Lu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Xa.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&bc(n.mutation,e,ml.empty(),La.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Gu()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gu();const r=qu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Bu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=qu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Gu())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Fu();const s=Wu(),o=Wu();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Sc)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),bc(o.mutation,t,o.mutation.getFieldMask(),La.now())):s.set(t.key,ml.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new zh(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Wu();let r=new cl(((e,t)=>e-t)),i=Gu();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ml.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Gu()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=$u();l.forEach((e=>{if(!i.has(e)){const r=yc(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return Xa.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return qa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Xa.resolve(qu());let o=-1,a=i;return s.next((t=>Xa.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Xa.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Gu()))).next((e=>({batchId:o,changes:Vu(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qa(t)).next((e=>{let t=Bu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Bu();return this.indexManager.getCollectionParents(e,r).next((s=>Xa.forEach(s,(s=>{const o=function(e,t){return new bu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Wl.newInvalidDocument(r)))}));let n=Bu();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&bc(s.mutation,i,ml.empty(),La.now()),Pu(t,i)&&(n=n.insert(e,i))})),n}))}}class Vh{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Xa.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:lh(n.createTime)}),Xa.resolve()}getNamedQuery(e,t){return Xa.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Ph(e.bundledQuery),readTime:lh(e.readTime)}}(t)),Xa.resolve()}}class qh{constructor(){this.overlays=new cl(qa.comparator),this.ls=new Map}getOverlay(e,t){return Xa.resolve(this.overlays.get(t))}getOverlays(e,t){const n=qu();return Xa.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),Xa.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),Xa.resolve()}getOverlaysForCollection(e,t,n){const r=qu(),i=t.length+1,s=new qa(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Xa.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new cl(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=qu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=qu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Xa.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ac(t,n));let i=this.ls.get(t);void 0===i&&(i=Gu(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class $h{constructor(){this.fs=new fl(Wh.ds),this.ws=new fl(Wh._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Wh(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new Wh(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new qa(new za([])),n=new Wh(t,e),r=new Wh(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new qa(new za([])),n=new Wh(t,e),r=new Wh(t,e+1);let i=Gu();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Wh(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Wh{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return qa.comparator(e.key,t.key)||Ma(e.As,t.As)}static _s(e,t){return Ma(e.As,t.As)||qa.comparator(e.key,t.key)}}class Hh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new fl(Wh.ds)}checkEmpty(e){return Xa.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ic(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new Wh(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Xa.resolve(s)}lookupMutationBatch(e,t){return Xa.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return Xa.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Xa.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Xa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Wh(t,0),r=new Wh(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),Xa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fl(Ma);return t.forEach((e=>{const t=new Wh(e,0),r=new Wh(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),Xa.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;qa.isDocumentKey(i)||(i=i.child(""));const s=new Wh(new qa(i),0);let o=new fl(Ma);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),s),Xa.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){wa(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Xa.forEach(t.mutations,(r=>{const i=new Wh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new Wh(t,0),r=this.Rs.firstAfterOrEqual(n);return Xa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xa.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Kh{constructor(e){this.Ds=e,this.docs=new cl(qa.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Xa.resolve(n?n.document.mutableCopy():Wl.newInvalidDocument(t))}getEntries(e,t){let n=Fu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Wl.newInvalidDocument(e))})),Xa.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Fu();const s=t.path,o=new qa(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ga(Ha(o),n)<=0||(r.has(o.key)||Pu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Xa.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ba()}Cs(e,t){return Xa.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Gh(this)}getSize(e){return Xa.resolve(this.size)}}class Gh extends Fh{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),Xa.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Qh{constructor(e){this.persistence=e,this.xs=new Lu((e=>gu(e)),yu),this.lastRemoteSnapshotVersion=Ua.min(),this.highestTargetId=0,this.Ns=0,this.ks=new $h,this.targetCount=0,this.Ms=Uh.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),Xa.resolve()}getLastRemoteSnapshotVersion(e){return Xa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xa.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Xa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Xa.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Uh(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Xa.resolve()}updateTargetData(e,t){return this.Fn(t),Xa.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Xa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Xa.waitFor(i).next((()=>r))}getTargetCount(e){return Xa.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Xa.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Xa.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Xa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Xa.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Xa.resolve(n)}containsKey(e,t){return Xa.resolve(this.ks.containsKey(t))}}class Jh{constructor(e,t){this.$s={},this.overlays={},this.Os=new el(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Qh(this),this.indexManager=new Mh,this.remoteDocumentCache=function(e){return new Kh(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new Rh(t),this.qs=new Vh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Hh(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){ma("MemoryPersistence","Starting transaction:",e);const r=new Yh(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return Xa.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class Yh extends Ja{constructor(e){super(),this.currentSequenceNumber=e}}class Xh{constructor(e){this.persistence=e,this.Qs=new $h,this.js=null}static zs(e){return new Xh(e)}get Ws(){if(this.js)return this.js;throw ba()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Xa.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Xa.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Xa.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xa.forEach(this.Ws,(n=>{const r=qa.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,Ua.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return Xa.or([()=>Xa.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Zh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Gu(),r=Gu();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Zh(e,t.fromCache,n,r)}}class ed{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(xu(t))return Xa.resolve(null);let n=Tu(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Iu(t,null,"F"),n=Tu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Gu(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,Iu(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,r){return xu(t)||r.isEqual(Ua.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(pa()<=kt.DEBUG&&ma("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ru(t)),this.Wi(e,s,t,Wa(r,-1)))}))}ji(e,t){let n=new fl(Mu(e));return t.forEach(((t,r)=>{Pu(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return pa()<=kt.DEBUG&&ma("QueryEngine","Using full collection scan to execute query:",Ru(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ka.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class td{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new cl(Ma),this.Yi=new Lu((e=>gu(e)),yu),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bh(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function nd(e,t,n,r){return new td(e,t,n,r)}async function rd(e,t){const n=_a(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Gu();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({er:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function id(e){const t=_a(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function sd(e,t,n){let r=Gu(),i=Gu();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Fu();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Ua.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):ma("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:r,sr:i}}))}function od(e,t){const n=_a(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function ad(e,t){const n=_a(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,Xa.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new Ah(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function ld(e,t,n){const r=_a(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Za(e))throw e;ma("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function ud(e,t,n){const r=_a(e);let i=Ua.min(),s=Gu();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=_a(e),i=r.Yi.get(n);return void 0!==i?Xa.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,Tu(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Ua.min(),n?s:Gu()))).next((e=>(cd(r,Du(t),e),{documents:e,ir:s})))))}function cd(e,t,n){let r=e.Xi.get(t)||Ua.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}class hd{constructor(){this.activeTargetIds=Ju()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dd{constructor(){this.Hr=new hd,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new hd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fd{Yr(e){}shutdown(){}}class pd{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ma("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ma("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let md=null;function gd(){return null===md?md=268435456+Math.round(2147483648*Math.random()):md++,"0x"+md.toString(16)}const yd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vd{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const bd="WebChannelConnection";class wd extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=gd(),o=this.To(e,t);ma("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then((t=>(ma("RestConnection",`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw ya("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+da,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=yd[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=gd();return new Promise(((s,o)=>{const a=new aa;a.setWithCredentials(!0),a.listenOnce(na.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ta.NO_ERROR:const t=a.getResponseJson();ma(bd,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case ta.TIMEOUT:ma(bd,`RPC '${e}' ${i} timed out`),o(new Sa(xa.DEADLINE_EXCEEDED,"Request time out"));break;case ta.HTTP_ERROR:const n=a.getStatus();if(ma(bd,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(xa).indexOf(t)>=0?t:xa.UNKNOWN}(t.status);o(new Sa(e,t.message))}else o(new Sa(xa.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Sa(xa.UNAVAILABLE,"Connection failed."));break;default:ba()}}finally{ma(bd,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);ma(bd,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=gd(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Zo(),o=ea(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new sa({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");ma(bd,`Creating RPC '${e}' stream ${r}: ${u}`,a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new vd({ro:t=>{d?ma(bd,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(ma(bd,`Opening RPC '${e}' stream ${r} transport.`),c.open(),h=!0),ma(bd,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},oo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,oa.EventType.OPEN,(()=>{d||ma(bd,`RPC '${e}' stream ${r} transport opened.`)})),p(c,oa.EventType.CLOSE,(()=>{d||(d=!0,ma(bd,`RPC '${e}' stream ${r} transport closed`),f.wo())})),p(c,oa.EventType.ERROR,(t=>{d||(d=!0,ya(bd,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new Sa(xa.UNAVAILABLE,"The operation could not be completed")))})),p(c,oa.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];wa(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){ma(bd,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Pc[e];if(void 0!==t)return Oc(t)}(t),i=o.message;void 0===n&&(n=xa.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new Sa(n,i)),c.close()}else ma(bd,`RPC '${e}' stream ${r} received:`,i),f._o(i)}})),p(o,ra.STAT_EVENT,(t=>{t.stat===ia.PROXY?ma(bd,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ia.NOPROXY&&ma(bd,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.fo()}),0),f}}function _d(){return"undefined"!=typeof document?document:null}function xd(e){return new rh(e,!0)}class Sd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&ma("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class kd{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Sd(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===xa.RESOURCE_EXHAUSTED?(ga(t.toString()),ga("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===xa.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new Sa(xa.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return ma("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(ma("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Cd extends kd{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ba()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(wa(void 0===t||"string"==typeof t),yl.fromBase64String(t||"")):(wa(void 0===t||t instanceof Uint8Array),yl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?xa.UNKNOWN:Oc(e.code);return new Sa(t,e.message||"")}(o);n=new Qc(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=dh(e,r.document.name),s=lh(r.document.updateTime),o=r.document.createTime?lh(r.document.createTime):Ua.min(),a=new ql({mapValue:{fields:r.document.fields}}),l=Wl.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Kc(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=dh(e,r.document),s=r.readTime?lh(r.readTime):Ua.min(),o=Wl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Kc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=dh(e,r.document),s=r.removedTargetIds||[];n=new Kc([],s,i,null)}else{if(!("filter"in t))return ba();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Rc(r,i),o=e.targetId;n=new Gc(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ua.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ua.min():t.readTime?lh(t.readTime):Ua.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=mh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=vu(r)?{documents:bh(e,r)}:{query:wh(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=oh(e,t.resumeToken);const r=ih(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ua.min())>0){n.readTime=sh(e,t.snapshotVersion.toTimestamp());const r=ih(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ba()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=mh(this.serializer),t.removeTarget=e,this.Wo(t)}}class Ed extends kd{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wa(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(wa(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?lh(e.updateTime):lh(t);return n.isEqual(Ua.min())&&(n=lh(t)),new fc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=lh(e.commitTime);return this.listener.cu(n,t)}return wa(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=mh(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>vh(this.serializer,e)))};this.Wo(t)}}class Td extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Sa(xa.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===xa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Sa(xa.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===xa.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Sa(xa.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class Nd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ga(t),this.mu=!1):ma("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class Id{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{Ud(this)&&(ma("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=_a(e);t.vu.add(4),await Ad(t),t.bu.set("Unknown"),t.vu.delete(4),await jd(t)}(this))}))})),this.bu=new Nd(n,r)}}async function jd(e){if(Ud(e))for(const t of e.Ru)await t(!0)}async function Ad(e){for(const t of e.Ru)await t(!1)}function Rd(e,t){const n=_a(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Ld(n)?Od(n):nf(n).Ko()&&Dd(n,t))}function Pd(e,t){const n=_a(e),r=nf(n);n.Au.delete(t),r.Ko()&&Md(n,t),0===n.Au.size&&(r.Ko()?r.jo():Ud(n)&&n.bu.set("Unknown"))}function Dd(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ua.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}nf(e).su(t)}function Md(e,t){e.Vu.qt(t),nf(e).iu(t)}function Od(e){e.Vu=new Yc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),nf(e).start(),e.bu.gu()}function Ld(e){return Ud(e)&&!nf(e).Uo()&&e.Au.size>0}function Ud(e){return 0===_a(e).vu.size}function Fd(e){e.Vu=void 0}async function zd(e){e.Au.forEach(((t,n)=>{Dd(e,t)}))}async function Bd(e,t){Fd(e),Ld(e)?(e.bu.Iu(t),Od(e)):e.bu.set("Unknown")}async function Vd(e,t,n){if(e.bu.set("Online"),t instanceof Qc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){ma("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await qd(e,n)}else if(t instanceof Kc?e.Vu.Ht(t):t instanceof Gc?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Ua.min()))try{const t=await id(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(yl.EMPTY_BYTE_STRING,r.snapshotVersion)),Md(e,t);const i=new Ah(r.target,t,n,r.sequenceNumber);Dd(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ma("RemoteStore","Failed to raise snapshot:",t),await qd(e,t)}}async function qd(e,t,n){if(!Za(t))throw t;e.vu.add(1),await Ad(e),e.bu.set("Offline"),n||(n=()=>id(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ma("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await jd(e)}))}function $d(e,t){return t().catch((n=>qd(e,n,t)))}async function Wd(e){const t=_a(e),n=rf(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Hd(t);)try{const e=await od(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Kd(t,e)}catch(e){await qd(t,e)}Gd(t)&&Qd(t)}function Hd(e){return Ud(e)&&e.Eu.length<10}function Kd(e,t){e.Eu.push(t);const n=rf(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Gd(e){return Ud(e)&&!rf(e).Uo()&&e.Eu.length>0}function Qd(e){rf(e).start()}async function Jd(e){rf(e).hu()}async function Yd(e){const t=rf(e);for(const n of e.Eu)t.uu(n.mutations)}async function Xd(e,t,n){const r=e.Eu.shift(),i=jc.from(r,t,n);await $d(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Wd(e)}async function Zd(e,t){t&&rf(e).ou&&await async function(e,t){if(Mc(n=t.code)&&n!==xa.ABORTED){const n=e.Eu.shift();rf(e).Qo(),await $d(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Wd(e)}var n}(e,t),Gd(e)&&Qd(e)}async function ef(e,t){const n=_a(e);n.asyncQueue.verifyOperationInProgress(),ma("RemoteStore","RemoteStore received new credentials");const r=Ud(n);n.vu.add(3),await Ad(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await jd(n)}async function tf(e,t){const n=_a(e);t?(n.vu.delete(2),await jd(n)):t||(n.vu.add(2),await Ad(n),n.bu.set("Unknown"))}function nf(e){return e.Su||(e.Su=function(e,t,n){const r=_a(e);return r.fu(),new Cd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:zd.bind(null,e),ao:Bd.bind(null,e),nu:Vd.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),Ld(e)?Od(e):e.bu.set("Unknown")):(await e.Su.stop(),Fd(e))}))),e.Su}function rf(e){return e.Du||(e.Du=function(e,t,n){const r=_a(e);return r.fu(),new Ed(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Jd.bind(null,e),ao:Zd.bind(null,e),au:Yd.bind(null,e),cu:Xd.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await Wd(e)):(await e.Du.stop(),e.Eu.length>0&&(ma("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))}))),e.Du}class sf{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ka,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new sf(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Sa(xa.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function of(e,t){if(ga("AsyncQueue",`${t}: ${e}`),Za(e))return new Sa(xa.UNAVAILABLE,`${t}: ${e}`);throw e}class af{constructor(e){this.comparator=e?(t,n)=>e(t,n)||qa.comparator(t.key,n.key):(e,t)=>qa.comparator(e.key,t.key),this.keyedMap=Bu(),this.sortedSet=new cl(this.comparator)}static emptySet(e){return new af(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof af))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new af;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class lf{constructor(){this.Cu=new cl(qa.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ba():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class uf{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new uf(e,t,af.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class cf{constructor(){this.Nu=void 0,this.listeners=[]}}class hf{constructor(){this.queries=new Lu((e=>Au(e)),ju),this.onlineState="Unknown",this.ku=new Set}}async function df(e,t){const n=_a(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new cf),i)try{s.Nu=await n.onListen(r)}catch(e){const n=of(e,`Initialization of query '${Ru(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&gf(n)}async function ff(e,t){const n=_a(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function pf(e,t){const n=_a(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&gf(n)}function mf(e,t,n){const r=_a(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function gf(e){e.ku.forEach((e=>{e.next()}))}class yf{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new uf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=uf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class vf{constructor(e){this.key=e}}class bf{constructor(e){this.key=e}}class wf{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Gu(),this.mutatedKeys=Gu(),this.tc=Mu(e),this.ec=new af(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new lf,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Pu(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.rc(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.tc(c,a)>0||l&&this.tc(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ba()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new uf(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new lf,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Gu(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new bf(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new vf(n))})),t}hc(e){this.Yu=e.ir,this.Zu=Gu();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return uf.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class _f{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class xf{constructor(e){this.key=e,this.fc=!1}}class Sf{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new Lu((e=>Au(e)),ju),this._c=new Map,this.mc=new Set,this.gc=new cl(qa.comparator),this.yc=new Map,this.Ic=new $h,this.Tc={},this.Ec=new Map,this.Ac=Uh.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function kf(e,t){const n=Vf(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await ad(n.localStore,Tu(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Cf(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Rd(n.remoteStore,e)}return i}async function Cf(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await ud(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return Of(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await ud(e.localStore,t,!0),o=new wf(t,s.ir),a=o.sc(s.documents),l=Hc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Of(e,n,u.cc);const c=new _f(t,n,o);return e.wc.set(t,c),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}async function Ef(e,t){const n=_a(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!ju(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ld(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Pd(n.remoteStore,r.targetId),Df(n,r.targetId)})).catch(Ya)):(Df(n,r.targetId),await ld(n.localStore,r.targetId,!0))}async function Tf(e,t){const n=_a(e);try{const e=await function(e,t){const n=_a(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(yl.EMPTY_BYTE_STRING,Ua.min()).withLastLimboFreeSnapshotVersion(Ua.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Bs.updateTargetData(e,u))}));let a=Fu(),l=Gu();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(sd(e,s,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual(Ua.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Xa.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(wa(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?wa(r.fc):e.removedDocuments.size>0&&(wa(r.fc),r.fc=!1))})),await Ff(n,e,t)}catch(e){await Ya(e)}}function Nf(e,t,n){const r=_a(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=_a(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&gf(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function If(e,t,n){const r=_a(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new cl(qa.comparator);e=e.insert(s,Wl.newNoDocument(s,Ua.min()));const n=Gu().add(s),i=new Wc(Ua.min(),new Map,new cl(Ma),e,n);await Tf(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),Uf(r)}else await ld(r.localStore,t,!1).then((()=>Df(r,t,n))).catch(Ya)}async function jf(e,t){const n=_a(e),r=t.batch.batchId;try{const e=await function(e,t){const n=_a(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Xa.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);wa(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Gu();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Pf(n,r,null),Rf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ff(n,e)}catch(e){await Ya(e)}}async function Af(e,t,n){const r=_a(e);try{const e=await function(e,t){const n=_a(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(wa(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Pf(r,t,n),Rf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ff(r,e)}catch(n){await Ya(n)}}function Rf(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function Pf(e,t,n){const r=_a(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function Df(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||Mf(e,t)}))}function Mf(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Pd(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Uf(e))}function Of(e,t,n){for(const r of n)r instanceof vf?(e.Ic.addReference(r.key,t),Lf(e,r)):r instanceof bf?(ma("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||Mf(e,r.key)):ba()}function Lf(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(ma("SyncEngine","New document in limbo: "+n),e.mc.add(r),Uf(e))}function Uf(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new qa(za.fromString(t)),r=e.Ac.next();e.yc.set(r,new xf(n)),e.gc=e.gc.insert(n,r),Rd(e.remoteStore,new Ah(Tu(_u(n.path)),r,"TargetPurposeLimboResolution",el.ct))}}async function Ff(e,t,n){const r=_a(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{o.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Zh.Li(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=_a(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Xa.forEach(t,(t=>Xa.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Xa.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Za(e))throw e;ma("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function zf(e,t){const n=_a(e);if(!n.currentUser.isEqual(t)){ma("SyncEngine","User change. New user:",t.toKey());const e=await rd(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new Sa(xa.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ff(n,e.er)}}function Bf(e,t){const n=_a(e),r=n.yc.get(t);if(r&&r.fc)return Gu().add(r.key);{let e=Gu();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function Vf(e){const t=_a(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Tf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=If.bind(null,t),t.dc.nu=pf.bind(null,t.eventManager),t.dc.Pc=mf.bind(null,t.eventManager),t}function qf(e){const t=_a(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=jf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Af.bind(null,t),t}class $f{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=xd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return nd(this.persistence,new ed,e.initialUser,this.serializer)}createPersistence(e){return new Jh(Xh.zs,this.serializer)}createSharedClientState(e){return new dd}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Wf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Nf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=zf.bind(null,this.syncEngine),await tf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new hf}createDatastore(e){const t=xd(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new wd(r));var r;return function(e,t,n,r){return new Td(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Nf(this.syncEngine,e,0),s=pd.D()?new pd:new fd,new Id(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Sf(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=_a(e);ma("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await Ad(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class Hf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ga("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Kf{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ha.UNAUTHENTICATED,this.clientId=Da.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{ma("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ma("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Sa(xa.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ka;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(PP){const n=of(PP,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Gf(e,t){e.asyncQueue.verifyOperationInProgress(),ma("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await rd(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Qf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Yf(e);ma("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>ef(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ef(t.remoteStore,n))),e._onlineComponents=t}function Jf(e){return"FirebaseError"===e.name?e.code===xa.FAILED_PRECONDITION||e.code===xa.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Yf(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ma("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gf(e,e._uninitializedComponentsProvider._offline)}catch(PP){const n=PP;if(!Jf(n))throw n;ya("Error using user provided cache. Falling back to memory cache: "+n),await Gf(e,new $f)}}else ma("FirestoreClient","Using default OfflineComponentProvider"),await Gf(e,new $f);return e._offlineComponents}async function Xf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ma("FirestoreClient","Using user provided OnlineComponentProvider"),await Qf(e,e._uninitializedComponentsProvider._online)):(ma("FirestoreClient","Using default OnlineComponentProvider"),await Qf(e,new Wf))),e._onlineComponents}function Zf(e){return Xf(e).then((e=>e.syncEngine))}async function ep(e){const t=await Xf(e),n=t.eventManager;return n.onListen=kf.bind(null,t.syncEngine),n.onUnlisten=Ef.bind(null,t.syncEngine),n}function tp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ka;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Hf({next:n=>{t.enqueueAndForget((()=>ff(e,o))),n.fromCache&&"server"===r.source?i.reject(new Sa(xa.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new yf(n,s,{includeMetadataChanges:!0,Ku:!0});return df(e,o)}(await ep(e),e.asyncQueue,t,n,r))),r.promise}function np(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const rp=new Map;function ip(e,t,n){if(!n)throw new Sa(xa.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function sp(e){if(!qa.isDocumentKey(e))throw new Sa(xa.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function op(e){if(qa.isDocumentKey(e))throw new Sa(xa.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ap(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":ba()}function lp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Sa(xa.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ap(e);throw new Sa(xa.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class up{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Sa(xa.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Sa(xa.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Sa(xa.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=np(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Sa(xa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Sa(xa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Sa(xa.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class cp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new up({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Sa(xa.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Sa(xa.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new up(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ea;switch(e.type){case"firstParty":return new ja(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Sa(xa.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=rp.get(e);t&&(ma("ComponentProvider","Removing Datastore"),rp.delete(e),t.terminate())}(this),Promise.resolve()}}function hp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=lp(e,cp))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ha.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ve(JSON.stringify({alg:"none",type:"JWT"})),Ve(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Sa(xa.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ha(s)}e._authCredentials=new Ta(new Ca(t,n))}}class dp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dp(this.firestore,e,this._key)}}class fp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new fp(this.firestore,e,this._query)}}class pp extends fp{constructor(e,t,n){super(e,t,_u(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dp(this.firestore,null,new qa(e))}withConverter(e){return new pp(this.firestore,e,this._path)}}function mp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=vt(e),ip("collection","path",t),e instanceof cp){const n=za.fromString(t,...r);return op(n),new pp(e,null,n)}{if(!(e instanceof dp||e instanceof pp))throw new Sa(xa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(za.fromString(t,...r));return op(n),new pp(e.firestore,null,n)}}function gp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=vt(e),1===arguments.length&&(t=Da.A()),ip("doc","path",t),e instanceof cp){const n=za.fromString(t,...r);return sp(n),new dp(e,null,new qa(n))}{if(!(e instanceof dp||e instanceof pp))throw new Sa(xa.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(za.fromString(t,...r));return sp(n),new dp(e.firestore,e instanceof pp?e.converter:null,new qa(n))}}class yp{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Sd(this,"async_queue_retry"),this.Xc=()=>{const e=_d();e&&ma("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=_d();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=_d();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new ka;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Za(e))throw e;ma("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ga("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=sf.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&ba()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function vp(e){return function(e){if("object"!=typeof e||null===e)return!1;const t=e;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(e)}class bp extends cp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new yp,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_p(this),this._firestoreClient.terminate()}}function wp(e){return e._firestoreClient||_p(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function _p(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Cl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,np(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Kf(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}class xp{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xp(yl.fromBase64String(e))}catch(e){throw new Sa(xa.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new xp(yl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Sp{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Sa(xa.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Va(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kp{constructor(e){this._methodName=e}}class Cp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Sa(xa.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Sa(xa.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ma(this._lat,e._lat)||Ma(this._long,e._long)}}const Ep=/^__.*__$/;class Tp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Sc(e,this.data,this.fieldMask,t,this.fieldTransforms):new xc(e,this.data,t,this.fieldTransforms)}}class Np{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Sc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ip(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ba()}}class jp{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new jp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Hp(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Ip(this.ca)&&Ep.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Ap{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||xd(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new jp({ca:e,methodName:t,ga:n,path:Va.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rp(e){const t=e._freezeSettings(),n=xd(e._databaseId);return new Ap(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Pp(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);Vp("Data must be an object, but it was:",o,r);const a=zp(r,o);let l,u;if(s.merge)l=new ml(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=qp(t,r,n);if(!o.contains(i))throw new Sa(xa.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Kp(e,i)||e.push(i)}l=new ml(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new Tp(new ql(a),l,u)}class Dp extends kp{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dp}}class Mp extends kp{_toFieldTransform(e){return new dc(e.path,new ic)}isEqual(e){return e instanceof Mp}}function Op(e,t,n,r){const i=e.ya(1,t,n);Vp("Data must be an object, but it was:",i,r);const s=[],o=ql.empty();ll(r,((e,r)=>{const a=Wp(t,e,n);r=vt(r);const l=i.da(a);if(r instanceof Dp)s.push(a);else{const e=Fp(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new ml(s);return new Np(o,a,i.fieldTransforms)}function Lp(e,t,n,r,i,s){const o=e.ya(1,t,n),a=[qp(t,r,n)],l=[i];if(s.length%2!=0)throw new Sa(xa.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(qp(t,s[d])),l.push(s[d+1]);const u=[],c=ql.empty();for(let d=a.length-1;d>=0;--d)if(!Kp(u,a[d])){const e=a[d];let t=l[d];t=vt(t);const n=o.da(e);if(t instanceof Dp)u.push(e);else{const r=Fp(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new ml(u);return new Np(c,h,o.fieldTransforms)}function Up(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Fp(n,e.ya(r?4:3,t))}function Fp(e,t){if(Bp(e=vt(e)))return Vp("Unsupported field value:",t,e),zp(e,t);if(e instanceof kp)return function(e,t){if(!Ip(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Fp(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=vt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Zu(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=La.fromDate(e);return{timestampValue:sh(t.serializer,n)}}if(e instanceof La){const n=new La(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sh(t.serializer,n)}}if(e instanceof Cp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xp)return{bytesValue:oh(t.serializer,e._byteString)};if(e instanceof dp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:uh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${ap(e)}`)}(e,t)}function zp(e,t){const n={};return ul(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ll(e,((e,r)=>{const i=Fp(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Bp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof La||e instanceof Cp||e instanceof xp||e instanceof dp||e instanceof kp)}function Vp(e,t,n){if(!Bp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=ap(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function qp(e,t,n){if((t=vt(t))instanceof Sp)return t._internalPath;if("string"==typeof t)return Wp(e,t);throw Hp("Field path arguments must be of type string or ",e,!1,void 0,n)}const $p=new RegExp("[~\\*/\\[\\]]");function Wp(e,t,n){if(t.search($p)>=0)throw Hp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Sp(...t.split("."))._internalPath}catch(r){throw Hp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Hp(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Sa(xa.INVALID_ARGUMENT,a+e+l)}function Kp(e,t){return e.some((e=>e.isEqual(t)))}class Gp{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new dp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Jp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Qp extends Gp{data(){return super.data()}}function Jp(e,t){return"string"==typeof t?Wp(e,t):t instanceof Sp?t._internalPath:t._delegate._internalPath}function Yp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Sa(xa.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xp{}class Zp extends Xp{}function em(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Xp&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof rm)).length,n=e.filter((e=>e instanceof tm)).length;if(t>1||t>0&&n>0)throw new Sa(xa.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class tm extends Zp{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new tm(e,t,n)}_apply(e){const t=this._parse(e);return lm(e._query,t),new fp(e.firestore,e.converter,Nu(e._query,t))}_parse(e){const t=Rp(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Sa(xa.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){am(o,s);const t=[];for(const n of o)t.push(om(r,e,n));a={arrayValue:{values:t}}}else a=om(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||am(o,s),a=Up(n,"where",o,"in"===s||"not-in"===s);return Xl.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function nm(e,t,n){const r=t,i=Jp("where",e);return tm._create(i,r,n)}class rm extends Xp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rm(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Zl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)lm(n,i),n=Nu(n,i)}(e._query,t),new fp(e.firestore,e.converter,Nu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class im extends Zp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new im(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Sa(xa.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Sa(xa.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Ql(t,n);return function(e,t){if(null===Su(e)){const n=ku(e);null!==n&&um(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new fp(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new bu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function sm(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Jp("orderBy",e);return im._create(n,t)}function om(e,t,n){if("string"==typeof(n=vt(n))){if(""===n)throw new Sa(xa.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cu(t)&&-1!==n.indexOf("/"))throw new Sa(xa.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(za.fromString(n));if(!qa.isDocumentKey(r))throw new Sa(xa.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ml(e,new qa(r))}if(n instanceof dp)return Ml(e,n._key);throw new Sa(xa.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ap(n)}.`)}function am(e,t){if(!Array.isArray(e)||0===e.length)throw new Sa(xa.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function lm(e,t){if(t.isInequality()){const n=ku(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Sa(xa.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=Su(e);null!==i&&um(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Sa(xa.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Sa(xa.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function um(e,t,n){if(!n.isEqual(t))throw new Sa(xa.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class cm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_l(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ba()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ll(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Cp(wl(e.latitude),wl(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Sl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(kl(e));default:return null}}convertTimestamp(e){const t=bl(e);return new La(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=za.fromString(e);wa(jh(n));const r=new El(n.get(1),n.get(3)),i=new qa(n.popFirst(5));return r.isEqual(t)||ga(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function hm(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class dm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fm extends Gp{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new pm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Jp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class pm extends fm{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class mm{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new dm(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new pm(this._firestore,this._userDataWriter,n.key,n,new dm(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Sa(xa.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new pm(e._firestore,e._userDataWriter,n.doc.key,n.doc,new dm(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new pm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new dm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:gm(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function gm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ba()}}class ym extends cm{constructor(e){super(),this.firestore=e}convertBytes(e){return new xp(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dp(this.firestore,null,t)}}function vm(e){e=lp(e,fp);const t=lp(e.firestore,bp),n=wp(t),r=new ym(t);return Yp(e._query),tp(n,e._query).then((n=>new mm(t,r,e,n)))}function bm(e,t,n){e=lp(e,dp);const r=lp(e.firestore,bp),i=Rp(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=vt(t))||t instanceof Sp?Lp(i,"updateDoc",e._key,t,n,a):Op(i,"updateDoc",e._key,t),xm(r,[s.toMutation(e._key,pc.exists(!0))])}function wm(e,t){const n=lp(e.firestore,bp),r=gp(e),i=hm(e.converter,t);return xm(n,[Pp(Rp(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,pc.exists(!1))]).then((()=>r))}function _m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=vt(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||vp(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges};if(vp(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof dp)h=lp(e.firestore,bp),d=_u(e._key.path),c={next:t=>{n[l]&&n[l](Sm(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=lp(e,fp);h=lp(t.firestore,bp),d=t._query;const r=new ym(h);c={next:e=>{n[l]&&n[l](new mm(h,r,t,e))},error:n[l+1],complete:n[l+2]},Yp(e._query)}return function(e,t,n,r){const i=new Hf(r),s=new yf(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>df(await ep(e),s))),()=>{i.Dc(),e.asyncQueue.enqueueAndForget((async()=>ff(await ep(e),s)))}}(wp(h),d,u,c)}function xm(e,t){return function(e,t){const n=new ka;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=qf(e);try{const e=await function(e,t){const n=_a(e),r=La.now(),i=t.reduce(((e,t)=>e.add(t.key)),Gu());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Fu(),l=Gu();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=wc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Sc(e.key,t,$l(t.value.mapValue),pc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Vu(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new cl(Ma)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ff(r,e.changes),await Wd(r.remoteStore)}catch(e){const t=of(e,"Failed to persist write");n.reject(t)}}(await Zf(e),t,n))),n.promise}(wp(e),t)}function Sm(e,t,n){const r=n.docs.get(t._key),i=new ym(e);return new fm(e,i,t._key,r,new dm(n.hasPendingWrites,n.fromCache),t.converter)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){da=e}(jn),En(new bt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new bp(new Na(e.getProvider("auth-internal")),new Ra(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Sa(xa.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new El(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Pn(ca,"3.13.0",e),Pn(ca,"3.13.0","esm2017")}();Pn("firebase","9.23.0","app");const km="@firebase/database",Cm="0.14.4";let Em="";class Tm{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ot(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:st(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Nm{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return lt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Im=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Tm(t)}}catch(PP){}return new Nm},jm=Im("localStorage"),Am=Im("sessionStorage"),Rm=new It("@firebase/database"),Pm=function(){let e=1;return function(){return e++}}(),Dm=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Oe(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new pt;n.update(t);const r=n.digest();return Fe.encodeByteArray(r)},Mm=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=Mm.apply(null,n):e+="object"===typeof n?ot(n):n,e+=" "}return e};let Om=null,Lm=!0;const Um=function(e,t){Oe(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Rm.logLevel=kt.VERBOSE,Om=Rm.log.bind(Rm),t&&Am.set("logging_enabled",!0)):"function"===typeof e?Om=e:(Om=null,Am.remove("logging_enabled"))},Fm=function(){if(!0===Lm&&(Lm=!1,null===Om&&!0===Am.get("logging_enabled")&&Um(!0)),Om){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Mm.apply(null,t);Om(r)}},zm=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Fm(e,...n)}},Bm=function(){const e="FIREBASE INTERNAL ERROR: "+Mm(...arguments);Rm.error(e)},Vm=function(){const e=`FIREBASE FATAL ERROR: ${Mm(...arguments)}`;throw Rm.error(e),new Error(e)},qm=function(){const e="FIREBASE WARNING: "+Mm(...arguments);Rm.warn(e)},$m=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Wm="[MIN_NAME]",Hm="[MAX_NAME]",Km=function(e,t){if(e===t)return 0;if(e===Wm||t===Hm)return-1;if(t===Wm||e===Hm)return 1;{const n=tg(e),r=tg(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Gm=function(e,t){return e===t?0:e<t?-1:1},Qm=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ot(t))},Jm=function(e){if("object"!==typeof e||null===e)return ot(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=ot(t[r]),n+=":",n+=Jm(e[t[r]]);return n+="}",n},Ym=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Xm(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Zm=function(e){Oe(!$m(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let u="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()};const eg=new RegExp("^-?(0*)\\d{1,10}$"),tg=function(e){if(eg.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ng=function(e){try{e()}catch(PP){setTimeout((()=>{const t=PP.stack||"";throw qm("Exception was thrown by user callback.",t),PP}),Math.floor(0))}},rg=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class ig{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){qm(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class sg{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Fm("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qm(e)}}class og{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}og.OWNER="owner";const ag="5",lg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ug="ac",cg="websocket",hg="long_polling";class dg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function fg(e,t,n){let r;if(Oe("string"===typeof t,"typeof type must == string"),Oe("object"===typeof n,"typeof params must == object"),t===cg)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==hg)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Xm(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class pg{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;lt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return $e(this.counters_)}}const mg={},gg={};function yg(e){const t=e.toString();return mg[t]||(mg[t]=new pg),mg[t]}class vg{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&ng((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const bg="start";class wg{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zm(e),this.stats_=yg(t),this.urlFn=e=>(this.appCheckToken&&(e[ug]=this.appCheckToken),fg(t,hg,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new vg(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ze()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new _g((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===bg)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[bg]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=ag,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[ug]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&lg.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wg.forceAllow_=!0}static forceDisallow(){wg.forceDisallow_=!0}static isAvailable(){return!Ze()&&(!!wg.forceAllow_||!wg.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ot(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Be(t),r=Ym(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Ze())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ot(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class _g{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ze())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Pm(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=_g.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(PP){Fm("frame writing exception"),PP.stack&&Fm(PP.stack),Fm(PP)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Fm("No IE domain setting required")}catch(PP){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Ze()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Fm("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(PP){}}),Math.floor(1))}}let xg=null;"undefined"!==typeof MozWebSocket?xg=MozWebSocket:"undefined"!==typeof WebSocket&&(xg=WebSocket);class Sg{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zm(this.connId),this.stats_=yg(t),this.connURL=Sg.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=ag,!Ze()&&"undefined"!==typeof location&&location.hostname&&lg.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[ug]=r),i&&(s.p=i),fg(e,cg,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jm.set("previous_websocket_failure",!0);try{let e;if(Ze()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${ag}/${Em}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/incommon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new xg(this.connURL,[],e)}catch(PP){this.log_("Error instantiating WebSocket.");const t=PP.message||PP.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Sg.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==xg&&!Sg.forceDisallow_}static previouslyFailed(){return jm.isInMemoryStorage||!0===jm.get("previous_websocket_failure")}markConnectionHealthy(){jm.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=st(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Oe(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=ot(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ym(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(PP){this.log_("Exception thrown from WebSocket.send():",PP.message||PP.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Sg.responsesRequiredToBeHealthy=2,Sg.healthyTimeout=3e4;class kg{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[wg,Sg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Sg&&Sg.isAvailable();let n=t&&!Sg.previouslyFailed();if(e.webSocketOnly&&(t||qm("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Sg];else{const e=this.transports_=[];for(const t of kg.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);kg.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}kg.globalTransportInitialized_=!1;class Cg{constructor(e,t,n,r,i,s,o,a,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zm("c:"+this.id+":"),this.transportManager_=new kg(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=rg((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Qm("t",e),n=Qm("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Qm("t",e),n=Qm("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Qm("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Bm("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Bm("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ag!==n&&qm("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),rg((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rg((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Eg{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Tg{constructor(e){this.allowedEvents_=e,this.listeners_={},Oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Oe(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class Ng extends Tg{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Xe()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new Ng}getInitialEvent(e){return Oe("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ig{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function jg(){return new Ig("")}function Ag(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Rg(e){return e.pieces_.length-e.pieceNum_}function Pg(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Ig(e.pieces_,t)}function Dg(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Mg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Og(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Ig(t,0)}function Lg(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Ig)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Ig(n,0)}function Ug(e){return e.pieceNum_>=e.pieces_.length}function Fg(e,t){const n=Ag(e),r=Ag(t);if(null===n)return t;if(n===r)return Fg(Pg(e),Pg(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function zg(e,t){if(Rg(e)!==Rg(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Bg(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Rg(e)>Rg(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Vg{constructor(e,t){this.errorPrefix_=t,this.parts_=Mg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=gt(this.parts_[n]);qg(this)}}function qg(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$g(e))}function $g(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Wg extends Tg{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Wg}getInitialEvent(e){return Oe("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Hg=1e3;class Kg extends Eg{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=Kg.nextPersistentConnectionId_++,this.log_=zm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hg,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Ze())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Wg.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Ng.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ot(i)),Oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Je,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Oe(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;Kg.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&lt(e,"w")){const n=ut(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();qm(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=at(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=at(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ot(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Bm("Unrecognized action received from server: "+ot(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Hg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Hg),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Kg.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Oe(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?Fm("getToken() completed but was canceled"):(Fm("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Cg(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{qm(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Bm){this.log_("Failed to get token: "+Bm),s||(this.repoInfo_.nodeAdmin&&qm(Bm),a())}}}interrupt(e){Fm("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Fm("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ct(this.interruptReasons_)&&(this.reconnectDelay_=Hg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Jm(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new Ig(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Fm("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Fm("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Ze()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Em.replace(/\./g,"-")]=1,Xe()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ng.getInstance().currentlyOnline();return ct(this.interruptReasons_)&&e}}Kg.nextPersistentConnectionId_=0,Kg.nextConnectionId_=0;class Gg{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Gg(e,t)}}class Qg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Gg(Wm,e),r=new Gg(Wm,t);return 0!==this.compare(n,r)}minPost(){return Gg.MIN}}let Jg;class Yg extends Qg{static get __EMPTY_NODE(){return Jg}static set __EMPTY_NODE(e){Jg=e}compare(e,t){return Km(e.name,t.name)}isDefinedOn(e){throw Le("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Gg.MIN}maxPost(){return new Gg(Hm,Jg)}makePost(e,t){return Oe("string"===typeof e,"KeyIndex indexValue must always be a string."),new Gg(e,Jg)}toString(){return".key"}}const Xg=new Yg;class Zg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ey{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ey.RED,this.left=null!=r?r:ty.EMPTY_NODE,this.right=null!=i?i:ty.EMPTY_NODE}copy(e,t,n,r,i){return new ey(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ty.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return ty.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ey.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ey.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ey.RED=!0,ey.BLACK=!1;class ty{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ty.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new ty(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ey.BLACK,null,null))}remove(e){return new ty(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ey.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Zg(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Zg(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Zg(this.root_,null,this.comparator_,!0,e)}}function ny(e,t){return Km(e.name,t.name)}function ry(e,t){return Km(e,t)}let iy;ty.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new ey(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const sy=function(e){return"number"===typeof e?"number:"+Zm(e):"string:"+e},oy=function(e){if(e.isLeafNode()){const t=e.val();Oe("string"===typeof t||"number"===typeof t||"object"===typeof t&&lt(t,".sv"),"Priority must be a string or number.")}else Oe(e===iy||e.isEmpty(),"priority of unexpected type.");Oe(e===iy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ay,ly,uy;class cy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cy.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Oe(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),oy(this.priorityNode_)}static set __childrenNodeConstructor(e){ay=e}static get __childrenNodeConstructor(){return ay}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new cy(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:cy.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ug(e)?this:".priority"===Ag(e)?this.priorityNode_:cy.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:cy.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=Ag(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Oe(".priority"!==n||1===Rg(e),".priority must be the last token in a path"),this.updateImmediateChild(n,cy.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pg(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+sy(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Zm(this.value_):this.value_,this.lazyHash_=Dm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===cy.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof cy.__childrenNodeConstructor?-1:(Oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=cy.VALUE_TYPE_ORDER.indexOf(t),i=cy.VALUE_TYPE_ORDER.indexOf(n);return Oe(r>=0,"Unknown leaf type: "+t),Oe(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}cy.VALUE_TYPE_ORDER=["object","boolean","number","string"];const hy=new class extends Qg{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Km(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Gg.MIN}maxPost(){return new Gg(Hm,new cy("[PRIORITY-POST]",uy))}makePost(e,t){const n=ly(e);return new Gg(t,new cy("[PRIORITY-POST]",n))}toString(){return".priority"}},dy=Math.log(2);class fy{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/dy,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const py=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new ey(a,o.node,ey.BLACK,null,null);{const l=parseInt(s/2,10)+t,u=i(t,l),c=i(l+1,r);return o=e[l],a=n?n(o):o,new ey(a,o.node,ey.BLACK,u,c)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const u=i(s+1,a),c=e[s],h=n?n(c):c;l(new ey(h,c.node,r,null,u))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,ey.BLACK):(a(r,ey.BLACK),a(r,ey.RED))}return s}(new fy(e.length));return new ty(r||t,s)};let my;const gy={};class yy{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Oe(gy&&hy,"ChildrenNode.ts has not been loaded"),my=my||new yy({".priority":gy},{".priority":hy}),my}get(e){const t=ut(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ty?t:null}hasIndex(e){return lt(this.indexSet_,e.toString())}addIndex(e,t){Oe(e!==Xg,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Gg.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?py(n,e.getCompare()):gy;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const u=Object.assign({},this.indexes_);return u[a]=s,new yy(u,l)}addToIndexes(e,t){const n=ht(this.indexes_,((n,r)=>{const i=ut(this.indexSet_,r);if(Oe(i,"Missing index implementation for "+r),n===gy){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Gg.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),py(n,i.getCompare())}return gy}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Gg(e.name,r))),i.insert(e,e.node)}}));return new yy(n,this.indexSet_)}removeFromIndexes(e,t){const n=ht(this.indexes_,(n=>{if(n===gy)return n;{const r=t.get(e.name);return r?n.remove(new Gg(e.name,r)):n}}));return new yy(n,this.indexSet_)}}let vy;class by{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&oy(this.priorityNode_),this.children_.isEmpty()&&Oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vy||(vy=new by(new ty(ry),null,yy.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vy}updatePriority(e){return this.children_.isEmpty()?this:new by(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?vy:t}}getChild(e){const t=Ag(e);return null===t?this:this.getImmediateChild(t).getChild(Pg(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Oe(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Gg(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?vy:this.priorityNode_;return new by(r,s,i)}}updateChild(e,t){const n=Ag(e);if(null===n)return t;{Oe(".priority"!==Ag(e)||1===Rg(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(Pg(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(hy,((s,o)=>{t[s]=o.val(e),n++,i&&by.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+sy(this.getPriority().val())+":"),this.forEachChild(hy,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Dm(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Gg(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Gg(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Gg(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Gg.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Gg.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===wy?-1:0}withIndex(e){if(e===Xg||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new by(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Xg||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(hy),n=t.getIterator(hy);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Xg?null:this.indexMap_.get(e.toString())}}by.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const wy=new class extends by{constructor(){super(new ty(ry),by.EMPTY_NODE,yy.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return by.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Gg,{MIN:{value:new Gg(Wm,by.EMPTY_NODE)},MAX:{value:new Gg(Hm,wy)}}),Yg.__EMPTY_NODE=by.EMPTY_NODE,cy.__childrenNodeConstructor=by,iy=wy,function(e){uy=e}(wy);function _y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return by.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Oe(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new cy(e,_y(t))}if(e instanceof Array){let n=by.EMPTY_NODE;return Xm(e,((t,r)=>{if(lt(e,t)&&"."!==t.substring(0,1)){const e=_y(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(_y(t))}{const n=[];let r=!1;if(Xm(e,((e,t)=>{if("."!==e.substring(0,1)){const i=_y(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Gg(e,i)))}})),0===n.length)return by.EMPTY_NODE;const i=py(n,ny,(e=>e.name),ry);if(r){const e=py(n,hy.getCompare());return new by(i,_y(t),new yy({".priority":e},{".priority":hy}))}return new by(i,_y(t),yy.Default)}}!function(e){ly=e}(_y);class xy extends Qg{constructor(e){super(),this.indexPath_=e,Oe(!Ug(e)&&".priority"!==Ag(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Km(e.name,t.name):i}makePost(e,t){const n=_y(e),r=by.EMPTY_NODE.updateChild(this.indexPath_,n);return new Gg(t,r)}maxPost(){const e=by.EMPTY_NODE.updateChild(this.indexPath_,wy);return new Gg(Hm,e)}toString(){return Mg(this.indexPath_,0).join("/")}}const Sy=new class extends Qg{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Km(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Gg.MIN}maxPost(){return Gg.MAX}makePost(e,t){const n=_y(e);return new Gg(t,n)}toString(){return".value"}};function ky(e){return{type:"value",snapshotNode:e}}function Cy(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ey(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ty(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Ny{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hy}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wm}hasEnd(){return this.endSet_}getIndexEndValue(){return Oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Hm}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===hy}copy(){const e=new Ny;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Iy(e){const t={};if(e.isDefault())return t;let n;if(e.index_===hy?n="$priority":e.index_===Sy?n="$value":e.index_===Xg?n="$key":(Oe(e.index_ instanceof xy,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=ot(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=ot(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+ot(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=ot(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+ot(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function jy(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==hy&&(t.i=e.index_.toString()),t}class Ay extends Eg{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=zm("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=Ay.getListenId_(e,n),o={};this.listens_[s]=o;const a=Iy(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),ut(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Ay.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Iy(e._queryParams),n=e._path.toString(),r=new Je;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=st(a.responseText)}catch(PP){qm("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&qm("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class Ry{constructor(){this.rootNode_=by.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Py(){return{value:null,children:new Map}}function Dy(e,t,n){if(Ug(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=Ag(t);e.children.has(r)||e.children.set(r,Py());Dy(e.children.get(r),t=Pg(t),n)}}function My(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{My(r,new Ig(t.toString()+"/"+e),n)}))}class Oy{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Xm(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Ly{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Oy(e);const n=1e4+2e4*Math.random();rg(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Xm(e,((e,r)=>{r>0&&lt(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),rg(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Uy;function Fy(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Uy||(Uy={}));class zy{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Uy.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Ug(this.path)){if(null!=this.affectedTree.value)return Oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ig(e));return new zy(jg(),t,this.revert)}}return Oe(Ag(this.path)===e,"operationForChild called for unrelated child."),new zy(Pg(this.path),this.affectedTree,this.revert)}}class By{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Uy.OVERWRITE}operationForChild(e){return Ug(this.path)?new By(this.source,jg(),this.snap.getImmediateChild(e)):new By(this.source,Pg(this.path),this.snap)}}class Vy{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Uy.MERGE}operationForChild(e){if(Ug(this.path)){const t=this.children.subtree(new Ig(e));return t.isEmpty()?null:t.value?new By(this.source,jg(),t.value):new Vy(this.source,jg(),t)}return Oe(Ag(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Vy(this.source,Pg(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class qy{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ug(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ag(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function $y(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Le("Should only compare child_ events.");const r=new Gg(t.childName,t.snapshotNode),i=new Gg(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Wy(e,t){return{eventCache:e,serverCache:t}}function Hy(e,t,n,r){return Wy(new qy(t,n,r),e.serverCache)}function Ky(e,t,n,r){return Wy(e.eventCache,new qy(t,n,r))}function Gy(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Qy(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Jy;class Yy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Jy||(Jy=new ty(Gm)),Jy);this.value=e,this.children=t}static fromObject(e){let t=new Yy(null);return Xm(e,((e,n)=>{t=t.set(new Ig(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:jg(),value:this.value};if(Ug(e))return null;{const n=Ag(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(Pg(e),t);if(null!=i){return{path:Lg(new Ig(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(Ug(e))return this;{const t=Ag(e),n=this.children.get(t);return null!==n?n.subtree(Pg(e)):new Yy(null)}}set(e,t){if(Ug(e))return new Yy(t,this.children);{const n=Ag(e),r=(this.children.get(n)||new Yy(null)).set(Pg(e),t),i=this.children.insert(n,r);return new Yy(this.value,i)}}remove(e){if(Ug(e))return this.children.isEmpty()?new Yy(null):new Yy(null,this.children);{const t=Ag(e),n=this.children.get(t);if(n){const r=n.remove(Pg(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Yy(null):new Yy(this.value,i)}return this}}get(e){if(Ug(e))return this.value;{const t=Ag(e),n=this.children.get(t);return n?n.get(Pg(e)):null}}setTree(e,t){if(Ug(e))return t;{const n=Ag(e),r=(this.children.get(n)||new Yy(null)).setTree(Pg(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Yy(this.value,i)}}fold(e){return this.fold_(jg(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(Lg(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,jg(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(Ug(e))return null;{const r=Ag(e),i=this.children.get(r);return i?i.findOnPath_(Pg(e),Lg(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,jg(),t)}foreachOnPath_(e,t,n){if(Ug(e))return this;{this.value&&n(t,this.value);const r=Ag(e),i=this.children.get(r);return i?i.foreachOnPath_(Pg(e),Lg(t,r),n):new Yy(null)}}foreach(e){this.foreach_(jg(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(Lg(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Xy{constructor(e){this.writeTree_=e}static empty(){return new Xy(new Yy(null))}}function Zy(e,t,n){if(Ug(t))return new Xy(new Yy(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=Fg(i,t);return s=s.updateChild(o,n),new Xy(e.writeTree_.set(i,s))}{const r=new Yy(n),i=e.writeTree_.setTree(t,r);return new Xy(i)}}}function ev(e,t,n){let r=e;return Xm(n,((e,n)=>{r=Zy(r,Lg(t,e),n)})),r}function tv(e,t){if(Ug(t))return Xy.empty();{const n=e.writeTree_.setTree(t,new Yy(null));return new Xy(n)}}function nv(e,t){return null!=rv(e,t)}function rv(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Fg(n.path,t)):null}function iv(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(hy,((e,n)=>{t.push(new Gg(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Gg(e,n.value))})),t}function sv(e,t){if(Ug(t))return e;{const n=rv(e,t);return new Xy(null!=n?new Yy(n):e.writeTree_.subtree(t))}}function ov(e){return e.writeTree_.isEmpty()}function av(e,t){return lv(jg(),e.writeTree_,t)}function lv(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Oe(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=lv(Lg(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Lg(e,".priority"),r)),n}}function uv(e,t){return xv(t,e)}function cv(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Oe(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&hv(t,r.path)?i=!1:Bg(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=fv(e.allWrites,dv,jg()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=tv(e.visibleWrites,r.path);else{Xm(r.children,(t=>{e.visibleWrites=tv(e.visibleWrites,Lg(r.path,t))}))}return!0}return!1}function hv(e,t){if(e.snap)return Bg(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Bg(Lg(e.path,n),t))return!0;return!1}function dv(e){return e.visible}function fv(e,t,n){let r=Xy.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)Bg(n,e)?(t=Fg(n,e),r=Zy(r,t,s.snap)):Bg(e,n)&&(t=Fg(e,n),r=Zy(r,jg(),s.snap.getChild(t)));else{if(!s.children)throw Le("WriteRecord should have .snap or .children");if(Bg(n,e))t=Fg(n,e),r=ev(r,t,s.children);else if(Bg(e,n))if(t=Fg(e,n),Ug(t))r=ev(r,jg(),s.children);else{const e=ut(s.children,Ag(t));if(e){const n=e.getChild(Pg(t));r=Zy(r,jg(),n)}}}}}return r}function pv(e,t,n,r,i){if(r||i){const s=sv(e.visibleWrites,t);if(!i&&ov(s))return n;if(i||null!=n||nv(s,jg())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Bg(e.path,t)||Bg(t,e.path))};return av(fv(e.allWrites,s,t),n||by.EMPTY_NODE)}return null}{const r=rv(e.visibleWrites,t);if(null!=r)return r;{const r=sv(e.visibleWrites,t);if(ov(r))return n;if(null!=n||nv(r,jg())){return av(r,n||by.EMPTY_NODE)}return null}}}function mv(e,t,n,r){return pv(e.writeTree,e.treePath,t,n,r)}function gv(e,t){return function(e,t,n){let r=by.EMPTY_NODE;const i=rv(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(hy,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=sv(e.visibleWrites,t);return n.forEachChild(hy,((e,t)=>{const n=av(sv(i,new Ig(e)),t);r=r.updateImmediateChild(e,n)})),iv(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return iv(sv(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function yv(e,t,n,r){return function(e,t,n,r,i){Oe(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Lg(t,n);if(nv(e.visibleWrites,s))return null;{const t=sv(e.visibleWrites,s);return ov(t)?i.getChild(n):av(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function vv(e,t){return function(e,t){return rv(e.visibleWrites,t)}(e.writeTree,Lg(e.treePath,t))}function bv(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=sv(e.visibleWrites,t),u=rv(l,jg());if(null!=u)a=u;else{if(null==n)return[];a=av(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function wv(e,t,n){return function(e,t,n,r){const i=Lg(t,n),s=rv(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return av(sv(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function _v(e,t){return xv(Lg(e.treePath,t),e.writeTree)}function xv(e,t){return{treePath:e,writeTree:t}}class Sv{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Oe("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Oe(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ty(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ey(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Cy(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Le("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ty(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const kv=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Cv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new qy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wv(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qy(this.viewCache_),i=bv(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function Ev(e,t,n,r,i){const s=new Sv;let o,a;if(n.type===Uy.OVERWRITE){const l=n;l.source.fromUser?o=Iv(e,t,l.path,l.snap,r,i,s):(Oe(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!Ug(l.path),o=Nv(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===Uy.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const u=Lg(n,r);jv(t,Ag(u))&&(a=Iv(e,a,u,l,i,s,o))})),r.foreach(((r,l)=>{const u=Lg(n,r);jv(t,Ag(u))||(a=Iv(e,a,u,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(Oe(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Rv(e,t,l.path,l.children,r,i,a,s))}else if(n.type===Uy.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=vv(r,n))return t;{const a=new Cv(r,t,i),l=t.eventCache.getNode();let u;if(Ug(n)||".priority"===Ag(n)){let n;if(t.serverCache.isFullyInitialized())n=mv(r,Qy(t));else{const e=t.serverCache.getNode();Oe(e instanceof by,"serverChildren would be complete if leaf node"),n=gv(r,e)}u=e.filter.updateFullNode(l,n,s)}else{const i=Ag(n);let c=wv(r,i,t.serverCache);null==c&&t.serverCache.isCompleteForChild(i)&&(c=l.getImmediateChild(i)),u=null!=c?e.filter.updateChild(l,i,c,Pg(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,by.EMPTY_NODE,Pg(n),a,s):l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=mv(r,Qy(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=vv(r,jg()),Hy(t,u,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=vv(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(Ug(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Nv(e,t,n,l.getNode().getChild(n),i,s,a,o);if(Ug(n)){let r=new Yy(null);return l.getNode().forEachChild(Xg,((e,t)=>{r=r.set(new Ig(e),t)})),Rv(e,t,n,r,i,s,a,o)}return t}{let u=new Yy(null);return r.foreach(((e,t)=>{const r=Lg(n,e);l.isCompleteForPath(r)&&(u=u.set(e,l.getNode().getChild(r)))})),Rv(e,t,n,u,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==Uy.LISTEN_COMPLETE)throw Le("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=Ky(t,s.getNode(),s.isFullyInitialized()||Ug(n),s.isFiltered());return Tv(e,o,n,r,kv,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Gy(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ky(Gy(t)))}}(t,o,l),{viewCache:o,changes:l}}function Tv(e,t,n,r,i,s){const o=t.eventCache;if(null!=vv(r,n))return t;{let a,l;if(Ug(n))if(Oe(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Qy(t),i=gv(r,n instanceof by?n:by.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=mv(r,Qy(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=Ag(n);if(".priority"===u){Oe(1===Rg(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=yv(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const c=Pg(n);let h;if(o.isCompleteForChild(u)){l=t.serverCache.getNode();const e=yv(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(u).updateChild(c,e):o.getNode().getImmediateChild(u)}else h=wv(r,u,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),u,h,c,i,s):o.getNode()}}return Hy(t,a,o.isFullyInitialized()||Ug(n),e.filter.filtersNodes())}}function Nv(e,t,n,r,i,s,o,a){const l=t.serverCache;let u;const c=o?e.filter:e.filter.getIndexedFilter();if(Ug(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),e,null)}else{const e=Ag(n);if(!l.isCompleteForPath(n)&&Rg(n)>1)return t;const i=Pg(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);u=".priority"===e?c.updatePriority(l.getNode(),s):c.updateChild(l.getNode(),e,s,i,kv,null)}const h=Ky(t,u,l.isFullyInitialized()||Ug(n),c.filtersNodes());return Tv(e,h,n,i,new Cv(i,h,s),a)}function Iv(e,t,n,r,i,s,o){const a=t.eventCache;let l,u;const c=new Cv(i,t,s);if(Ug(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=Hy(t,u,!0,e.filter.filtersNodes());else{const i=Ag(n);if(".priority"===i)u=e.filter.updatePriority(t.eventCache.getNode(),r),l=Hy(t,u,a.isFullyInitialized(),a.isFiltered());else{const s=Pg(n),u=a.getNode().getImmediateChild(i);let h;if(Ug(s))h=r;else{const e=c.getCompleteChild(i);h=null!=e?".priority"===Dg(s)&&e.getChild(Og(s)).isEmpty()?e:e.updateChild(s,r):by.EMPTY_NODE}if(u.equals(h))l=t;else{l=Hy(t,e.filter.updateChild(a.getNode(),i,h,s,c,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function jv(e,t){return e.eventCache.isCompleteForChild(t)}function Av(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Rv(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,u=t;l=Ug(n)?r:new Yy(null).setTree(n,r);const c=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(c.hasChild(n)){const l=Av(0,t.serverCache.getNode().getImmediateChild(n),r);u=Nv(e,u,new Ig(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!c.hasChild(n)&&!l){const l=Av(0,t.serverCache.getNode().getImmediateChild(n),r);u=Nv(e,u,new Ig(n),l,i,s,o,a)}})),u}function Pv(e,t){const n=Qy(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Ug(t)&&!n.getImmediateChild(Ag(t)).isEmpty())?n.getChild(t):null}function Dv(e,t,n,r){t.type===Uy.MERGE&&null!==t.source.queryId&&(Oe(Qy(e.viewCache_),"We should always have a full cache before handling merges"),Oe(Gy(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=Ev(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Oe(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Oe(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Oe(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Mv(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Mv(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),$y(e,i,"child_removed",t,r,n),$y(e,i,"child_added",t,r,n),$y(e,i,"child_moved",s,r,n),$y(e,i,"child_changed",t,r,n),$y(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Ov,Lv;function Uv(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Oe(null!=s,"SyncTree gave us an op for an invalid query."),Dv(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(Dv(s,t,n,r));return i}}function Fv(e,t){let n=null;for(const r of e.views.values())n=n||Pv(r,t);return n}class zv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Yy(null),this.pendingWriteTree_={visibleWrites:Xy.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bv(e,t,n,r,i){return function(e,t,n,r,i){Oe(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Zy(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Hv(e,new By({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Vv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(cv(e.pendingWriteTree_,t)){let t=new Yy(null);return null!=r.snap?t=t.set(jg(),!0):Xm(r.children,(e=>{t=t.set(new Ig(e),!0)})),Hv(e,new zy(r.path,t,n))}return[]}function qv(e,t,n){return Hv(e,new By({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function $v(e,t,n,r){const i=Qv(e,r);if(null!=i){const r=Jv(i),s=r.path,o=r.queryId,a=Fg(s,t);return Yv(e,s,new By(Fy(o),a,n))}return[]}function Wv(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Fv(n,Fg(e,t));if(r)return r}));return pv(r,t,i,n,!0)}function Hv(e,t){return Kv(t,e.syncPointTree_,null,uv(e.pendingWriteTree_,jg()))}function Kv(e,t,n,r){if(Ug(e.path))return Gv(e,t,n,r);{const i=t.get(jg());null==n&&null!=i&&(n=Fv(i,jg()));let s=[];const o=Ag(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=_v(r,o);s=s.concat(Kv(a,l,e,t))}return i&&(s=s.concat(Uv(i,e,r,n))),s}}function Gv(e,t,n,r){const i=t.get(jg());null==n&&null!=i&&(n=Fv(i,jg()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=_v(r,t),l=e.operationForChild(t);l&&(s=s.concat(Gv(l,i,o,a)))})),i&&(s=s.concat(Uv(i,e,r,n))),s}function Qv(e,t){return e.tagToQueryMap.get(t)}function Jv(e){const t=e.indexOf("$");return Oe(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Ig(e.substr(0,t))}}function Yv(e,t,n){const r=e.syncPointTree_.get(t);Oe(r,"Missing sync point for query tag that we're tracking");return Uv(r,n,uv(e.pendingWriteTree_,t),null)}class Xv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Xv(t)}node(){return this.node_}}class Zv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Lg(this.path_,e);return new Zv(this.syncTree_,t)}node(){return Wv(this.syncTree_,this.path_)}}const eb=function(e,t,n){return e&&"object"===typeof e?(Oe(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?tb(e[".sv"],t,n):"object"===typeof e[".sv"]?nb(e[".sv"],t):void Oe(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},tb=function(e,t,n){if("timestamp"===e)return n.timestamp;Oe(!1,"Unexpected server value: "+e)},nb=function(e,t,n){e.hasOwnProperty("increment")||Oe(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Oe(!1,"Unexpected increment value: "+r);const i=t.node();if(Oe(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},rb=function(e,t,n,r){return sb(t,new Zv(n,e),r)},ib=function(e,t,n){return sb(e,new Xv(t),n)};function sb(e,t,n){const r=e.getPriority().val(),i=eb(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=eb(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new cy(s,_y(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new cy(i))),r.forEachChild(hy,((e,r)=>{const i=sb(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class ob{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function ab(e,t){let n=t instanceof Ig?t:new Ig(t),r=e,i=Ag(n);for(;null!==i;){const e=ut(r.node.children,i)||{children:{},childCount:0};r=new ob(i,r,e),n=Pg(n),i=Ag(n)}return r}function lb(e){return e.node.value}function ub(e,t){e.node.value=t,pb(e)}function cb(e){return e.node.childCount>0}function hb(e,t){Xm(e.node.children,((n,r)=>{t(new ob(n,e,r))}))}function db(e,t,n,r){n&&!r&&t(e),hb(e,(e=>{db(e,t,!0,r)})),n&&r&&t(e)}function fb(e){return new Ig(null===e.parent?e.name:fb(e.parent)+"/"+e.name)}function pb(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===lb(e)&&!cb(e)}(n),i=lt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,pb(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,pb(e))}(e.parent,e.name,e)}const mb=/[\[\].#$\/\u0000-\u001F\u007F]/,gb=/[\[\].#$\u0000-\u001F\u007F]/,yb=10485760,vb=function(e){return"string"===typeof e&&0!==e.length&&!mb.test(e)},bb=function(e){return"string"===typeof e&&0!==e.length&&!gb.test(e)},wb=function(e,t,n){const r=n instanceof Ig?new Vg(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+$g(r));if("function"===typeof t)throw new Error(e+"contains a function "+$g(r)+" with contents = "+t.toString());if($m(t))throw new Error(e+"contains "+t.toString()+" "+$g(r));if("string"===typeof t&&t.length>yb/3&&gt(t)>yb)throw new Error(e+"contains a string greater than "+yb+" utf8 bytes "+$g(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Xm(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!vb(t)))throw new Error(e+" contains an invalid key ("+t+") "+$g(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=gt(t),qg(e)}(r,t),wb(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=gt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+$g(r)+" in addition to actual children.")}},_b=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!vb(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),bb(e)}(n))throw new Error(mt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class xb{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Sb(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||zg(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function kb(e,t,n){Sb(e,n),Cb(e,(e=>Bg(e,t)||Bg(t,e)))}function Cb(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(Eb(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Eb(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Om&&Fm("event: "+n.toString()),ng(r)}}}const Tb="repo_interrupt";class Nb{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xb,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Py(),this.transactionQueueTree_=new ob,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ib(e,t,n){if(e.stats_=yg(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ay(e.repoInfo_,((t,n,r,i)=>{Rb(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Pb(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ot(n)}catch(PP){throw new Error("Invalid authOverride provided: "+PP)}}e.persistentConnection_=new Kg(e.repoInfo_,t,((t,n,r,i)=>{Rb(e,t,n,r,i)}),(t=>{Pb(e,t)}),(t=>{!function(e,t){Xm(t,((t,n)=>{Db(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return gg[n]||(gg[n]=t()),gg[n]}(e.repoInfo_,(()=>new Ly(e.stats_,e.server_))),e.infoData_=new Ry,e.infoSyncTree_=new zv({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=qv(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),Db(e,"connected",!1),e.serverSyncTree_=new zv({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);kb(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function jb(e){const t=e.infoData_.getNode(new Ig(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ab(e){return(t=(t={timestamp:jb(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Rb(e,t,n,r,i){e.dataUpdateCount++;const s=new Ig(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=ht(n,(e=>_y(e)));o=function(e,t,n,r){const i=Qv(e,r);if(i){const r=Jv(i),s=r.path,o=r.queryId,a=Fg(s,t),l=Yy.fromObject(n);return Yv(e,s,new Vy(Fy(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=_y(n);o=$v(e.serverSyncTree_,s,t,i)}else if(r){const t=ht(n,(e=>_y(e)));o=function(e,t,n){const r=Yy.fromObject(n);return Hv(e,new Vy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=_y(n);o=qv(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=zb(e,s)),kb(e.eventQueue_,a,o)}function Pb(e,t){Db(e,"connected",t),!1===t&&function(e){Lb(e,"onDisconnectEvents");const t=Ab(e),n=Py();My(e.onDisconnect_,jg(),((r,i)=>{const s=rb(r,i,e.serverSyncTree_,t);Dy(n,r,s)}));let r=[];My(n,jg(),((t,n)=>{r=r.concat(qv(e.serverSyncTree_,t,n));const i=Wb(e,t);zb(e,i)})),e.onDisconnect_=Py(),kb(e.eventQueue_,jg(),r)}(e)}function Db(e,t,n){const r=new Ig("/.info/"+t),i=_y(n);e.infoData_.updateSnapshot(r,i);const s=qv(e.infoSyncTree_,r,i);kb(e.eventQueue_,r,s)}function Mb(e){return e.nextWriteId_++}function Ob(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Tb)}function Lb(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Fm(t,...r)}function Ub(e,t,n){return Wv(e.serverSyncTree_,t,n)||by.EMPTY_NODE}function Fb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||$b(e,t),lb(t)){const n=Vb(e,t);Oe(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=Ub(e,t,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const e=n[u];Oe(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=Fg(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{Lb(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Vv(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();$b(e,ab(e.transactionQueueTree_,t)),Fb(e,e.transactionQueueTree_),kb(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)ng(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{qm("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}zb(e,t)}}),o)}(e,fb(t),n)}else cb(t)&&hb(t,(t=>{Fb(e,t)}))}function zb(e,t){const n=Bb(e,t),r=fb(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],u=Fg(n,s.path);let c,h=!1;if(Oe(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,c=s.abortReason,i=i.concat(Vv(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)h=!0,c="maxretry",i=i.concat(Vv(e.serverSyncTree_,s.currentWriteId,!0));else{const n=Ub(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){wb("transaction failed: Data returned ",r,s.path);let t=_y(r);"object"===typeof r&&null!=r&&lt(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=Ab(e),u=ib(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=u,s.currentWriteId=Mb(e),o.splice(o.indexOf(a),1),i=i.concat(Bv(e.serverSyncTree_,s.path,u,s.currentWriteId,s.applyLocally)),i=i.concat(Vv(e.serverSyncTree_,a,!0))}else h=!0,c="nodata",i=i.concat(Vv(e.serverSyncTree_,s.currentWriteId,!0))}kb(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===c?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(c),!1,null)))))}var a;$b(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)ng(r[l]);Fb(e,e.transactionQueueTree_)}(e,Vb(e,n),r),r}function Bb(e,t){let n,r=e.transactionQueueTree_;for(n=Ag(t);null!==n&&void 0===lb(r);)r=ab(r,n),n=Ag(t=Pg(t));return r}function Vb(e,t){const n=[];return qb(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function qb(e,t,n){const r=lb(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);hb(t,(t=>{qb(e,t,n)}))}function $b(e,t){const n=lb(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,ub(t,n.length>0?n:void 0)}hb(t,(t=>{$b(e,t)}))}function Wb(e,t){const n=fb(Bb(e,t)),r=ab(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{Hb(e,t)})),Hb(e,r),db(r,(t=>{Hb(e,t)})),n}function Hb(e,t){const n=lb(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Oe(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Oe(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Vv(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ub(t,void 0):n.length=s+1,kb(e.eventQueue_,fb(t),i);for(let e=0;e<r.length;e++)ng(r[e])}}const Kb=function(e,t){const n=Gb(e),r=n.namespace;"firebase.com"===n.domain&&Vm(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Vm("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&qm("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new dg(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Ig(n.pathString)}},Gb=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));let c=e.indexOf("/");-1===c&&(c=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(PP){}t+="/"+e}return t}(e.substring(c,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qm(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));u=t.indexOf(":"),u>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(u+1),10)):u=t.length;const f=t.slice(0,u);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},Qb="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class Jb{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return Ug(this._path)?null:Dg(this._path)}get ref(){return new Yb(this._repo,this._path)}get _queryIdentifier(){const e=jy(this._queryParams),t=Jm(e);return"{}"===t?"default":t}get _queryObject(){return jy(this._queryParams)}isEqual(e){if(!((e=vt(e))instanceof Jb))return!1;const t=this._repo===e._repo,n=zg(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Yb extends Jb{constructor(e,t){super(e,t,new Ny,!1)}get parent(){const e=Og(this._path);return null===e?null:new Yb(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}!function(e){Oe(!Ov,"__referenceConstructor has already been defined"),Ov=e}(Yb),function(e){Oe(!Lv,"__referenceConstructor has already been defined"),Lv=e}(Yb);const Xb={};let Zb=!1;function ew(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||Vm("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fm("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=Kb(s,i),u=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/incommon",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${u.namespace}`,l=Kb(s,i),u=l.repoInfo):o=!l.repoInfo.secure;const c=i&&o?new og(og.OWNER):new sg(e.name,e.options,t);_b("Invalid Firebase Database URL",l),Ug(l.path)||Vm("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=Xb[t.name];i||(i={},Xb[t.name]=i);let s=i[e.toURLString()];s&&Vm("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Nb(e,Zb,n,r),i[e.toURLString()]=s,s}(u,e,c,new ig(e.name,n));return new tw(h,e)}class tw{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Ib(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Yb(this._repo,jg())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Xb[t];n&&n[e.key]===e||Vm(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Ob(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Vm("Cannot call "+e+" on a deleted database.")}}Kg.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Kg.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){Em=e}(jn),En(new bt("database",((e,t)=>{let{instanceIdentifier:n}=t;return ew(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Pn(km,Cm,e),Pn(km,Cm,"esm2017")}();let nw,rw;const iw=new WeakMap,sw=new WeakMap,ow=new WeakMap,aw=new WeakMap,lw=new WeakMap;let uw={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return sw.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ow.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dw(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function cw(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(rw||(rw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(fw(this),n),dw(iw.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return dw(e.apply(fw(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(fw(this),t,...r);return ow.set(s,t.sort?t.sort():[t]),dw(s)}}function hw(e){return"function"===typeof e?cw(e):(e instanceof IDBTransaction&&function(e){if(sw.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));sw.set(e,t)}(e),t=e,(nw||(nw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,uw):e);var t}function dw(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(dw(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&iw.set(t,e)})).catch((()=>{})),lw.set(t,e),t}(e);if(aw.has(e))return aw.get(e);const t=hw(e);return t!==e&&(aw.set(e,t),lw.set(t,e)),t}const fw=e=>lw.get(e);const pw=["get","getKey","getAll","getAllKeys","count"],mw=["put","add","delete","clear"],gw=new Map;function yw(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(gw.get(t))return gw.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=mw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!pw.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return gw.set(t,s),s}!function(e){uw=e(uw)}((e=>({...e,get:(t,n,r)=>yw(t,n)||e.get(t,n,r),has:(t,n)=>!!yw(t,n)||e.has(t,n)})));const vw="@firebase/installations",bw="0.6.4",ww=1e4,_w=`w:${bw}`,xw="FIS_v2",Sw=36e5,kw=new rt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Cw(e){return e instanceof nt&&e.code.includes("request-failed")}function Ew(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Tw(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Nw(e,t){const n=(await t.json()).error;return kw.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Iw(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function jw(e,t){let{refreshToken:n}=t;const r=Iw(e);return r.append("Authorization",function(e){return`${xw} ${e}`}(n)),r}async function Aw(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Rw(e){return new Promise((t=>{setTimeout(t,e)}))}const Pw=/^[cdef][\w-]{21}$/;function Dw(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=function(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}(e);return t.substr(0,22)}(e);return Pw.test(t)?t:""}catch(e){return""}}function Mw(e){return`${e.appName}!${e.appId}`}const Ow=new Map;function Lw(e,t){const n=Mw(e);Uw(n,t),function(e,t){const n=zw();n&&n.postMessage({key:e,fid:t});Bw()}(n,t)}function Uw(e,t){const n=Ow.get(e);if(n)for(const r of n)r(t)}let Fw=null;function zw(){return!Fw&&"BroadcastChannel"in self&&(Fw=new BroadcastChannel("[Firebase] FID Change"),Fw.onmessage=e=>{Uw(e.data.key,e.data.fid)}),Fw}function Bw(){0===Ow.size&&Fw&&(Fw.close(),Fw=null)}const Vw="firebase-installations-store";let qw=null;function $w(){return qw||(qw=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=dw(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(dw(o.result),e.oldVersion,e.newVersion,dw(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),a}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Vw)}})),qw}async function Ww(e,t){const n=Mw(e),r=(await $w()).transaction(Vw,"readwrite"),i=r.objectStore(Vw),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||Lw(e,t.fid),t}async function Hw(e){const t=Mw(e),n=(await $w()).transaction(Vw,"readwrite");await n.objectStore(Vw).delete(t),await n.done}async function Kw(e,t){const n=Mw(e),r=(await $w()).transaction(Vw,"readwrite"),i=r.objectStore(Vw),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||Lw(e,o.fid),o}async function Gw(e){let t;const n=await Kw(e.appConfig,(n=>{const r=function(e){const t=e||{fid:Dw(),registrationStatus:0};return Yw(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(kw.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=Ew(n),o=Iw(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:xw,appId:n.appId,sdkVersion:_w},u={method:"POST",headers:o,body:JSON.stringify(l)},c=await Aw((()=>fetch(s,u)));if(c.ok){const e=await c.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Tw(e.authToken)}}throw await Nw("Create Installation",c)}(e,t);return Ww(e.appConfig,n)}catch(PP){throw Cw(PP)&&409===PP.customData.serverCode?await Hw(e.appConfig):await Ww(e.appConfig,{fid:t.fid,registrationStatus:0}),PP}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Qw(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Qw(e){let t=await Jw(e.appConfig);for(;1===t.registrationStatus;)await Rw(100),t=await Jw(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Gw(e);return n||t}return t}function Jw(e){return Kw(e,(e=>{if(!e)throw kw.create("installation-not-found");return Yw(e)}))}function Yw(e){return 1===(t=e).registrationStatus&&t.registrationTime+ww<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Xw(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Ew(e)}/${n}/authTokens:generate`}(n,t),s=jw(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:_w,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await Aw((()=>fetch(i,l)));if(u.ok){return Tw(await u.json())}throw await Nw("Generate Auth Token",u)}async function Zw(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Kw(e.appConfig,(r=>{if(!t_(r))throw kw.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Sw}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await e_(e.appConfig);for(;1===n.authToken.requestStatus;)await Rw(100),n=await e_(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Zw(e,t):r}(e,n),r;{if(!navigator.onLine)throw kw.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Xw(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Ww(e.appConfig,r),n}catch(PP){if(!Cw(PP)||401!==PP.customData.serverCode&&404!==PP.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ww(e.appConfig,n)}else await Hw(e.appConfig);throw PP}}(e,n),n}}));return t?await t:r.authToken}function e_(e){return Kw(e,(e=>{if(!t_(e))throw kw.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+ww<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function t_(e){return void 0!==e&&2===e.registrationStatus}async function n_(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Gw(e);t&&await t}(n);return(await Zw(n,t)).token}function r_(e){return kw.create("missing-app-config-values",{valueName:e})}const i_="installations",s_=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw r_("App Configuration");if(!e.name)throw r_("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw r_(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Tn(t,"heartbeat"),_delete:()=>Promise.resolve()}},o_=e=>{const t=Tn(e.getProvider("app").getImmediate(),i_).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Gw(t);return r?r.catch(console.error):Zw(t).catch(console.error),n.fid}(t),getToken:e=>n_(t,e)}};En(new bt(i_,s_,"PUBLIC")),En(new bt("installations-internal",o_,"PRIVATE")),Pn(vw,bw),Pn(vw,bw,"esm2017");const a_="analytics",l_="https://www.googletagmanager.com/gtag/js",u_=new It("@firebase/analytics"),c_=new rt("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function h_(e){if(!e.startsWith(l_)){const t=c_.create("invalid-gtag-resource",{gtagURL:e});return u_.warn(t.message),""}return e}function d_(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function f_(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:h_}),r=document.createElement("script"),i=`${l_}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function p_(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await d_(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(PP){u_.error(PP)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await d_(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(PP){u_.error(PP)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t]=o;e("consent","update",t)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(PP){u_.error(PP)}}}const m_=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function g_(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function y_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m_,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw c_.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw c_.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new b_;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),v_({appId:r,apiKey:i,measurementId:s},o,a,t)}async function v_(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m_;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(c_.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(PP){if(l)return u_.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===PP||void 0===PP?void 0:PP.message}]`),{appId:a,measurementId:l};throw PP}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:g_(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw c_.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(PP){const r=PP;if(!function(e){if(!(e instanceof nt)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(a),l)return u_.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===r||void 0===r?void 0:r.message}]`),{appId:a,measurementId:l};throw PP}const u=503===Number(null===(o=null===r||void 0===r?void 0:r.customData)||void 0===o?void 0:o.httpStatus)?yt(i,s.intervalMillis,30):yt(i,s.intervalMillis),c={throttleEndTimeMillis:Date.now()+u,backoffCount:i+1};return s.setThrottleMetadata(a,c),u_.debug(`Calling attemptFetch again in ${u} millis`),v_(e,c,n,s)}}class b_{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let w_,__;function x_(e){__=e}function S_(e){w_=e}async function k_(e,t,n,r,i,s,o){var a;const l=y_(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&u_.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>u_.error(e))),t.push(l);const u=async function(){if(!et())return u_.warn(c_.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await tt()}catch(PP){return u_.warn(c_.create("indexeddb-unavailable",{errorInfo:null===PP||void 0===PP?void 0:PP.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[c,h]=await Promise.all([l,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(l_)&&n.src.includes(e))return n;return null})(s)||f_(s,c.measurementId),__&&(i("consent","default",__),x_(void 0)),i("js",new Date);const d=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",c.measurementId,d),w_&&(i("set",w_),S_(void 0)),c.measurementId}class C_{constructor(e){this.app=e}_delete(){return delete E_[this.app.options.appId],Promise.resolve()}}let E_={},T_=[];const N_={};let I_,j_,A_="dataLayer",R_="gtag",P_=!1;function D_(){const e=[];if(function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=c_.create("invalid-analytics-context",{errorInfo:t});u_.warn(n.message)}}function M_(e,t,n){D_();const r=e.options.appId;if(!r)throw c_.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw c_.create("no-api-key");u_.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=E_[r])throw c_.create("already-exists",{id:r});if(!P_){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(A_);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=p_(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(E_,T_,N_,A_,R_);j_=e,I_=t,P_=!0}E_[r]=k_(e,T_,N_,t,I_,A_,n);return new C_(e)}function O_(e,t,n,r){e=vt(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(j_,E_[e.app.options.appId],t,n,r).catch((e=>u_.error(e)))}const L_="@firebase/analytics",U_="0.10.0";En(new bt(a_,((e,t)=>{let{options:n}=t;return M_(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),En(new bt("analytics-internal",(function(e){try{const t=e.getProvider(a_).getImmediate();return{logEvent:(e,n,r)=>O_(t,e,n,r)}}catch(PP){throw c_.create("interop-component-reg-failed",{reason:PP})}}),"PRIVATE")),Pn(L_,U_),Pn(L_,U_,"esm2017");!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();e=vt(e);const t=Tn(e,a_);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Tn(e,a_);if(n.isInitialized()){const e=n.getImmediate();if(dt(t,n.getOptions()))return e;throw c_.create("already-initialized")}const r=n.initialize({options:t})}(e)}(An({apiKey:"AIzaSyBdLzhc6y-wl1WgUGZtLM-KwEVMJzGLXUg",authDomain:"incommon-5a80d.firebaseapp.com",projectId:"incommon-5a80d",storageBucket:"incommon-5a80d.appspot.com",messagingSenderId:"628109166184",appId:"1:628109166184:web:c32f3050c96227bcfb9ddd",measurementId:"G-1DGT55E1YT"}));const F_=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Tn("object"==typeof e?e:Rn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=Ge("firestore");e&&hp(r,...e)}return r}(),z_=JSON.parse('{"celebrities":[{"name":"Dwayne Johnson","imageUrl":"Dwayne_Johnson.jpg"},{"name":"Taylor Swift","imageUrl":"Taylor_Swift.png"},{"name":"Beyonc\xe9","imageUrl":"Beyonc\xe9.jpg"},{"name":"Leonardo DiCaprio","imageUrl":"Leonardo_DiCaprio.jpg"},{"name":"Kim Kardashian","imageUrl":"Kim_Kardashian.jpg"},{"name":"Oprah Winfrey","imageUrl":"Oprah_Winfrey.jpg"},{"name":"Brad Pitt","imageUrl":"Brad_Pitt.jpg"},{"name":"Rihanna","imageUrl":"Rihanna.png"},{"name":"Justin Bieber","imageUrl":"Justin_Bieber.jpg"},{"name":"Ellen DeGeneres","imageUrl":"Ellen_DeGeneres.jpg"},{"name":"Kanye West","imageUrl":"Kanye_West.jpg"},{"name":"Ariana Grande","imageUrl":"Ariana_Grande.jpg"},{"name":"Jennifer Lopez","imageUrl":"Jennifer_Lopez.jpg"},{"name":"Lady Gaga","imageUrl":"Lady_Gaga.jpg"},{"name":"Tom Hanks","imageUrl":"Tom_Hanks.jpg"},{"name":"Kylie Jenner","imageUrl":"Kylie_Jenner.jpg"},{"name":"Will Smith","imageUrl":"Will_Smith.jpg"},{"name":"Angelina Jolie","imageUrl":"Angelina_Jolie.jpg"},{"name":"Katy Perry","imageUrl":"Katy_Perry.png"},{"name":"Chris Hemsworth","imageUrl":"Chris_Hemsworth.jpg"},{"name":"Robert Downey Jr.","imageUrl":"Robert_Downey_Jr..jpg"},{"name":"Scarlett Johansson","imageUrl":"Scarlett_Johansson.jpg"},{"name":"Jennifer Aniston","imageUrl":"Jennifer_Aniston.jpg"},{"name":"Michael B. Jordan","imageUrl":"Michael_B._Jordan.jpg"},{"name":"Selena Gomez","imageUrl":"Selena_Gomez.png"},{"name":"Cardi B","imageUrl":"Cardi_B.jpg"},{"name":"Billie Eilish","imageUrl":"Billie_Eilish.jpg"},{"name":"Kevin Hart","imageUrl":"Kevin_Hart.jpg"},{"name":"Sandra Bullock","imageUrl":"Sandra_Bullock.jpg"},{"name":"Mark Wahlberg","imageUrl":"Mark_Wahlberg.jpg"},{"name":"Meryl Streep","imageUrl":"Meryl_Streep.jpg"},{"name":"Jimmy Fallon","imageUrl":"Jimmy_Fallon.jpg"},{"name":"Denzel Washington","imageUrl":"Denzel_Washington.jpg"},{"name":"Jennifer Lawrence","imageUrl":"Jennifer_Lawrence.jpg"},{"name":"Adam Sandler","imageUrl":"Adam_Sandler.jpg"},{"name":"Morgan Freeman","imageUrl":"Morgan_Freeman.jpg"},{"name":"Reese Witherspoon","imageUrl":"Reese_Witherspoon.jpg"},{"name":"Lizzo","imageUrl":"Lizzo.jpg"},{"name":"Margot Robbie","imageUrl":"Margot_Robbie.jpg"},{"name":"Ryan Reynolds","imageUrl":"Ryan_Reynolds.jpg"},{"name":"Stephen Curry","imageUrl":"Stephen_Curry.jpg"},{"name":"Gal Gadot","imageUrl":"Gal_Gadot.jpg"},{"name":"Tom Cruise","imageUrl":"Tom_Cruise.jpg"},{"name":"Johnny Depp","imageUrl":"Johnny_Depp.jpg"},{"name":"Bruno Mars","imageUrl":"Bruno_Mars.jpg"},{"name":"Emma Stone","imageUrl":"Emma_Stone.jpg"},{"name":"Blake Lively","imageUrl":"Blake_Lively.jpg"},{"name":"Hugh Jackman","imageUrl":"Hugh_Jackman.jpg"},{"name":"Zac Efron","imageUrl":"Zac_Efron.jpg"},{"name":"Sofia Vergara","imageUrl":"Sofia_Vergara.jpg"},{"name":"Jason Momoa","imageUrl":"Jason_Momoa.jpg"},{"name":"Charlize Theron","imageUrl":"Charlize_Theron.jpg"},{"name":"The Weeknd","imageUrl":"The_Weeknd.png"},{"name":"Nicole Kidman","imageUrl":"Nicole_Kidman.jpg"},{"name":"Ed Sheeran","imageUrl":"Ed_Sheeran.jpg"},{"name":"Viola Davis","imageUrl":"Viola_Davis.jpg"},{"name":"Daniel Radcliffe","imageUrl":"Daniel_Radcliffe.jpg"},{"name":"Emma Watson","imageUrl":"Emma_Watson.jpg"},{"name":"George Clooney","imageUrl":"George_Clooney.jpg"},{"name":"Halle Berry","imageUrl":"Halle_Berry.jpg"},{"name":"Matt Damon","imageUrl":"Matt_Damon.jpg"},{"name":"Zendaya","imageUrl":"Zendaya.jpg"},{"name":"Cristiano Ronaldo","imageUrl":"Cristiano_Ronaldo.jpg"},{"name":"Demi Lovato","imageUrl":"Demi_Lovato.jpg"},{"name":"Elon Musk","imageUrl":"Elon_Musk.jpg"},{"name":"James Corden","imageUrl":"James_Corden.jpg"},{"name":"John Legend","imageUrl":"John_Legend.jpg"},{"name":"Keanu Reeves","imageUrl":"Keanu_Reeves.jpg"},{"name":"Miley Cyrus","imageUrl":"Miley_Cyrus.jpg"},{"name":"Naomi Osaka","imageUrl":"Naomi_Osaka.png"},{"name":"Serena Williams","imageUrl":"Serena_Williams.jpg"},{"name":"Trevor Noah","imageUrl":"Trevor_Noah.png"},{"name":"Dave Chappelle","imageUrl":"Dave_Chappelle.jpg"},{"name":"Idris Elba","imageUrl":"Idris_Elba.jpg"},{"name":"Lionel Messi","imageUrl":"Lionel_Messi.jpg"},{"name":"Matthew McConaughey","imageUrl":"Matthew_McConaughey.jpg"},{"name":"Oscar Isaac","imageUrl":"Oscar_Isaac.jpg"},{"name":"Samuel L. Jackson","imageUrl":"Samuel_L._Jackson.jpg"},{"name":"Seth Rogen","imageUrl":"Seth_Rogen.jpg"},{"name":"Simone Biles","imageUrl":"Simone_Biles.jpg"},{"name":"Tyler Perry","imageUrl":"Tyler_Perry.jpg"},{"name":"Adele","imageUrl":"Adele.png"},{"name":"Amy Schumer","imageUrl":"Amy_Schumer.jpg"},{"name":"Brie Larson","imageUrl":"Brie_Larson.jpg"},{"name":"Chadwick Boseman","imageUrl":"Chadwick_Boseman.jpg"},{"name":"Chris Pratt","imageUrl":"Chris_Pratt.jpg"},{"name":"Conan O\'Brien","imageUrl":"Conan_OBrien.jpg"},{"name":"Dakota Johnson","imageUrl":"Dakota_Johnson.jpg"},{"name":"Emily Blunt","imageUrl":"Emily_Blunt.png"},{"name":"Gordon Ramsay","imageUrl":"Gordon_Ramsay.jpg"},{"name":"J.K. Rowling","imageUrl":"J.K._Rowling.jpg"},{"name":"Jake Gyllenhaal","imageUrl":"Jake_Gyllenhaal.jpg"},{"name":"Jared Leto","imageUrl":"Jared_Leto.jpg"},{"name":"Jessica Chastain","imageUrl":"Jessica_Chastain.jpg"},{"name":"John Krasinski","imageUrl":"John_Krasinski.png"},{"name":"Julia Roberts","imageUrl":"Julia_Roberts.jpg"},{"name":"LeBron James","imageUrl":"LeBron_James.jpg"},{"name":"Lin-Manuel Miranda","imageUrl":"Lin-Manuel_Miranda.jpg"},{"name":"Michael Jordan","imageUrl":"Michael_Jordan.jpg"}],"actors":[{"name":"Dwayne Johnson","imageUrl":"Dwayne_Johnson.jpg"},{"name":"Leonardo DiCaprio","imageUrl":"Leonardo_DiCaprio.jpg"},{"name":"Brad Pitt","imageUrl":"Brad_Pitt.jpg"},{"name":"Tom Hanks","imageUrl":"Tom_Hanks.jpg"},{"name":"Angelina Jolie","imageUrl":"Angelina_Jolie.jpg"},{"name":"Scarlett Johansson","imageUrl":"Scarlett_Johansson.jpg"},{"name":"Jennifer Aniston","imageUrl":"Jennifer_Aniston.jpg"},{"name":"Michael B. Jordan","imageUrl":"Michael_B._Jordan.jpg"},{"name":"Jennifer Lawrence","imageUrl":"Jennifer_Lawrence.jpg"},{"name":"Adam Sandler","imageUrl":"Adam_Sandler.jpg"},{"name":"Morgan Freeman","imageUrl":"Morgan_Freeman.jpg"},{"name":"Reese Witherspoon","imageUrl":"Reese_Witherspoon.jpg"},{"name":"Margot Robbie","imageUrl":"Margot_Robbie.jpg"},{"name":"Ryan Reynolds","imageUrl":"Ryan_Reynolds.jpg"},{"name":"Gal Gadot","imageUrl":"Gal_Gadot.jpg"},{"name":"Tom Cruise","imageUrl":"Tom_Cruise.jpg"},{"name":"Johnny Depp","imageUrl":"Johnny_Depp.jpg"},{"name":"Emma Stone","imageUrl":"Emma_Stone.jpg"},{"name":"Hugh Jackman","imageUrl":"Hugh_Jackman.jpg"},{"name":"Zac Efron","imageUrl":"Zac_Efron.jpg"},{"name":"Sofia Vergara","imageUrl":"Sofia_Vergara.jpg"},{"name":"Jason Momoa","imageUrl":"Jason_Momoa.jpg"},{"name":"Charlize Theron","imageUrl":"Charlize_Theron.jpg"},{"name":"Nicole Kidman","imageUrl":"Nicole_Kidman.jpg"},{"name":"Viola Davis","imageUrl":"Viola_Davis.jpg"},{"name":"Daniel Radcliffe","imageUrl":"Daniel_Radcliffe.jpg"},{"name":"Emma Watson","imageUrl":"Emma_Watson.jpg"},{"name":"George Clooney","imageUrl":"George_Clooney.jpg"},{"name":"Halle Berry","imageUrl":"Halle_Berry.jpg"},{"name":"Matt Damon","imageUrl":"Matt_Damon.jpg"},{"name":"Zendaya","imageUrl":"Zendaya.jpg"},{"name":"Demi Lovato","imageUrl":"Demi_Lovato.jpg"},{"name":"Keanu Reeves","imageUrl":"Keanu_Reeves.jpg"},{"name":"Miley Cyrus","imageUrl":"Miley_Cyrus.jpg"},{"name":"Dave Chappelle","imageUrl":"Dave_Chappelle.jpg"},{"name":"Idris Elba","imageUrl":"Idris_Elba.jpg"},{"name":"Matthew McConaughey","imageUrl":"Matthew_McConaughey.jpg"},{"name":"Oscar Isaac","imageUrl":"Oscar_Isaac.jpg"},{"name":"Samuel L. Jackson","imageUrl":"Samuel_L._Jackson.jpg"},{"name":"Seth Rogen","imageUrl":"Seth_Rogen.jpg"},{"name":"Tyler Perry","imageUrl":"Tyler_Perry.jpg"},{"name":"Amy Schumer","imageUrl":"Amy_Schumer.jpg"},{"name":"Brie Larson","imageUrl":"Brie_Larson.jpg"},{"name":"Chadwick Boseman","imageUrl":"Chadwick_Boseman.jpg"},{"name":"Chris Pratt","imageUrl":"Chris_Pratt.jpg"},{"name":"Dakota Johnson","imageUrl":"Dakota_Johnson.jpg"},{"name":"Emily Blunt","imageUrl":"Emily_Blunt.png"},{"name":"Jake Gyllenhaal","imageUrl":"Jake_Gyllenhaal.jpg"},{"name":"Jared Leto","imageUrl":"Jared_Leto.jpg"},{"name":"Jessica Chastain","imageUrl":"Jessica_Chastain.jpg"},{"name":"John Krasinski","imageUrl":"John_Krasinski.png"},{"name":"Julia Roberts","imageUrl":"Julia_Roberts.jpg"},{"name":"Anne Hathaway","imageUrl":"Anne_Hathaway.jpg"},{"name":"Ryan Gosling","imageUrl":"Ryan_Gosling.jpg"},{"name":"Sandra Bullock","imageUrl":"Sandra_Bullock.jpg"},{"name":"Will Ferrell","imageUrl":"Will_Ferrell.jpg"},{"name":"Robert De Niro","imageUrl":"Robert_De_Niro.jpg"},{"name":"Al Pacino","imageUrl":"Al_Pacino.jpg"},{"name":"Meryl Streep","imageUrl":"Meryl_Streep.jpg"},{"name":"Natalie Portman","imageUrl":"Natalie_Portman.jpg"},{"name":"Cate Blanchett","imageUrl":"Cate_Blanchett.jpg"},{"name":"Christian Bale","imageUrl":"Christian_Bale.jpg"},{"name":"Joaquin Phoenix","imageUrl":"Joaquin_Phoenix.jpg"},{"name":"Russell Crowe","imageUrl":"Russell_Crowe.jpg"},{"name":"Kate Winslet","imageUrl":"Kate_Winslet.jpg"},{"name":"Mark Wahlberg","imageUrl":"Mark_Wahlberg.jpg"},{"name":"Hugh Grant","imageUrl":"Hugh_Grant.jpg"},{"name":"Cameron Diaz","imageUrl":"Cameron_Diaz.jpg"},{"name":"Jennifer Garner","imageUrl":"Jennifer_Garner.jpg"},{"name":"Ben Affleck","imageUrl":"Ben_Affleck.jpg"},{"name":"Denzel Washington","imageUrl":"Denzel_Washington.jpg"},{"name":"Eddie Murphy","imageUrl":"Eddie_Murphy.jpg"},{"name":"Jim Carrey","imageUrl":"Jim_Carrey.jpg"},{"name":"Steve Carell","imageUrl":"Steve_Carell.jpg"},{"name":"Julianne Moore","imageUrl":"Julianne_Moore.jpg"},{"name":"Kevin Spacey","imageUrl":"Kevin_Spacey.jpg"},{"name":"Clint Eastwood","imageUrl":"Clint_Eastwood.jpg"},{"name":"Harrison Ford","imageUrl":"Harrison_Ford.jpg"},{"name":"Sigourney Weaver","imageUrl":"Sigourney_Weaver.jpg"},{"name":"Jamie Foxx","imageUrl":"Jamie_Foxx.jpg"},{"name":"Bill Murray","imageUrl":"Bill_Murray.jpg"},{"name":"Mel Gibson","imageUrl":"Mel_Gibson.jpg"},{"name":"Bruce Willis","imageUrl":"Bruce_Willis.jpg"},{"name":"Sean Penn","imageUrl":"Sean_Penn.jpg"},{"name":"Winona Ryder","imageUrl":"Winona_Ryder.jpg"},{"name":"Jack Nicholson","imageUrl":"Jack_Nicholson.jpg"},{"name":"Robin Williams","imageUrl":"Robin_Williams.jpg"},{"name":"Sylvester Stallone","imageUrl":"Sylvester_Stallone.jpg"},{"name":"Arnold Schwarzenegger","imageUrl":"Arnold_Schwarzenegger.jpg"},{"name":"Michelle Pfeiffer","imageUrl":"Michelle_Pfeiffer.jpg"},{"name":"Diane Keaton","imageUrl":"Diane_Keaton.jpg"},{"name":"Glenn Close","imageUrl":"Glenn_Close.jpg"},{"name":"Annette Bening","imageUrl":"Annette_Bening.jpg"},{"name":"Jodie Foster","imageUrl":"Jodie_Foster.jpg"},{"name":"Kirsten Dunst","imageUrl":"Kirsten_Dunst.jpg"},{"name":"Nicolas Cage","imageUrl":"Nicolas_Cage.jpg"},{"name":"John Travolta","imageUrl":"John_Travolta.jpg"},{"name":"Dustin Hoffman","imageUrl":"Dustin_Hoffman.jpg"},{"name":"Richard Gere","imageUrl":"Richard_Gere.jpg"},{"name":"Julia Louis-Dreyfus","imageUrl":"Julia_Louis-Dreyfus.jpg"},{"name":"Michael Douglas","imageUrl":"Michael_Douglas.jpg"},{"name":"Goldie Hawn","imageUrl":"Goldie_Hawn.jpg"},{"name":"Sharon Stone","imageUrl":"Sharon_Stone.jpg"},{"name":"Danny DeVito","imageUrl":"Danny_DeVito.jpg"},{"name":"Steve Martin","imageUrl":"Steve_Martin.jpg"},{"name":"Mickey Rourke","imageUrl":"Mickey_Rourke.jpeg"},{"name":"Woody Harrelson","imageUrl":"Woody_Harrelson.jpg"},{"name":"James Franco","imageUrl":"James_Franco.jpg"}],"animals":[{"name":"African Elephant","imageUrl":"African_Elephant.jpg"},{"name":"Bald Eagle","imageUrl":"Bald_Eagle.jpg"},{"name":"Cheetah","imageUrl":"Cheetah.jpg"},{"name":"Emperor Penguin","imageUrl":"Emperor_Penguin.jpg"},{"name":"Fennec Fox","imageUrl":"Fennec_Fox.jpg"},{"name":"Giraffe","imageUrl":"Giraffe.jpg"},{"name":"Hippopotamus","imageUrl":"Hippopotamus.jpg"},{"name":"Iguana","imageUrl":"Iguana.jpg"},{"name":"Jaguar","imageUrl":"Jaguar.jpg"},{"name":"Koala","imageUrl":"Koala.jpg"},{"name":"Lion","imageUrl":"Lion.jpg"},{"name":"Mongoose","imageUrl":"Mongoose.png"},{"name":"Narwhal","imageUrl":"Narwhal.jpg"},{"name":"Orangutan","imageUrl":"Orangutan.jpg"},{"name":"Panda","imageUrl":"Panda.jpg"},{"name":"Rhinoceros","imageUrl":"Rhinoceros.png"},{"name":"Sloth","imageUrl":"Sloth.jpg"},{"name":"Tiger","imageUrl":"Tiger.jpg"},{"name":"Grizzly Bear","imageUrl":"Grizzly_Bear.jpg"},{"name":"Hammerhead Shark","imageUrl":"Hammerhead_Shark.jpeg"},{"name":"Kangaroo","imageUrl":"Kangaroo.jpg"},{"name":"Leopard","imageUrl":"Leopard.jpg"},{"name":"Meerkat","imageUrl":"Meerkat.jpg"},{"name":"Octopus","imageUrl":"Octopus.jpg"},{"name":"Penguin","imageUrl":"Penguin.png"},{"name":"Sea Turtle","imageUrl":"Sea_Turtle.jpg"},{"name":"Toucan","imageUrl":"Toucan.jpg"},{"name":"Vulture","imageUrl":"Vulture.jpg"},{"name":"Wolverine","imageUrl":"Wolverine.jpg"},{"name":"Zebra","imageUrl":"Zebra.jpg"},{"name":"Armadillo","imageUrl":"Armadillo.jpg"},{"name":"Blue Whale","imageUrl":"Blue_Whale.jpg"},{"name":"Crocodile","imageUrl":"Crocodile.jpg"},{"name":"Deer","imageUrl":"Deer.jpg"},{"name":"Elephant Seal","imageUrl":"Elephant_Seal.jpg"},{"name":"Flamingo","imageUrl":"Flamingo.jpg"},{"name":"Gorilla","imageUrl":"Gorilla.jpg"},{"name":"Heron","imageUrl":"Heron.jpg"},{"name":"Jellyfish","imageUrl":"Jellyfish.jpg"},{"name":"Kingfisher","imageUrl":"Kingfisher.jpg"},{"name":"Llama","imageUrl":"Llama.jpg"},{"name":"Mandrill","imageUrl":"Mandrill.jpg"},{"name":"Ostrich","imageUrl":"Ostrich.jpg"},{"name":"Peacock","imageUrl":"Peacock.jpg"},{"name":"Rattlesnake","imageUrl":"Rattlesnake.jpg"},{"name":"Snow Leopard","imageUrl":"Snow_Leopard.jpg"},{"name":"Tapir","imageUrl":"Tapir.png"},{"name":"Viper","imageUrl":"Viper.jpg"},{"name":"Wolf","imageUrl":"Wolf.jpg"},{"name":"Yak","imageUrl":"Yak.jpg"},{"name":"Albatross","imageUrl":"Albatross.jpg"},{"name":"Bison","imageUrl":"Bison.jpg"},{"name":"Chimpanzee","imageUrl":"Chimpanzee.jpg"},{"name":"Duck","imageUrl":"Duck.jpg"},{"name":"Fox","imageUrl":"Fox.jpg"},{"name":"Goldfish","imageUrl":"Goldfish.jpg"},{"name":"Hawk","imageUrl":"Hawk.jpg"},{"name":"Ibis","imageUrl":"Ibis.jpg"},{"name":"Jackal","imageUrl":"Jackal.jpg"},{"name":"Komodo Dragon","imageUrl":"Komodo_Dragon.jpg"},{"name":"Lemur","imageUrl":"Lemur.jpg"},{"name":"Moose","imageUrl":"Moose.jpg"},{"name":"Otter","imageUrl":"Otter.jpg"},{"name":"Parrot","imageUrl":"Parrot.jpg"},{"name":"Quail","imageUrl":"Quail.jpg"},{"name":"Raccoon","imageUrl":"Raccoon.jpg"},{"name":"Shark","imageUrl":"Shark.jpg"},{"name":"Turtle","imageUrl":"Turtle.jpg"},{"name":"Walrus","imageUrl":"Walrus.jpg"},{"name":"Yellow Warbler","imageUrl":"Yellow_Warbler.jpg"},{"name":"Anaconda","imageUrl":"Anaconda.jpg"},{"name":"Beaver","imageUrl":"Beaver.jpg"},{"name":"Camel","imageUrl":"Camel.jpg"},{"name":"Eagle","imageUrl":"Eagle.jpg"},{"name":"Frog","imageUrl":"Frog.jpg"},{"name":"Gazelle","imageUrl":"Gazelle.jpg"},{"name":"Horse","imageUrl":"Horse.jpg"},{"name":"Impala","imageUrl":"Impala.jpg"},{"name":"Jaguar","imageUrl":"Jaguar.jpg"},{"name":"Lynx","imageUrl":"Lynx.jpg"},{"name":"Manta Ray","imageUrl":"Manta_Ray.jpg"},{"name":"Dog","imageUrl":"Dog.jpg"},{"name":"Owl","imageUrl":"Owl.jpg"},{"name":"Pig","imageUrl":"Pig.jpg"},{"name":"Quokka","imageUrl":"Quokka.jpg"},{"name":"Rabbit","imageUrl":"Rabbit.jpg"},{"name":"Squirrel","imageUrl":"Squirrel.jpg"},{"name":"Tiger Shark","imageUrl":"Tiger_Shark.jpg"},{"name":"Vampire Bat","imageUrl":"Vampire_Bat.jpg"},{"name":"Warthog","imageUrl":"Warthog.jpg"},{"name":"Tuna","imageUrl":"Tuna.png"}],"famousPeople":[{"name":"Albert Einstein","imageUrl":"Albert_Einstein.jpg"},{"name":"Isaac Newton","imageUrl":"Isaac_Newton.jpg"},{"name":"Leonardo da Vinci","imageUrl":"Leonardo_da_Vinci.png"},{"name":"Marie Curie","imageUrl":"Marie_Curie.jpg"},{"name":"William Shakespeare","imageUrl":"William_Shakespeare.jpg"},{"name":"Mozart","imageUrl":"Mozart.jpg"},{"name":"Ludwig van Beethoven","imageUrl":"Ludwig_van_Beethoven.jpg"},{"name":"Socrates","imageUrl":"Socrates.jpg"},{"name":"Julius Caesar","imageUrl":"Julius_Caesar.jpg"},{"name":"Alexander the Great","imageUrl":"Alexander_the_Great.jpg"},{"name":"Napoleon Bonaparte","imageUrl":"Napoleon_Bonaparte.jpg"},{"name":"Adolf Hitler","imageUrl":"Adolf_Hitler.jpg"},{"name":"Genghis Khan","imageUrl":"Genghis_Khan.jpg"},{"name":"Cleopatra","imageUrl":"Cleopatra.jpg"},{"name":"Joan of Arc","imageUrl":"Joan_of_Arc.jpg"},{"name":"Queen Elizabeth I","imageUrl":"Queen_Elizabeth_I.jpg"},{"name":"Thomas Edison","imageUrl":"Thomas_Edison.jpg"},{"name":"Galileo Galilei","imageUrl":"Galileo_Galilei.jpg"},{"name":"Aristotle","imageUrl":"Aristotle.jpg"},{"name":"Plato","imageUrl":"Plato.jpg"},{"name":"Confucius","imageUrl":"Confucius.jpg"},{"name":"Martin Luther King Jr.","imageUrl":"Martin_Luther_King_Jr..jpg"},{"name":"Nelson Mandela","imageUrl":"Nelson_Mandela.jpg"},{"name":"Winston Churchill","imageUrl":"Winston_Churchill.jpg"},{"name":"Mahatma Gandhi","imageUrl":"Mahatma_Gandhi.jpg"},{"name":"Mother Teresa","imageUrl":"Mother_Teresa.jpg"},{"name":"Margaret Thatcher","imageUrl":"Margaret_Thatcher.jpg"},{"name":"Christopher Columbus","imageUrl":"Christopher_Columbus.jpg"},{"name":"Marco Polo","imageUrl":"Marco_Polo.jpg"},{"name":"Vasco da Gama","imageUrl":"Vasco_da_Gama.jpg"},{"name":"Neil Armstrong","imageUrl":"Neil_Armstrong.jpg"},{"name":"Yuri Gagarin","imageUrl":"Yuri_Gagarin.jpg"},{"name":"Charles Darwin","imageUrl":"Charles_Darwin.jpg"},{"name":"Sigmund Freud","imageUrl":"Sigmund_Freud.jpg"},{"name":"Karl Marx","imageUrl":"Karl_Marx.jpg"},{"name":"Vladimir Lenin","imageUrl":"Vladimir_Lenin.jpg"},{"name":"Joseph Stalin","imageUrl":"Joseph_Stalin.jpg"},{"name":"Mao Zedong","imageUrl":"Mao_Zedong.jpg"},{"name":"Abraham Lincoln","imageUrl":"Abraham_Lincoln.jpg"},{"name":"George Washington","imageUrl":"George_Washington.jpg"},{"name":"John F. Kennedy","imageUrl":"John_F._Kennedy.jpg"},{"name":"Franklin D. Roosevelt","imageUrl":"Franklin_D._Roosevelt.jpg"},{"name":"Thomas Jefferson","imageUrl":"Thomas_Jefferson.jpg"},{"name":"Benjamin Franklin","imageUrl":"Benjamin_Franklin.jpg"},{"name":"Alexander Graham Bell","imageUrl":"Alexander_Graham_Bell.jpg"},{"name":"Nikola Tesla","imageUrl":"Nikola_Tesla.jpeg"},{"name":"Steve Jobs","imageUrl":"Steve_Jobs.jpg"},{"name":"Bill Gates","imageUrl":"Bill_Gates.jpg"},{"name":"Henry Ford","imageUrl":"Henry_Ford.jpg"},{"name":"Walt Disney","imageUrl":"Walt_Disney.jpg"},{"name":"Vincent van Gogh","imageUrl":"Vincent_van_Gogh.jpg"},{"name":"Pablo Picasso","imageUrl":"Pablo_Picasso.jpg"},{"name":"Michelangelo","imageUrl":"Michelangelo.jpg"},{"name":"Rembrandt","imageUrl":"Rembrandt.jpg"},{"name":"Andy Warhol","imageUrl":"Andy_Warhol.jpg"},{"name":"Louis Armstrong","imageUrl":"Louis_Armstrong.jpg"},{"name":"Elvis Presley","imageUrl":"Elvis_Presley.jpg"},{"name":"Bob Dylan","imageUrl":"Bob_Dylan.jpg"},{"name":"Michael Jackson","imageUrl":"Michael_Jackson.jpg"},{"name":"Madonna","imageUrl":"Madonna.jpg"},{"name":"Frida Kahlo","imageUrl":"Frida_Kahlo.jpg"},{"name":"Jane Austen","imageUrl":"Jane_Austen.jpg"},{"name":"Charles Dickens","imageUrl":"Charles_Dickens.jpg"},{"name":"J.K. Rowling","imageUrl":"J.K._Rowling.jpg"},{"name":"Stephen Hawking","imageUrl":"Stephen_Hawking.jpg"},{"name":"Homer","imageUrl":"Homer.jpg"},{"name":"Leo Tolstoy","imageUrl":"Leo_Tolstoy.jpg"},{"name":"Johann Sebastian Bach","imageUrl":"Johann_Sebastian_Bach.jpg"},{"name":"Frederic Chopin","imageUrl":"Frederic_Chopin.jpeg"},{"name":"Albert Camus","imageUrl":"Albert_Camus.jpg"},{"name":"Ernest Hemingway","imageUrl":"Ernest_Hemingway.jpg"},{"name":"George Orwell","imageUrl":"George_Orwell.jpg"},{"name":"Virginia Woolf","imageUrl":"Virginia_Woolf.jpg"},{"name":"Mark Twain","imageUrl":"Mark_Twain.jpg"},{"name":"Oscar Wilde","imageUrl":"Oscar_Wilde.jpg"},{"name":"Sigmund Freud","imageUrl":"Sigmund_Freud.jpg"},{"name":"Carl Jung","imageUrl":"Carl_Jung.jpg"},{"name":"Louis Pasteur","imageUrl":"Louis_Pasteur.jpg"},{"name":"Gregor Mendel","imageUrl":"Gregor_Mendel.jpg"},{"name":"Marie Antoinette","imageUrl":"Marie_Antoinette.jpg"},{"name":"Catherine the Great","imageUrl":"Catherine_the_Great.jpg"},{"name":"Queen Victoria","imageUrl":"Queen_Victoria.jpg"},{"name":"Anne Frank","imageUrl":"Anne_Frank.jpg"},{"name":"Rosa Parks","imageUrl":"Rosa_Parks.jpg"},{"name":"Amelia Earhart","imageUrl":"Amelia_Earhart.jpg"},{"name":"Florence Nightingale","imageUrl":"Florence_Nightingale.jpg"},{"name":"Helen Keller","imageUrl":"Helen_Keller.jpg"},{"name":"Eleanor Roosevelt","imageUrl":"Eleanor_Roosevelt.jpg"},{"name":"Coco Chanel","imageUrl":"Coco_Chanel.jpg"},{"name":"Malcolm X","imageUrl":"Malcolm_X.jpg"},{"name":"John Lennon","imageUrl":"John_Lennon.jpg"},{"name":"Che Guevara","imageUrl":"Che_Guevara.jpg"},{"name":"Bruce Lee","imageUrl":"Bruce_Lee.jpg"},{"name":"Marilyn Monroe","imageUrl":"Marilyn_Monroe.jpg"},{"name":"Charlie Chaplin","imageUrl":"Charlie_Chaplin.jpg"},{"name":"Albert Schweitzer","imageUrl":"Albert_Schweitzer.jpg"},{"name":"Alexander Fleming","imageUrl":"Alexander_Fleming.jpg"},{"name":"Enrico Fermi","imageUrl":"Enrico_Fermi.jpg"},{"name":"Alan Turing","imageUrl":"Alan_Turing.jpg"},{"name":"Srinivasa Ramanujan","imageUrl":"Srinivasa_Ramanujan.jpg"},{"name":"Leonhard Euler","imageUrl":"Leonhard_Euler.jpg"},{"name":"James Watt","imageUrl":"James_Watt.jpg"}]}'),B_=JSON.parse('{"life":["amazing","awesome","bright","brave","calm","cheerful","clever","colorful","cozy","curious","dazzling","delight","dreamy","eager","easy","exciting","fancy","fantastic","friendly","funny","gentle","glad","glowing","happy","harmony","hopeful","jolly","joyful","kind","laugh","light","lively","lovely","lucky","magic","merry","mystery","nice","peace","playful","pleasant","proud","quiet","rainy","relax","shiny","silly","simple","smart","smile","smooth","soft","sparkle","special","splendid","springy","sunny","super","sweet","thrill","tidy","tiny","tranquil","warm","wavy","whimsy","wild","wisdom","witty","wonder","yummy","zest","adventure","beauty","bliss","breeze","charm","comfort","courage","dream","ease","energy","freedom","friendship","fun","glory","grace","happiness","harmony","imagination","inspiration","joy","laughter","liberty","love","melody","miracle","mystery","passion","peace","pleasure","pride","serenity","spirit","surprise","unity","victory","vitality","whimsy","wonder","zen","angry","annoying","awful","bad","boring","chaos","clumsy","confused","creepy","cruel","dark","difficult","dirty","dull","embarrassed","fear","fierce","fright","gross","hard","harsh","heavy","jealous","lazy","lonely","mad","mean","messy","mid","miserable","nasty","naughty","noisy","odd","pain","panic","rude","sad","scary","selfish","shy","sick","silly","slow","small","sour","strange","stress","stupid","tense","terrible","tired","trouble","ugly","unhappy","upset","weak","weird","worried","worse","worst","yucky","zero"],"animals":["smelly","funny","weird","smart","majestic","crazy","incredible","favorite","scary","adorable","agile","amazing","angry","beautiful","brave","bright","calm","charming","cheerful","clever","clumsy","colorful","cuddly","curious","cute","daring","dazzling","delicate","elegant","energetic","exciting","fancy","fast","fierce","fluffy","friendly","furry","gentle","giant","graceful","happy","hardy","hungry","jumpy","kind","large","lazy","lively","loud","lovely","loyal","lucky","messy","mighty","mysterious","naughty","noisy","odd","playful","powerful","pretty","proud","quick","quiet","quirky","rare","rough","rowdy","sleek","slimy","slow","small","sneaky","soft","speedy","strong","stunning","sweet","swift","tiny","tough","tricky","ugly","wild","wise","witty","wonderful","young","yummy","zany","overrated","underrated","dumb","lonely","gross","creepy","boring","cold","energy","calm","awkward","bashful","blunt","bold","bossy","brash","busy","careless","cautious","clueless","clumsy","cocky","confident","cowardly","crafty","cranky","crazy","curious","deceitful","delicate","demanding","determined","dirty","dishonest","disloyal","distant","distracted","disturbed","dizzy","dopey","dramatic","dreary","eager","easygoing","eccentric","elusive","emotional","envious","erratic","excitable","fearful","feisty","fickle","fiery","flaky","flashy","foolish","frantic","frightened","frivolous","fussy","glum","grumpy","guilty","gullible","hasty","hazy","heated","helpless","hesitant","hotheaded","icy","idle","impatient","impolite","impulsive","indecisive","indifferent","insecure","insensitive","irritable","jealous","jittery","lazy","lethargic","loud","lousy","lovable","lovely","lukewarm","moody","mysterious","nervous","noisy","obnoxious","odd","ornery","passionate","pathetic","peaceful","peculiar","perky","pesky","picky","playful","pleasant","plucky","polite","pompous","proud","puzzling","quirky","rash","reckless","relaxed","reliable","restless","ridiculous","rude","sassy","scared","scatterbrained","scheming","selfish","sensitive","shaky","shallow","sharp","shifty","shy","silly","sincere","sleepy","sloppy","slow","sly","sneaky","snobby","solemn","somber","sour","spiteful","sprightly","squeamish","stable","stern","stingy","strange","strict","stubborn","stuffy","stupid","sturdy","sulky","superficial","surly","suspicious","sweet","tactful","tame","tardy","tearful","temperamental","tense","terrible","terrific","testy","thoughtful","timid","tired","tolerant","touchy","tranquil","tricky","troublesome","truthful","unpredictable","unruly","unsure","uptight","vain","vibrant","vicious","vigilant","vindictive","violent","vivid","wacky","wary","weak","weary","whimsical","wicked","wild","willful","wise","witty","wonderful","worried","worthless","wretched","young","youthful","zippy"],"famousPeople":["acclaimed","adored","adventurous","ambitious","artistic","awesome","awful","bold","brave","brilliant","captivating","charismatic","charming","clever","compassionate","confident","courageous","creative","daring","dazzling","dedicated","determined","dynamic","elegant","eloquent","eminent","energetic","enigmatic","entertaining","excellent","exceptional","exciting","extraordinary","famous","favorite","fearless","fiery","flamboyant","focused","friendly","funny","generous","genius","genuine","glamorous","graceful","great","heroic","hilarious","honest","honorable","humble","iconic","imaginative","impressive","incredible","influential","innovative","inspiring","intelligent","intense","kind","legendary","lively","loved","loyal","luminous","magnetic","magnificent","majestic","masterful","memorable","motivated","mysterious","notable","original","outstanding","passionate","pioneering","playful","popular","powerful","praised","profound","remarkable","renowned","resilient","respected","revolutionary","rich","sensational","skilled","smart","sophisticated","spectacular","spirited","successful","talented","thoughtful","tough","trailblazing","unique","visionary","vivacious","wicked","wise","witty","wonderful","arrogant","awkward","boastful","boring","bossy","brash","callous","careless","clumsy","controversial","cowardly","cruel","deceitful","demanding","dishonest","disliked","disrespectful","dramatic","dull","egotistical","envious","erratic","fickle","foolish","frivolous","greedy","grumpy","harsh","haughty","hateful","ignorant","immature","impatient","impolite","impulsive","inconsiderate","indecisive","inflexible","insensitive","irrational","irresponsible","jealous","lazy","mean","miserable","moody","narcissistic","nasty","naughty","neglectful","obnoxious","odd","overbearing","overconfident","overcritical","pessimistic","petty","pompous","pretentious","quarrelsome","quick-tempered","rash","reckless","rude","ruthless","sarcastic","self-centered","selfish","shallow","sly","sneaky","snobbish","sour","spiteful","stingy","stubborn","stupid","tactless","thoughtless","tiresome","troublesome","unapproachable","uncooperative","undependable","unfriendly","ungrateful","unhappy","unpleasant","unreliable","unsociable","vain","vengeful","vulgar","weak","wicked","wild","willful","worried","worthless"],"actors":["acclaimed","adored","adventurous","ambitious","artistic","awesome","awful","bold","brave","brilliant","captivating","charismatic","charming","clever","compassionate","confident","courageous","creative","daring","dazzling","dedicated","determined","dynamic","elegant","eloquent","eminent","energetic","enigmatic","entertaining","excellent","exceptional","exciting","extraordinary","famous","favorite","fearless","fiery","flamboyant","focused","friendly","funny","generous","genius","genuine","glamorous","graceful","great","heroic","hilarious","honest","honorable","humble","iconic","imaginative","impressive","incredible","influential","innovative","inspiring","intelligent","intense","kind","legendary","lively","loved","loyal","luminous","magnetic","magnificent","majestic","masterful","memorable","motivated","mysterious","notable","original","outstanding","passionate","pioneering","playful","popular","powerful","praised","profound","remarkable","renowned","resilient","respected","revolutionary","rich","sensational","skilled","smart","sophisticated","spectacular","spirited","successful","talented","thoughtful","tough","trailblazing","unique","visionary","vivacious","wicked","wise","witty","wonderful","arrogant","awkward","boastful","boring","bossy","brash","callous","careless","clumsy","controversial","cowardly","cruel","deceitful","demanding","dishonest","disliked","disrespectful","dramatic","dull","egotistical","envious","erratic","fickle","foolish","frivolous","greedy","grumpy","harsh","haughty","hateful","ignorant","immature","impatient","impolite","impulsive","inconsiderate","indecisive","inflexible","insensitive","irrational","irresponsible","jealous","lazy","mean","miserable","moody","narcissistic","nasty","naughty","neglectful","obnoxious","odd","overbearing","overconfident","overcritical","pessimistic","petty","pompous","pretentious","quarrelsome","quick-tempered","rash","reckless","rude","ruthless","sarcastic","self-centered","selfish","shallow","sly","sneaky","snobbish","sour","spiteful","stingy","stubborn","stupid","tactless","thoughtless","tiresome","troublesome","unapproachable","uncooperative","undependable","unfriendly","ungrateful","unhappy","unpleasant","unreliable","unsociable","vain","vengeful","vulgar","weak","wicked","wild","willful","worried","worthless"],"celebrities":["acclaimed","adored","adventurous","ambitious","artistic","awesome","awful","bold","brave","brilliant","captivating","charismatic","charming","clever","compassionate","confident","courageous","creative","daring","dazzling","dedicated","determined","dynamic","elegant","eloquent","eminent","energetic","enigmatic","entertaining","excellent","exceptional","exciting","extraordinary","famous","favorite","fearless","fiery","flamboyant","focused","friendly","funny","generous","genius","genuine","glamorous","graceful","great","heroic","hilarious","honest","honorable","humble","iconic","imaginative","impressive","incredible","influential","innovative","inspiring","intelligent","intense","kind","legendary","lively","loved","loyal","luminous","magnetic","magnificent","majestic","masterful","memorable","motivated","mysterious","notable","original","outstanding","passionate","pioneering","playful","popular","powerful","praised","profound","remarkable","renowned","resilient","respected","revolutionary","rich","sensational","skilled","smart","sophisticated","spectacular","spirited","successful","talented","thoughtful","tough","trailblazing","unique","visionary","vivacious","wicked","wise","witty","wonderful","arrogant","awkward","boastful","boring","bossy","brash","callous","careless","clumsy","controversial","cowardly","cruel","deceitful","demanding","dishonest","disliked","disrespectful","dramatic","dull","egotistical","envious","erratic","fickle","foolish","frivolous","greedy","grumpy","harsh","haughty","hateful","ignorant","immature","impatient","impolite","impulsive","inconsiderate","indecisive","inflexible","insensitive","irrational","irresponsible","jealous","lazy","mean","miserable","moody","narcissistic","nasty","naughty","neglectful","obnoxious","odd","overbearing","overconfident","overcritical","pessimistic","petty","pompous","pretentious","quarrelsome","quick-tempered","rash","reckless","rude","ruthless","sarcastic","self-centered","selfish","shallow","sly","sneaky","snobbish","sour","spiteful","stingy","stubborn","stupid","tactless","thoughtless","tiresome","troublesome","unapproachable","uncooperative","undependable","unfriendly","ungrateful","unhappy","unpleasant","unreliable","unsociable","vain","vengeful","vulgar","weak","wicked","wild","willful","worried","worthless"],"outofwords":["abandonment","abominate","abominated","absolving","accidents","acquaints","adjusters","administers","adventurous","advertisers","agnostic","alarmingly","albatrosses","alembics","alteration","ambulated","anapestic","anchorwoman","anchorwomen","anomalously","antelopes","antiheroes","apartheid","apocalyptic","apparitions","appointive","appreciates","archdukes","artichokes","asteroids","authorizing","autograph","backbones","backdrops","backfired","bacterium","bandmaster","barcarolles","bashfully","bayonetting","bereavement","bewhiskered","binocular","biofeedback","birthrates","blackthorn","blacktopped","bleating","blockers","blowhard","bodacious","bondages","bowdlerized","brambliest","breadfruit","breakouts","breakups","breathiest","breathless","brightens","budgetary","bullhorns","buncombes","buoyancies","cadaverous","calendering","calumets","candelabras","cardinally","carpooling","castigated","cataloguers","caterwauled","caulkers","ceremonials","chainsawed","chairlifts","chalkboards","chambrays","chumminess","citizenry","citronella","clangour","clarinet","coagulators","cognizances","collations","columnist","committals","complexity","conceivable","conciliate","condensing","confidences","conflations","confutes","consensual","consolatory","constable","constrained","constraints","consulship","contemplate","controverts","conversing","copulations","cordages","corianders","corruptible","corrupting","coursing","coxswains","crackdowns","crediting","crenelation","critiqued","crucifying","crustacean","daredevils","datelines","daughterly","deadbolts","deadlocking","debuting","decorously","dedication","defaulters","delightful","depletion","deregulate","destructive","detraction","deuteriums","developers","disassemble","dispatched","dispersion","disrespect","disruption","distraction","downhills","draftings","drawbridges","duodecimal","duplicator","dwarfing","dynamiters","dynastic","dysenteries","economizes","egocentric","eliminating","embodying","embowering","emendations","ephedrines","epistolary","eruditely","eruptions","estimators","euphoric","eventfully","excavating","excerpting","execution","exonerates","exorcizes","expropriate","extravagant","extruding","facetting","facilitates","facsimiled","fatherly","fertilizes","fieldworker","flagstones","flourish","floweriest","fluorescent","folksingers","forecourts","forehands","forelocks","forgiven","foxtrotting","francium","freakiest","freakout","gallivants","genealogies","geography","geopolitics","godchildren","gondoliers","gormandized","grandest","granulation","greenmail","grievance","grubbiness","grumblers","halogens","handspring","handwoven","harassments","harbingers","harvested","heuristic","hobnailing","holidayed","homburgs","honeycombs","honorarily","hotheadedly","hydrosphere","idolaters","immoderate","impetigos","implanting","importance","imprinted","impulsing","impulsions","inauthentic","incapable","indirectly","inductees","inescapable","inexpiable","infamously","inquietudes","insatiably","insinuators","integrates","interface","interpose","interrupted","interviews","intolerant","intoxicates","irreducible","jackrabbit","jinricksha","jinrikishas","journalisms","kilobyte","knackwursts","landholding","landlubbers","languorous","larcenies","lassitudes","launching","lawbreakers","legionary","lesbianisms","lethargic","lexicons","libertarian","lifeguard","lipreadings","liquidating","logicians","loincloths","luxuriates","magistrate","magnetises","maidenly","makeovers","mangrove","manicure","marionette","massacring","masterminds","mastication","matricide","maundering","meanwhiles","melodious","mercerizing","metricizing","mindfully","mindfulness","miniatures","minstrels","miscalling","misconduct","miscounting","moderators","momentarily","monarchs","monastics","monstrances","moralities","motherless","motorizes","motorizing","multiplied","muscatel","mushroomed","mystified","neoplasms","neurologist","nobilities","nonburnable","northbound","notarized","obliques","obsolescing","occidental","oncologists","orchestras","outboasting","outlaying","overextends","overnight","overrunning","overtaking","overtaxes","overthrows","pachyderm","pamphleting","paperweight","parleying","pastured","patrolwomen","perpetually","persecution","personal","personally","philandered","pinheads","planters","platooning","playacted","playhouse","plunders","plutocrats","pollutants","postcard","practises","preassigned","predicament","predictors","preheating","prejudicial","privatize","privileged","prolonged","promptitude","propellents","prophesied","protrusions","punctuation","punishable","purporting","pushovers","quadrants","querying","rabidnesses","rampancies","rancidities","ravished","readmitting","realization","reallocated","reanalyzed","recaptured","rechristen","reckoning","recoloring","redissolves","reelecting","reemploying","reflexively","reforming","regulators","reinspects","remounted","removable","renovators","repaving","repletion","replicated","reprovingly","resembling","restyling","revisionism","revitalized","roadrunners","routinize","sacramental","sandboxes","scavenger","schmaltzes","schnitzels","scrofulas","scrumptious","sculpturing","secularizes","sedimentary","segregating","shackling","shafting","shapeliness","shirtfronts","shortchange","shortening","shutdown","silverware","simulator","skateboards","skewering","skulduggery","sleepwalker","smothering","snuffliest","songbirds","soundproofs","soundtracks","sousaphone","southwester","specking","spherical","splashdown","spoliations","sputtering","squashing","stabling","staggering","stammering","stipulating","stockier","stonewashed","strangle","streamline","stymieing","subliming","subsidence","substation","sunbathers","sundering","surplussing","sweatshirts","syllabifies","syndrome","tapelines","tapeworm","tarmacking","tarpaulins","temporizes","terrariums","thereupon","threshold","throwaways","thwackers","tourmaline","trackless","transmitter","treadmills","trefoils","turnbuckle","turnstile","tyrannize","ululations","unbiased","uncanniest","uncloaks","undershirt","unexampled","unfairest","unpleasant","unreformed","unsightly","unspoiled","vaccinated","vaccinates","vanquisher","varietals","verbosity","vigilante","vindication","vintages","vituperates","voracious","vulgarizer","wainscots","wastelands","weatherize","wheelchair","whistled","whizzbang","wonderingly","worktable","worshipper","yardsticks","yeomanries","yeshivoth","zealousness"]}'),V_=["#f8522e","#f8893a","#f7c045","#abc32f","#5ec618","#368d6d","#0d54c1","#4048aa","#733c93","#eae1a9","#c25469","#2d505d"];let q_=[],$_="",W_=[];function H_(e){const t=[];for(let n=0;n<32;n++){let n=!1;for(;!n;){const r=Math.floor(Math.random()*e);t.includes(r)||(t.push(r),n=!0)}}return t}function K_(e,t){switch($_=t,q_=[],t){case"celebrities":case"actors":case"famousPeople":for(let n=0;n<32;n++){const r=e[n],i=z_[t][r].name,s=`decks/${t}/${z_[t][r].imageUrl}`;q_.push({name:i,imageUrl:s})}break;case"original":case"animals":case"life":for(let n=0;n<32;n++){const r=`decks/${t}/${`${t}-${e[n]}.jpg`}`;q_.push({name:"",imageUrl:r})}}return q_}function G_(e,t){return(10-(e+t))*(10-Math.abs(e-t))}function Q_(e,t){let n=0;for(let r=0;r<e.length;r++){const i=e[r];i===t[r]?n+=G_(r,r):-1!==t.indexOf(i)&&(n+=G_(r,t.indexOf(i)))}return n}function J_(e){let t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}function Y_(){return{3:"Short",5:"Medium",10:"Long"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:3]}function X_(){return{life:"Life",original:"Original",actors:"Actors",celebrities:"Celebrities",famousPeople:"Famous People",animals:"Animals",custom:"Custom"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"life"]}function Z_(){return{custom:"Custom",wordList:"Word List"}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"custom"]}function ex(e){return e=e.replace("#",""),(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3>=128?"rgb(31,41,55)":"rgb(243, 244, 246)"}var tx=n(579);const nx=(0,s.createContext)({gameRef:null,currentPlayerName:"",currentPlayerId:null,cards:[],setGameRef:()=>{},setCurrentPlayerName:()=>{},setCurrentPlayerId:()=>{},setCards:()=>{}}),rx=e=>{let{children:t}=e;const[n,r]=(0,s.useState)((()=>localStorage.getItem("currentPlayerName")||"")),[i,o]=(0,s.useState)(null),[a,l]=(0,s.useState)(null),[u,c]=(0,s.useState)([]),h={gameRef:a,currentPlayerName:n,currentPlayerId:i,cards:u,setGameRef:l,setCurrentPlayerName:e=>{r(e),(e=>{localStorage.setItem("currentPlayerName",e)})(e)},setCurrentPlayerId:o,setCards:c};return(0,tx.jsx)(nx.Provider,{value:h,children:t})},ix=e=>{let{children:t,onClick:n,className:r,style:i,disabled:s=!1,type:o="button",buttonType:a="primary"}=e,l="";return l="secondary"===a?"bg-gray-800 border border-gray-300 text-gray-300 text-xl":"large"===a?"bg-green-600 text-white text-3xl":"bg-green-600 text-white text-xl",s&&(l+=" opacity-50 cursor-not-allowed"),(0,tx.jsx)("button",{type:o,onClick:n,style:{...i,userSelect:"none"},className:`font-bold py-2 px-4 rounded-lg shadow-lg ${l} ${r}`,disabled:s,children:t})},sx=e=>{let{className:t,word:n,round:r,name:i,gameCode:s}=e;return(0,tx.jsx)("nav",{className:"bg-gray-800 text-gray-300 border-b border-gray-500",children:(0,tx.jsxs)("div",{className:`mx-auto px-4 py-3 flex justify-between items-end ${t}`,children:[(0,tx.jsx)(je,{to:"/",children:(0,tx.jsx)("h1",{className:"text-xl font-bold",children:"Incommon"})}),s&&(0,tx.jsx)("div",{children:(0,tx.jsx)("p",{className:"text-xl",children:s})}),n&&(0,tx.jsx)("div",{children:(0,tx.jsx)("p",{className:"text-xl",children:n})}),r&&(0,tx.jsx)("div",{children:(0,tx.jsxs)("p",{className:"text-xl",children:["Round ",r]})}),i&&(0,tx.jsx)("div",{children:(0,tx.jsx)("p",{className:"text-xl",children:i})})]})})};const ox=function(){const{setCurrentPlayerName:e,setCurrentPlayerId:t,setGameRef:n}=(0,s.useContext)(nx);(0,s.useEffect)((()=>{const t=localStorage.getItem("currentPlayerName");t&&e(t)}),[e]);const[r,i]=(0,s.useState)(""),[o,a]=(0,s.useState)(""),[l,u]=(0,s.useState)("Incommon"),c=re(),h={gameState:"setup",gameType:l};return(0,tx.jsxs)("div",{className:"",children:[(0,tx.jsx)(sx,{className:"max-w-screen-md"}),(0,tx.jsxs)("div",{className:"max-w-screen-md mx-auto text-gray-100",children:[(0,tx.jsxs)("div",{className:"bg-gray-800 mx-4 p-4 mt-4 rounded-lg",children:[(0,tx.jsxs)("div",{className:"mb-4",children:[(0,tx.jsx)("div",{className:"text-gray-300 text-2xl font-bold mb-2",children:"Select Game Type"}),(0,tx.jsxs)("div",{className:"flex items-center justify-evenly",children:[(0,tx.jsxs)("div",{className:"flex items-center mr-4",children:[(0,tx.jsx)("input",{type:"radio",id:"incommon",name:"gameType",value:"Incommon",checked:"Incommon"===l,onChange:e=>u(e.target.value),className:"mr-2"}),(0,tx.jsx)("label",{htmlFor:"incommon",className:"text-gray-300 text-2xl",children:"Incommon"})]}),(0,tx.jsxs)("div",{className:"flex items-center",children:[(0,tx.jsx)("input",{type:"radio",id:"outofwords",name:"gameType",value:"Out of Words, Words",checked:"Out of Words, Words"===l,onChange:e=>u(e.target.value),className:"mr-2"}),(0,tx.jsx)("label",{htmlFor:"outofwords",className:"text-gray-300 text-2xl",children:"Out of Words, Words"})]})]})]}),(0,tx.jsx)(ix,{onClick:async()=>{const e=await wm(mp(F_,"games"),h);n(e);e.id;const t=function(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";let t="";for(let n=0;n<4;n++)t+=e[Math.floor(26*Math.random())];return t}();await bm(e,{shortId:t}),c(`/host/${t}`)},buttonType:"large",className:"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded",children:"Create Game"})]}),(0,tx.jsxs)("div",{className:"text-2xl bg-gray-800 mx-4 p-4 mt-4 rounded-lg",children:[(0,tx.jsxs)("div",{className:"flex",children:[(0,tx.jsxs)("div",{className:"mb-4 w-2/3",children:[(0,tx.jsx)("label",{htmlFor:"playerName",className:"block text-gray-300 text-2xl font-bold mb-2",children:"Your Name"}),(0,tx.jsx)("input",{type:"text",id:"playerName",value:r,onChange:e=>{return t=e.target.value,void i(t.slice(0,11).trim());var t},className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-200 leading-tight focus:outline-none focus:shadow-outline bg-gray-800 text-gray-300"})]}),(0,tx.jsxs)("div",{className:"ml-4 mb-4 w-1/3",children:[(0,tx.jsx)("label",{htmlFor:"shortId",className:"block text-gray-300 text-2xl font-bold mb-2",children:"Game ID"}),(0,tx.jsx)("input",{type:"text",id:"shortId",value:o,onChange:e=>{return t=e.target.value,void a(t.toUpperCase().slice(0,4).trim());var t},className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-200 leading-tight focus:outline-none focus:shadow-outline bg-gray-800 text-gray-300"})]})]}),(0,tx.jsx)(ix,{onClick:async()=>{if(!r||!o)return void alert("Please enter your name and game ID.");e(r);const i=em(mp(F_,"games"),nm("shortId","==",o));await vm(i).then((e=>{if(1===e.size){const i=e.docs[0].id,s=gp(F_,"games",i);n(s);wm(mp(s,"players"),{name:r,gameScore:0,roundScore:0,chosenCards:[],connections:{},joinedAt:new Mp("serverTimestamp")}).then((e=>{t(e.id),c(`/player/${o}`)})).catch((e=>{console.error(e)}))}else alert("Invalid game ID.")}))},buttonType:"large",className:"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded",children:"Join Game"})]})]})]})},ax=e=>{let{className:t}=e;const[n,r]=(0,s.useState)(!1);return(0,tx.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>{r(!n)},children:[(0,tx.jsxs)("div",{className:"relative",children:[(0,tx.jsx)("input",{type:"checkbox",className:"sr-only",checked:n,readOnly:!0}),(0,tx.jsx)("div",{className:"block w-14 h-8 rounded-full transition "+(n?"bg-green-500":"bg-gray-600")}),(0,tx.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition",style:{transform:n?"translateX(100%)":"none"}})]}),(0,tx.jsx)("div",{className:`ml-3 ${t}`,children:n?"Sounds On":"Sounds Off"})]})};function lx(){}function ux(e){return null==e?lx:function(){return this.querySelector(e)}}function cx(){return[]}function hx(e){return null==e?cx:function(){return this.querySelectorAll(e)}}function dx(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function fx(e){return function(){return this.matches(e)}}function px(e){return function(t){return t.matches(e)}}var mx=Array.prototype.find;function gx(){return this.firstElementChild}var yx=Array.prototype.filter;function vx(){return Array.from(this.children)}function bx(e){return new Array(e.length)}function wx(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function _x(e,t,n,r,i,s){for(var o,a=0,l=t.length,u=s.length;a<u;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new wx(e,s[a]);for(;a<l;++a)(o=t[a])&&(i[a]=o)}function xx(e,t,n,r,i,s,o){var a,l,u,c=new Map,h=t.length,d=s.length,f=new Array(h);for(a=0;a<h;++a)(l=t[a])&&(f[a]=u=o.call(l,l.__data__,a,t)+"",c.has(u)?i[a]=l:c.set(u,l));for(a=0;a<d;++a)u=o.call(e,s[a],a,s)+"",(l=c.get(u))?(r[a]=l,l.__data__=s[a],c.delete(u)):n[a]=new wx(e,s[a]);for(a=0;a<h;++a)(l=t[a])&&c.get(f[a])===l&&(i[a]=l)}function Sx(e){return e.__data__}function kx(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Cx(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}wx.prototype={constructor:wx,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Ex="http://www.w3.org/1999/xhtml";const Tx={svg:"http://www.w3.org/2000/svg",xhtml:Ex,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nx(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Tx.hasOwnProperty(t)?{space:Tx[t],local:e}:e}function Ix(e){return function(){this.removeAttribute(e)}}function jx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ax(e,t){return function(){this.setAttribute(e,t)}}function Rx(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Px(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Dx(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Mx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ox(e){return function(){this.style.removeProperty(e)}}function Lx(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ux(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Fx(e,t){return e.style.getPropertyValue(t)||Mx(e).getComputedStyle(e,null).getPropertyValue(t)}function zx(e){return function(){delete this[e]}}function Bx(e,t){return function(){this[e]=t}}function Vx(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function qx(e){return e.trim().split(/^|\s+/)}function $x(e){return e.classList||new Wx(e)}function Wx(e){this._node=e,this._names=qx(e.getAttribute("class")||"")}function Hx(e,t){for(var n=$x(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Kx(e,t){for(var n=$x(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Gx(e){return function(){Hx(this,e)}}function Qx(e){return function(){Kx(this,e)}}function Jx(e,t){return function(){(t.apply(this,arguments)?Hx:Kx)(this,e)}}function Yx(){this.textContent=""}function Xx(e){return function(){this.textContent=e}}function Zx(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function eS(){this.innerHTML=""}function tS(e){return function(){this.innerHTML=e}}function nS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function rS(){this.nextSibling&&this.parentNode.appendChild(this)}function iS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sS(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ex&&t.documentElement.namespaceURI===Ex?t.createElement(e):t.createElementNS(n,e)}}function oS(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function aS(e){var t=Nx(e);return(t.local?oS:sS)(t)}function lS(){return null}function uS(){var e=this.parentNode;e&&e.removeChild(this)}function cS(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hS(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dS(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,s=t.length;r<s;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function fS(e,t,n){return function(){var r,i=this.__on,s=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),void(r.value=t);this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function pS(e,t,n){var r=Mx(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function mS(e,t){return function(){return pS(this,e,t)}}function gS(e,t){return function(){return pS(this,e,t.apply(this,arguments))}}Wx.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var yS=[null];function vS(e,t){this._groups=e,this._parents=t}function bS(){return new vS([[document.documentElement]],yS)}vS.prototype=bS.prototype={constructor:vS,select:function(e){"function"!==typeof e&&(e=ux(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=t[i],l=a.length,u=r[i]=new Array(l),c=0;c<l;++c)(s=a[c])&&(o=e.call(s,s.__data__,c,a))&&("__data__"in s&&(o.__data__=s.__data__),u[c]=o);return new vS(r,this._parents)},selectAll:function(e){e="function"===typeof e?dx(e):hx(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o,a=t[s],l=a.length,u=0;u<l;++u)(o=a[u])&&(r.push(e.call(o,o.__data__,u,a)),i.push(o));return new vS(r,i)},selectChild:function(e){return this.select(null==e?gx:function(e){return function(){return mx.call(this.children,e)}}("function"===typeof e?e:px(e)))},selectChildren:function(e){return this.selectAll(null==e?vx:function(e){return function(){return yx.call(this.children,e)}}("function"===typeof e?e:px(e)))},filter:function(e){"function"!==typeof e&&(e=fx(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s,o=t[i],a=o.length,l=r[i]=[],u=0;u<a;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&l.push(s);return new vS(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Sx);var n=t?xx:_x,r=this._parents,i=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],h=i[u],d=h.length,f=kx(e.call(c,c&&c.__data__,u,r)),p=f.length,m=a[u]=new Array(p),g=o[u]=new Array(p);n(c,h,m,g,l[u]=new Array(d),f,t);for(var y,v,b=0,w=0;b<p;++b)if(y=m[b]){for(b>=w&&(w=b+1);!(v=g[w])&&++w<p;);y._next=v||null}}return(o=new vS(o,r))._enter=a,o._exit=l,o},enter:function(){return new vS(this._enter||this._groups.map(bx),this._parents)},exit:function(){return new vS(this._exit||this._groups.map(bx),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,s=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u,c=n[l],h=r[l],d=c.length,f=a[l]=new Array(d),p=0;p<d;++p)(u=c[p]||h[p])&&(f[p]=u);for(;l<i;++l)a[l]=n[l];return new vS(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],s=i.length-1,o=i[s];--s>=0;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Cx);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o,a=n[s],l=a.length,u=i[s]=new Array(l),c=0;c<l;++c)(o=a[c])&&(u[c]=o);u.sort(t)}return new vS(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,s=t[n],o=0,a=s.length;o<a;++o)(i=s[o])&&e.call(i,i.__data__,o,s);return this},attr:function(e,t){var n=Nx(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?jx:Ix:"function"===typeof t?n.local?Dx:Px:n.local?Rx:Ax)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Ox:"function"===typeof t?Ux:Lx)(e,t,null==n?"":n)):Fx(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?zx:"function"===typeof t?Vx:Bx)(e,t)):this.node()[e]},classed:function(e,t){var n=qx(e+"");if(arguments.length<2){for(var r=$x(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?Jx:t?Gx:Qx)(n,t))},text:function(e){return arguments.length?this.each(null==e?Yx:("function"===typeof e?Zx:Xx)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?eS:("function"===typeof e?nS:tS)(e)):this.node().innerHTML},raise:function(){return this.each(rS)},lower:function(){return this.each(iS)},append:function(e){var t="function"===typeof e?e:aS(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"===typeof e?e:aS(e),r=null==t?lS:"function"===typeof t?t:ux(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(uS)},clone:function(e){return this.select(e?hS:cS)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,s=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),o=s.length;if(!(arguments.length<2)){for(a=t?fS:dS,r=0;r<o;++r)this.each(a(s[r],t,n));return this}var a=this.node().__on;if(a)for(var l,u=0,c=a.length;u<c;++u)for(r=0,l=a[u];r<o;++r)if((i=s[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?gS:mS)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],s=0,o=i.length;s<o;++s)(r=i[s])&&(yield r)}};const wS=bS;var _S={value:()=>{}};function xS(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new SS(r)}function SS(e){this._=e}function kS(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function CS(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=_S,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}SS.prototype=xS.prototype={constructor:SS,on:function(e,t){var n,r,i=this._,s=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),o=-1,a=s.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=s[o]).type)i[n]=CS(i[n],e.name,t);else if(null==t)for(n in i)i[n]=CS(i[n],e.name,null);return this}for(;++o<a;)if((n=(e=s[o]).type)&&(n=kS(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new SS(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=0,n=(r=this._[e]).length;s<n;++s)r[s].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};const ES=xS;var TS,NS,IS=0,jS=0,AS=0,RS=0,PS=0,DS=0,MS="object"===typeof performance&&performance.now?performance:Date,OS="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function LS(){return PS||(OS(US),PS=MS.now()+DS)}function US(){PS=0}function FS(){this._call=this._time=this._next=null}function zS(e,t,n){var r=new FS;return r.restart(e,t,n),r}function BS(){PS=(RS=MS.now())+DS,IS=jS=0;try{!function(){LS(),++IS;for(var e,t=TS;t;)(e=PS-t._time)>=0&&t._call.call(void 0,e),t=t._next;--IS}()}finally{IS=0,function(){var e,t,n=TS,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:TS=t);NS=e,qS(r)}(),PS=0}}function VS(){var e=MS.now(),t=e-RS;t>1e3&&(DS-=t,RS=e)}function qS(e){IS||(jS&&(jS=clearTimeout(jS)),e-PS>24?(e<1/0&&(jS=setTimeout(BS,e-MS.now()-DS)),AS&&(AS=clearInterval(AS))):(AS||(RS=MS.now(),AS=setInterval(VS,1e3)),IS=1,OS(BS)))}function $S(e,t,n){var r=new FS;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}FS.prototype=zS.prototype={constructor:FS,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?LS():+n)+(null==t?0:+t),this._next||NS===this||(NS?NS._next=this:TS=this,NS=this),this._call=e,this._time=n,qS()},stop:function(){this._call&&(this._call=null,this._time=1/0,qS())}};var WS=ES("start","end","cancel","interrupt"),HS=[];function KS(e,t,n,r,i,s){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function s(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(s){var u,c,h,d;if(1!==n.state)return l();for(u in i)if((d=i[u]).name===n.name){if(3===d.state)return $S(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[u]):+u<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[u])}if($S((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(s))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(d=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),s=-1,o=r.length;++s<o;)r[s].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=zS(s,0,n.time)}(e,n,{name:t,index:r,group:i,on:WS,tween:HS,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function GS(e,t){var n=JS(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function QS(e,t){var n=JS(e,t);if(n.state>3)throw new Error("too late; already running");return n}function JS(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function YS(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var XS,ZS=180/Math.PI,ek={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tk(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ZS,skewX:Math.atan(l)*ZS,scaleX:o,scaleY:a}}function nk(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(s,o){var a=[],l=[];return s=e(s),o=e(o),function(e,r,i,s,o,a){if(e!==i||r!==s){var l=o.push("translate(",null,t,null,n);a.push({i:l-4,x:YS(e,i)},{i:l-2,x:YS(r,s)})}else(i||s)&&o.push("translate("+i+t+s+n)}(s.translateX,s.translateY,o.translateX,o.translateY,a,l),function(e,t,n,s){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),s.push({i:n.push(i(n)+"rotate(",null,r)-2,x:YS(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(s.rotate,o.rotate,a,l),function(e,t,n,s){e!==t?s.push({i:n.push(i(n)+"skewX(",null,r)-2,x:YS(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(s.skewX,o.skewX,a,l),function(e,t,n,r,s,o){if(e!==n||t!==r){var a=s.push(i(s)+"scale(",null,",",null,")");o.push({i:a-4,x:YS(e,n)},{i:a-2,x:YS(t,r)})}else 1===n&&1===r||s.push(i(s)+"scale("+n+","+r+")")}(s.scaleX,s.scaleY,o.scaleX,o.scaleY,a,l),s=o=null,function(e){for(var t,n=-1,r=l.length;++n<r;)a[(t=l[n]).i]=t.x(e);return a.join("")}}}var rk=nk((function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ek:tk(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),ik=nk((function(e){return null==e?ek:(XS||(XS=document.createElementNS("http://www.w3.org/2000/svg","g")),XS.setAttribute("transform",e),(e=XS.transform.baseVal.consolidate())?tk((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):ek)}),", ",")",")");function sk(e,t){var n,r;return function(){var i=QS(this,e),s=i.tween;if(s!==n)for(var o=0,a=(r=n=s).length;o<a;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}function ok(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var s=QS(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function ak(e,t,n){var r=e._id;return e.each((function(){var e=QS(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return JS(e,r).value[t]}}function lk(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function uk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ck(){}var hk=.7,dk=1/hk,fk="\\s*([+-]?\\d+)\\s*",pk="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mk="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gk=/^#([0-9a-f]{3,8})$/,yk=new RegExp(`^rgb\\(${fk},${fk},${fk}\\)$`),vk=new RegExp(`^rgb\\(${mk},${mk},${mk}\\)$`),bk=new RegExp(`^rgba\\(${fk},${fk},${fk},${pk}\\)$`),wk=new RegExp(`^rgba\\(${mk},${mk},${mk},${pk}\\)$`),_k=new RegExp(`^hsl\\(${pk},${mk},${mk}\\)$`),xk=new RegExp(`^hsla\\(${pk},${mk},${mk},${pk}\\)$`),Sk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function kk(){return this.rgb().formatHex()}function Ck(){return this.rgb().formatRgb()}function Ek(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=gk.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Tk(t):3===n?new jk(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Nk(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Nk(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=yk.exec(e))?new jk(t[1],t[2],t[3],1):(t=vk.exec(e))?new jk(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=bk.exec(e))?Nk(t[1],t[2],t[3],t[4]):(t=wk.exec(e))?Nk(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=_k.exec(e))?Ok(t[1],t[2]/100,t[3]/100,1):(t=xk.exec(e))?Ok(t[1],t[2]/100,t[3]/100,t[4]):Sk.hasOwnProperty(e)?Tk(Sk[e]):"transparent"===e?new jk(NaN,NaN,NaN,0):null}function Tk(e){return new jk(e>>16&255,e>>8&255,255&e,1)}function Nk(e,t,n,r){return r<=0&&(e=t=n=NaN),new jk(e,t,n,r)}function Ik(e,t,n,r){return 1===arguments.length?((i=e)instanceof ck||(i=Ek(i)),i?new jk((i=i.rgb()).r,i.g,i.b,i.opacity):new jk):new jk(e,t,n,null==r?1:r);var i}function jk(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ak(){return`#${Mk(this.r)}${Mk(this.g)}${Mk(this.b)}`}function Rk(){const e=Pk(this.opacity);return`${1===e?"rgb(":"rgba("}${Dk(this.r)}, ${Dk(this.g)}, ${Dk(this.b)}${1===e?")":`, ${e})`}`}function Pk(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dk(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mk(e){return((e=Dk(e))<16?"0":"")+e.toString(16)}function Ok(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Uk(e,t,n,r)}function Lk(e){if(e instanceof Uk)return new Uk(e.h,e.s,e.l,e.opacity);if(e instanceof ck||(e=Ek(e)),!e)return new Uk;if(e instanceof Uk)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(o=t===s?(n-r)/a+6*(n<r):n===s?(r-t)/a+2:(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Uk(o,a,l,e.opacity)}function Uk(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Fk(e){return(e=(e||0)%360)<0?e+360:e}function zk(e){return Math.max(0,Math.min(1,e||0))}function Bk(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Vk(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}lk(ck,Ek,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kk,formatHex:kk,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Lk(this).formatHsl()},formatRgb:Ck,toString:Ck}),lk(jk,Ik,uk(ck,{brighter(e){return e=null==e?dk:Math.pow(dk,e),new jk(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?hk:Math.pow(hk,e),new jk(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jk(Dk(this.r),Dk(this.g),Dk(this.b),Pk(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ak,formatHex:Ak,formatHex8:function(){return`#${Mk(this.r)}${Mk(this.g)}${Mk(this.b)}${Mk(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Rk,toString:Rk})),lk(Uk,(function(e,t,n,r){return 1===arguments.length?Lk(e):new Uk(e,t,n,null==r?1:r)}),uk(ck,{brighter(e){return e=null==e?dk:Math.pow(dk,e),new Uk(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?hk:Math.pow(hk,e),new Uk(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new jk(Bk(e>=240?e-240:e+120,i,r),Bk(e,i,r),Bk(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Uk(Fk(this.h),zk(this.s),zk(this.l),Pk(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Pk(this.opacity);return`${1===e?"hsl(":"hsla("}${Fk(this.h)}, ${100*zk(this.s)}%, ${100*zk(this.l)}%${1===e?")":`, ${e})`}`}}));const qk=e=>()=>e;function $k(e,t){return function(n){return e+n*t}}function Wk(e){return 1===(e=+e)?Hk:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):qk(isNaN(t)?n:t)}}function Hk(e,t){var n=t-e;return n?$k(e,n):qk(isNaN(e)?t:e)}const Kk=function e(t){var n=Wk(t);function r(e,t){var r=n((e=Ik(e)).r,(t=Ik(t)).r),i=n(e.g,t.g),s=n(e.b,t.b),o=Hk(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function Gk(e){return function(t){var n,r,i=t.length,s=new Array(i),o=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=Ik(t[n]),s[n]=r.r||0,o[n]=r.g||0,a[n]=r.b||0;return s=e(s),o=e(o),a=e(a),r.opacity=1,function(e){return r.r=s(e),r.g=o(e),r.b=a(e),r+""}}}Gk((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return Vk((n-r/t)*t,o,i,s,a)}})),Gk((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return Vk((n-r/t)*t,i,s,o,a)}}));var Qk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jk=new RegExp(Qk.source,"g");function Yk(e,t){var n,r,i,s=Qk.lastIndex=Jk.lastIndex=0,o=-1,a=[],l=[];for(e+="",t+="";(n=Qk.exec(e))&&(r=Jk.exec(t));)(i=r.index)>s&&(i=t.slice(s,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:YS(n,r)})),s=Jk.lastIndex;return s<t.length&&(i=t.slice(s),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}function Xk(e,t){var n;return("number"===typeof t?YS:t instanceof Ek?Kk:(n=Ek(t))?(t=n,Kk):Yk)(e,t)}function Zk(e){return function(){this.removeAttribute(e)}}function eC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tC(e,t,n){var r,i,s=n+"";return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function nC(e,t,n){var r,i,s=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function rC(e,t,n){var r,i,s;return function(){var o,a,l=n(this);if(null!=l)return(o=this.getAttribute(e))===(a=l+"")?null:o===r&&a===i?s:(i=a,s=t(r=o,l));this.removeAttribute(e)}}function iC(e,t,n){var r,i,s;return function(){var o,a,l=n(this);if(null!=l)return(o=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:o===r&&a===i?s:(i=a,s=t(r=o,l));this.removeAttributeNS(e.space,e.local)}}function sC(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function oC(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function aC(e,t){return function(){GS(this,e).delay=+t.apply(this,arguments)}}function lC(e,t){return t=+t,function(){GS(this,e).delay=t}}function uC(e,t){return function(){QS(this,e).duration=+t.apply(this,arguments)}}function cC(e,t){return t=+t,function(){QS(this,e).duration=t}}var hC=wS.prototype.constructor;function dC(e){return function(){this.style.removeProperty(e)}}var fC=0;function pC(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function mC(){return++fC}var gC=wS.prototype;pC.prototype=function(e){return wS().transition(e)}.prototype={constructor:pC,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=ux(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,l,u=r[o],c=u.length,h=s[o]=new Array(c),d=0;d<c;++d)(a=u[d])&&(l=e.call(a,a.__data__,d,u))&&("__data__"in a&&(l.__data__=a.__data__),h[d]=l,KS(h[d],t,n,d,h,JS(a,n)));return new pC(s,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=hx(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l,u=r[a],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var d,f=e.call(l,l.__data__,h,u),p=JS(l,n),m=0,g=f.length;m<g;++m)(d=f[m])&&KS(d,t,n,m,f,p);s.push(f),o.push(l)}return new pC(s,o,t,n)},selectChild:gC.selectChild,selectChildren:gC.selectChildren,filter:function(e){"function"!==typeof e&&(e=fx(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s,o=t[i],a=o.length,l=r[i]=[],u=0;u<a;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&l.push(s);return new pC(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l,u=t[a],c=n[a],h=u.length,d=o[a]=new Array(h),f=0;f<h;++f)(l=u[f]||c[f])&&(d[f]=l);for(;a<r;++a)o[a]=t[a];return new pC(o,this._parents,this._name,this._id)},selection:function(){return new hC(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=mC(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,u=0;u<l;++u)if(o=a[u]){var c=JS(o,t);KS(o,e,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new pC(r,this._parents,e,n)},call:gC.call,nodes:gC.nodes,node:gC.node,size:gC.size,empty:gC.empty,each:gC.each,on:function(e,t){var n=this._id;return arguments.length<2?JS(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,s=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?GS:QS;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}(n,e,t))},attr:function(e,t){var n=Nx(e),r="transform"===n?ik:Xk;return this.attrTween(e,"function"===typeof t?(n.local?iC:rC)(n,r,ak(this,"attr."+e,t)):null==t?(n.local?eC:Zk)(n):(n.local?nC:tC)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=Nx(e);return this.tween(n,(r.local?sC:oC)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?rk:Xk;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var s=Fx(this,e),o=(this.style.removeProperty(e),Fx(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}(e,r)).on("end.style."+e,dC(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,i,s;return function(){var o=Fx(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=Fx(this,e)),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}(e,r,ak(this,"style."+e,t))).each(function(e,t){var n,r,i,s,o="style."+t,a="end."+o;return function(){var l=QS(this,e),u=l.on,c=null==l.value[o]?s||(s=dC(t)):void 0;u===n&&i===c||(r=(n=u).copy()).on(a,i=c),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,s=n+"";return function(){var o=Fx(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function s(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,s,n)),r}return s._value=t,s}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ak(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=JS(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===e)return r.value;return null}return this.each((null==t?sk:ok)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?aC:lC)(t,e)):JS(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?uC:cC)(t,e)):JS(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){QS(this,e).ease=t}}(t,e)):JS(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;QS(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(s,o){var a={value:o},l={value:function(){0===--i&&s()}};n.each((function(){var n=QS(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t})),0===i&&s()}))},[Symbol.iterator]:gC[Symbol.iterator]};var yC={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function vC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}wS.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,s=e.__transition,o=!0;if(s){for(i in t=null==t?null:t+"",s)(n=s[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete e.__transition}}(this,e)}))},wS.prototype.transition=function(e){var t,n;e instanceof pC?(t=e._id,e=e._name):(t=mC(),(n=yC).time=LS(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],l=a.length,u=0;u<l;++u)(o=a[u])&&KS(o,e,t,u,a,n||vC(o,t));return new pC(r,this._parents,e,t)};const{abs:bC,max:wC,min:_C}=Math;function xC(e){return[+e[0],+e[1]]}function SC(e){return[xC(e[0]),xC(e[1])]}["w","e"].map(kC),["n","s"].map(kC),["n","w","e","s","nw","ne","sw","se"].map(kC);function kC(e){return{type:e}}function CC(e){return"string"===typeof e?new vS([[document.querySelector(e)]],[document.documentElement]):new vS([[e]],yS)}function EC(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const TC={passive:!1},NC={capture:!0,passive:!1};function IC(e){e.stopImmediatePropagation()}function jC(e){e.preventDefault(),e.stopImmediatePropagation()}const AC=e=>()=>e;function RC(e,t){let{sourceEvent:n,subject:r,target:i,identifier:s,active:o,x:a,y:l,dx:u,dy:c,dispatch:h}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}function PC(e){return!e.ctrlKey&&!e.button}function DC(){return this.parentNode}function MC(e,t){return null==t?{x:e.x,y:e.y}:t}function OC(){return navigator.maxTouchPoints||"ontouchstart"in this}function LC(){var e,t,n,r,i=PC,s=DC,o=MC,a=OC,l={},u=ES("start","drag","end"),c=0,h=0;function d(e){e.on("mousedown.drag",f).filter(a).on("touchstart.drag",g).on("touchmove.drag",y,TC).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(o,a){if(!r&&i.call(this,o,a)){var l=b(this,s.call(this,o,a),o,a,"mouse");l&&(CC(o.view).on("mousemove.drag",p,NC).on("mouseup.drag",m,NC),function(e){var t=e.document.documentElement,n=CC(e).on("dragstart.drag",jC,NC);"onselectstart"in t?n.on("selectstart.drag",jC,NC):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}(o.view),IC(o),n=!1,e=o.clientX,t=o.clientY,l("start",o))}}function p(r){if(jC(r),!n){var i=r.clientX-e,s=r.clientY-t;n=i*i+s*s>h}l.mouse("drag",r)}function m(e){CC(e.view).on("mousemove.drag mouseup.drag",null),function(e,t){var n=e.document.documentElement,r=CC(e).on("dragstart.drag",null);t&&(r.on("click.drag",jC,NC),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(e.view,n),jC(e),l.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,r,o=e.changedTouches,a=s.call(this,e,t),l=o.length;for(n=0;n<l;++n)(r=b(this,a,e,t,o[n].identifier,o[n]))&&(IC(e),r("start",e,o[n]))}}function y(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&(jC(e),n("drag",e,r[t]))}function v(e){var t,n,i=e.changedTouches,s=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<s;++t)(n=l[i[t].identifier])&&(IC(e),n("end",e,i[t]))}function b(e,t,n,r,i,s){var a,h,f,p=u.copy(),m=EC(s||n,t);if(null!=(f=o.call(e,new RC("beforestart",{sourceEvent:n,target:d,identifier:i,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return a=f.x-m[0]||0,h=f.y-m[1]||0,function n(s,o,u){var g,y=m;switch(s){case"start":l[i]=n,g=c++;break;case"end":delete l[i],--c;case"drag":m=EC(u||o,t),g=c}p.call(s,e,new RC(s,{sourceEvent:o,subject:f,target:d,identifier:i,active:g,x:m[0]+a,y:m[1]+h,dx:m[0]-y[0],dy:m[1]-y[1],dispatch:p}),r)}}return d.filter=function(e){return arguments.length?(i="function"===typeof e?e:AC(!!e),d):i},d.container=function(e){return arguments.length?(s="function"===typeof e?e:AC(e),d):s},d.subject=function(e){return arguments.length?(o="function"===typeof e?e:AC(e),d):o},d.touchable=function(e){return arguments.length?(a="function"===typeof e?e:AC(!!e),d):a},d.on=function(){var e=u.on.apply(u,arguments);return e===u?d:e},d.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,d):Math.sqrt(h)},d}function UC(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s,o,a,l,u,c,h,d,f=e._root,p={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((u=t>=(s=(m+y)/2))?m=s:y=s,(c=n>=(o=(g+v)/2))?g=o:v=o,i=f,!(f=f[h=c<<1|u]))return i[h]=p,e;if(a=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===a&&n===l)return p.next=f,i?i[h]=p:e._root=p,e;do{i=i?i[h]=new Array(4):e._root=new Array(4),(u=t>=(s=(m+y)/2))?m=s:y=s,(c=n>=(o=(g+v)/2))?g=o:v=o}while((h=c<<1|u)===(d=(l>=o)<<1|a>=s));return i[d]=f,i[h]=p,e}function FC(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function zC(e){return e[0]}function BC(e){return e[1]}function VC(e,t,n){var r=new qC(null==t?zC:t,null==n?BC:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function qC(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function $C(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}RC.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var WC=VC.prototype=qC.prototype;function HC(e){return function(){return e}}function KC(e){return 1e-6*(e()-.5)}function GC(e){return e.x+e.vx}function QC(e){return e.y+e.vy}function JC(e){var t,n,r,i=1,s=1;function o(){for(var e,o,l,u,c,h,d,f=t.length,p=0;p<s;++p)for(o=VC(t,GC,QC).visitAfter(a),e=0;e<f;++e)l=t[e],h=n[l.index],d=h*h,u=l.x+l.vx,c=l.y+l.vy,o.visit(m);function m(e,t,n,s,o){var a=e.data,f=e.r,p=h+f;if(!a)return t>u+p||s<u-p||n>c+p||o<c-p;if(a.index>l.index){var m=u-a.x-a.vx,g=c-a.y-a.vy,y=m*m+g*g;y<p*p&&(0===m&&(y+=(m=KC(r))*m),0===g&&(y+=(g=KC(r))*g),y=(p-(y=Math.sqrt(y)))/y*i,l.vx+=(m*=y)*(p=(f*=f)/(d+f)),l.vy+=(g*=y)*p,a.vx-=m*(p=1-p),a.vy-=g*p)}}}function a(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function l(){if(t){var r,i,s=t.length;for(n=new Array(s),r=0;r<s;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!==typeof e&&(e=HC(null==e?1:+e)),o.initialize=function(e,n){t=e,r=n,l()},o.iterations=function(e){return arguments.length?(s=+e,o):s},o.strength=function(e){return arguments.length?(i=+e,o):i},o.radius=function(t){return arguments.length?(e="function"===typeof t?t:HC(+t),l(),o):e},o}function YC(e){return e.index}function XC(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}WC.copy=function(){var e,t,n=new qC(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=$C(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=$C(t));return n},WC.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return UC(this.cover(t,n),t,n,e)},WC.addAll=function(e){var t,n,r,i,s=e.length,o=new Array(s),a=new Array(s),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<s;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(o[n]=r,a[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>h&&(h=i));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<s;++n)UC(this,o[n],a[n],e[n]);return this},WC.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o,a,l=i-n||1,u=this._root;n>e||e>=i||r>t||t>=s;)switch(a=(t<r)<<1|e<n,(o=new Array(4))[a]=u,u=o,l*=2,a){case 0:i=n+l,s=r+l;break;case 1:n=i-l,s=r+l;break;case 2:i=n+l,r=s-l;break;case 3:n=i-l,r=s-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this},WC.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},WC.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},WC.find=function(e,t,n){var r,i,s,o,a,l,u,c=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new FC(m,c,h,d,f)),null==n?n=1/0:(c=e-n,h=t-n,d=e+n,f=t+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(i=l.x0)>d||(s=l.y0)>f||(o=l.x1)<c||(a=l.y1)<h))if(m.length){var g=(i+o)/2,y=(s+a)/2;p.push(new FC(m[3],g,y,o,a),new FC(m[2],i,y,g,a),new FC(m[1],g,s,o,y),new FC(m[0],i,s,g,y)),(u=(t>=y)<<1|e>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var v=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),w=v*v+b*b;if(w<n){var _=Math.sqrt(n=w);c=e-_,h=t-_,d=e+_,f=t+_,r=m.data}}return r},WC.remove=function(e){if(isNaN(s=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,s,o,a,l,u,c,h,d,f=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!f)return this;if(f.length)for(;;){if((u=s>=(a=(p+g)/2))?p=a:g=a,(c=o>=(l=(m+y)/2))?m=l:y=l,t=f,!(f=f[h=c<<1|u]))return this;if(!f.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,d=h)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):t?(i?t[h]=i:delete t[h],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)},WC.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},WC.root=function(){return this._root},WC.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},WC.visit=function(e){var t,n,r,i,s,o,a=[],l=this._root;for(l&&a.push(new FC(l,this._x0,this._y0,this._x1,this._y1));t=a.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,s=t.x1,o=t.y1)&&l.length){var u=(r+s)/2,c=(i+o)/2;(n=l[3])&&a.push(new FC(n,u,c,s,o)),(n=l[2])&&a.push(new FC(n,r,c,u,o)),(n=l[1])&&a.push(new FC(n,u,i,s,c)),(n=l[0])&&a.push(new FC(n,r,i,u,c))}return this},WC.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new FC(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var s,o=t.x0,a=t.y0,l=t.x1,u=t.y1,c=(o+l)/2,h=(a+u)/2;(s=i[0])&&n.push(new FC(s,o,a,c,h)),(s=i[1])&&n.push(new FC(s,c,a,l,h)),(s=i[2])&&n.push(new FC(s,o,h,c,u)),(s=i[3])&&n.push(new FC(s,c,h,l,u))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},WC.x=function(e){return arguments.length?(this._x=e,this):this._x},WC.y=function(e){return arguments.length?(this._y=e,this):this._y};const ZC=4294967296;function eE(e){return e.x}function tE(e){return e.y}var nE=Math.PI*(3-Math.sqrt(5));function rE(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=zS(h),u=ES("tick","end"),c=function(){let e=1;return()=>(e=(1664525*e+1013904223)%ZC)/ZC}();function h(){d(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function d(r){var l,u,c=e.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(s-n)*i,a.forEach((function(e){e(n)})),l=0;l<c;++l)null==(u=e[l]).fx?u.x+=u.vx*=o:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=o:(u.y=u.fy,u.vy=0);return t}function f(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(.5+n),s=n*nE;t.x=i*Math.cos(s),t.y=i*Math.sin(s)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,c),t}return null==e&&(e=[]),f(),t={tick:d,restart:function(){return l.restart(h),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,f(),a.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(s=+e,t):s},velocityDecay:function(e){return arguments.length?(o=1-e,t):1-o},randomSource:function(e){return arguments.length?(c=e,a.forEach(p),t):c},force:function(e,n){return arguments.length>1?(null==n?a.delete(e):a.set(e,p(n)),t):a.get(e)},find:function(t,n,r){var i,s,o,a,l,u=0,c=e.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)(o=(i=t-(a=e[u]).x)*i+(s=n-a.y)*s)<r&&(l=a,r=o);return l},on:function(e,n){return arguments.length>1?(u.on(e,n),t):u.on(e)}}}function iE(e){var t,n,r,i=HC(.1);function s(e){for(var i,s=0,o=t.length;s<o;++s)(i=t[s]).vx+=(r[s]-i.x)*n[s]*e}function o(){if(t){var s,o=t.length;for(n=new Array(o),r=new Array(o),s=0;s<o;++s)n[s]=isNaN(r[s]=+e(t[s],s,t))?0:+i(t[s],s,t)}}return"function"!==typeof e&&(e=HC(null==e?0:+e)),s.initialize=function(e){t=e,o()},s.strength=function(e){return arguments.length?(i="function"===typeof e?e:HC(+e),o(),s):i},s.x=function(t){return arguments.length?(e="function"===typeof t?t:HC(+t),o(),s):e},s}function sE(e){var t,n,r,i=HC(.1);function s(e){for(var i,s=0,o=t.length;s<o;++s)(i=t[s]).vy+=(r[s]-i.y)*n[s]*e}function o(){if(t){var s,o=t.length;for(n=new Array(o),r=new Array(o),s=0;s<o;++s)n[s]=isNaN(r[s]=+e(t[s],s,t))?0:+i(t[s],s,t)}}return"function"!==typeof e&&(e=HC(null==e?0:+e)),s.initialize=function(e){t=e,o()},s.strength=function(e){return arguments.length?(i="function"===typeof e?e:HC(+e),o(),s):i},s.y=function(t){return arguments.length?(e="function"===typeof t?t:HC(+t),o(),s):e},s}function oE(e,t,n){this.k=e,this.x=t,this.y=n}oE.prototype={constructor:oE,scale:function(e){return 1===e?this:new oE(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new oE(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new oE(1,0,0);oE.prototype;const aE=e=>26-e.name.length+"px",lE=e=>{let{players:t,width:n,height:r}=e;const i=(0,s.useRef)(),[o,a]=(0,s.useState)([]);return(0,s.useEffect)((()=>{if(o&&0!==o.length)if(t.length<o.length){const e=o.filter((e=>void 0!==t.find((t=>t.name===e.name))));a(e)}else{let e=[];for(let i of t)if(!o.find((e=>e.name===i.name))){const s=t[i.id];s.x=n/2,s.y=r/2,e.push(s)}a([...o,...e])}else{const e=t.map((e=>({...e,x:n/2,y:r/2})));a(e)}}),[t]),(0,s.useEffect)((()=>{if(0===o.length)return;const e=CC(i.current),s=rE(o).force("x",iE((e=>((e,t,n)=>{const r=10*Math.random()+40;return e.id*r+((n+r/2)/2-t*r/2)})(e,t.length,n))).strength(.2)).force("y",sE(r/2).strength(.2)).force("collide",JC((e=>40*(.7*Math.random()+1.1)))).alpha(1).alphaDecay(.01).velocityDecay(.5);s.on("tick",(()=>{e.selectAll("circle").data(o).join((e=>e.append("circle").attr("r",0).attr("fill",(e=>V_[e.id])).attr("stroke-width",(e=>0===e.id?4:2)).attr("stroke",(e=>0===e.id?"gold":"rgb(107,114,128)")).attr("r",40)),(e=>e),(e=>e.remove())).attr("cx",(e=>e.x)).attr("cy",(e=>e.y)),e.selectAll("text").data(o).join((e=>e.append("text").style("fill-opacity",0).text((e=>e.name)).style("fill-opacity",1)),(e=>e),(e=>e.remove())).attr("x",(e=>e.x)).attr("y",(e=>e.y+1)).attr("text-anchor","middle").attr("dominant-baseline","middle").style("fill",(e=>ex(V_[e.id]))).style("font-size",aE).style("font-weight","bold")}))}),[n,r,o]),(0,tx.jsx)("svg",{ref:i,width:n,height:r})},uE=e=>{let{gameData:t,players:n}=e;const{shortId:r,gameType:i}=t;(0,s.useEffect)((()=>{if(n.length>0){new Audio("sounds/bubble.mp3").play().catch((e=>console.log("Error playing the sound:",e)))}}),[n]);return(0,tx.jsxs)("div",{className:"",children:[(0,tx.jsx)(sx,{className:"max-w-screen-md"}),(0,tx.jsxs)("div",{className:"max-w-screen-md mx-auto px-4 pt-2 text-gray-200",children:[" ",(0,tx.jsxs)("div",{className:"flex justify-between bg-gray-800 p-6 rounded-lg",children:[(0,tx.jsxs)("h2",{className:"text-5xl font-bold text-gray-200 ",children:["Game Code: ",(0,tx.jsx)("span",{className:"text-green-500",children:r})]}),(0,tx.jsx)(ax,{className:"text-2xl text-gray-200",children:"Allow Sounds"})]}),(0,tx.jsxs)("div",{className:"mt-2 p-6 bg-gray-800 rounded-lg",children:[(0,tx.jsxs)("div",{className:"flex justify-between items-end pb-2 text-2xl",children:[(0,tx.jsx)("div",{className:"text-2xl",children:"Joined Players"}),n.length>1&&(0,tx.jsxs)("div",{className:"text-xl",children:[(0,tx.jsx)("span",{className:"text-yellow-400 font-bold",children:n[0].name})," start the game once everyone joins!"]})]}),(0,tx.jsx)("div",{className:"md:col-span-1 bg-gray-100 border border-4 border-gray-500 rounded-lg",children:(0,tx.jsx)(lE,{players:n.map(((e,t)=>({id:t,name:e.name}))),width:680,height:300})})]}),"Incommon"===i?(0,tx.jsxs)("div",{className:"mt-2 p-6 bg-gray-800 rounded-lg text-2xl",children:[(0,tx.jsxs)("label",{htmlFor:"deckType",className:"block border-b pb-2 border-gray-600",children:["Deck: ",(0,tx.jsx)("span",{className:"font-bold",children:X_(t.deckType)})]}),(0,tx.jsxs)("label",{htmlFor:"deckType",className:"block border-b py-2 border-gray-600",children:["Game Length: ",(0,tx.jsx)("span",{className:"font-bold",children:Y_(t.gameLength)})]}),(0,tx.jsxs)("label",{htmlFor:"deckType",className:"block pt-2",children:["Word Selection: ",(0,tx.jsx)("span",{className:"font-bold",children:Z_(t.wordSelection)})]})]}):"Out of Words, Words"===i?(0,tx.jsxs)("div",{className:"mt-2 p-6 bg-gray-800 rounded-lg text-2xl",children:[(0,tx.jsxs)("label",{htmlFor:"minWordLength",className:"block",children:["Minimum Word Length: ",(0,tx.jsx)("span",{className:"font-bold",children:t.minWordLength})]}),(0,tx.jsxs)("label",{htmlFor:"minWordLength",className:"block",children:["Game Time (Minutes): ",(0,tx.jsx)("span",{className:"font-bold",children:t.gameTime})]})]}):void 0]})]})},cE=e=>{let{gameData:t,players:n}=e;const{shortId:r}=t;return(0,tx.jsxs)("div",{className:"",children:[(0,tx.jsx)(sx,{className:"max-w-screen-md"}),"Players building the deck..."]})};var hE=TE(),dE=e=>SE(e,hE),fE=TE();dE.write=e=>SE(e,fE);var pE=TE();dE.onStart=e=>SE(e,pE);var mE=TE();dE.onFrame=e=>SE(e,mE);var gE=TE();dE.onFinish=e=>SE(e,gE);var yE=[];dE.setTimeout=(e,t)=>{const n=dE.now()+t,r=()=>{const e=yE.findIndex((e=>e.cancel==r));~e&&yE.splice(e,1),_E-=~e?1:0},i={time:n,handler:e,cancel:r};return yE.splice(vE(n),0,i),_E+=1,kE(),i};var vE=e=>~(~yE.findIndex((t=>t.time>e))||~yE.length);dE.cancel=e=>{pE.delete(e),mE.delete(e),gE.delete(e),hE.delete(e),fE.delete(e)},dE.sync=e=>{xE=!0,dE.batchedUpdates(e),xE=!1},dE.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t=r,dE.onStart(n)}return r.handler=e,r.cancel=()=>{pE.delete(n),t=null},r};var bE="undefined"!=typeof window?window.requestAnimationFrame:()=>{};dE.use=e=>bE=e,dE.now="undefined"!=typeof performance?()=>performance.now():Date.now,dE.batchedUpdates=e=>e(),dE.catch=console.error,dE.frameLoop="always",dE.advance=()=>{"demand"!==dE.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):EE()};var wE=-1,_E=0,xE=!1;function SE(e,t){xE?(t.delete(e),e(0)):(t.add(e),kE())}function kE(){wE<0&&(wE=0,"demand"!==dE.frameLoop&&bE(CE))}function CE(){~wE&&(bE(CE),dE.batchedUpdates(EE))}function EE(){const e=wE;wE=dE.now();const t=vE(wE);t&&(NE(yE.splice(0,t),(e=>e.handler())),_E-=t),_E?(pE.flush(),hE.flush(e?Math.min(64,wE-e):16.667),mE.flush(),fE.flush(),gE.flush()):wE=-1}function TE(){let e=new Set,t=e;return{add(n){_E+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(_E-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,_E-=t.size,NE(t,(t=>t(n)&&e.add(t))),_E+=e.size,t=e)}}}function NE(e,t){e.forEach((e=>{try{t(e)}catch(PP){dE.catch(PP)}}))}var IE=Object.defineProperty,jE={};function AE(){}((e,t)=>{for(var n in t)IE(e,n,{get:t[n],enumerable:!0})})(jE,{assign:()=>WE,colors:()=>VE,createStringInterpolator:()=>UE,skipAnimation:()=>qE,to:()=>FE,willAdvance:()=>$E});var RE={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,und:e=>void 0===e};function PE(e,t){if(RE.arr(e)){if(!RE.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var DE=(e,t)=>e.forEach(t);function ME(e,t,n){if(RE.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var OE=e=>RE.und(e)?[]:RE.arr(e)?e:[e];function LE(e,t){if(e.size){const n=Array.from(e);e.clear(),DE(n,t)}}var UE,FE,zE=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return LE(e,(e=>e(...n)))},BE=()=>"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),VE=null,qE=!1,$E=AE,WE=e=>{e.to&&(FE=e.to),e.now&&(dE.now=e.now),void 0!==e.colors&&(VE=e.colors),null!=e.skipAnimation&&(qE=e.skipAnimation),e.createStringInterpolator&&(UE=e.createStringInterpolator),e.requestAnimationFrame&&dE.use(e.requestAnimationFrame),e.batchedUpdates&&(dE.batchedUpdates=e.batchedUpdates),e.willAdvance&&($E=e.willAdvance),e.frameLoop&&(dE.frameLoop=e.frameLoop)},HE=new Set,KE=[],GE=[],QE=0,JE={get idle(){return!HE.size&&!KE.length},start(e){QE>e.priority?(HE.add(e),dE.onStart(YE)):(XE(e),dE(eT))},advance:eT,sort(e){if(QE)dE.onFrame((()=>JE.sort(e)));else{const t=KE.indexOf(e);~t&&(KE.splice(t,1),ZE(e))}},clear(){KE=[],HE.clear()}};function YE(){HE.forEach(XE),HE.clear(),dE(eT)}function XE(e){KE.includes(e)||ZE(e)}function ZE(e){KE.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(KE,(t=>t.priority>e.priority)),0,e)}function eT(e){const t=GE;for(let n=0;n<KE.length;n++){const r=KE[n];QE=r.priority,r.idle||($E(r),r.advance(e),r.idle||t.push(r))}return QE=0,(GE=KE).length=0,(KE=t).length>0}var tT="[-+]?\\d*\\.?\\d+",nT=tT+"%";function rT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var iT=new RegExp("rgb"+rT(tT,tT,tT)),sT=new RegExp("rgba"+rT(tT,tT,tT,tT)),oT=new RegExp("hsl"+rT(tT,nT,nT)),aT=new RegExp("hsla"+rT(tT,nT,nT,tT)),lT=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,uT=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,cT=/^#([0-9a-fA-F]{6})$/,hT=/^#([0-9a-fA-F]{8})$/;function dT(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function fT(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,s=dT(i,r,e+1/3),o=dT(i,r,e),a=dT(i,r,e-1/3);return Math.round(255*s)<<24|Math.round(255*o)<<16|Math.round(255*a)<<8}function pT(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function mT(e){return(parseFloat(e)%360+360)%360/360}function gT(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function yT(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function vT(e){let t=function(e){let t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=cT.exec(e))?parseInt(t[1]+"ff",16)>>>0:VE&&void 0!==VE[e]?VE[e]:(t=iT.exec(e))?(pT(t[1])<<24|pT(t[2])<<16|pT(t[3])<<8|255)>>>0:(t=sT.exec(e))?(pT(t[1])<<24|pT(t[2])<<16|pT(t[3])<<8|gT(t[4]))>>>0:(t=lT.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=hT.exec(e))?parseInt(t[1],16)>>>0:(t=uT.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=oT.exec(e))?(255|fT(mT(t[1]),yT(t[2]),yT(t[3])))>>>0:(t=aT.exec(e))?(fT(mT(t[1]),yT(t[2]),yT(t[3]))|gT(t[4]))>>>0:null}(e);if(null===t)return e;t=t||0;return`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`}var bT=(e,t,n)=>{if(RE.fun(e))return e;if(RE.arr(e))return bT({range:e,output:t,extrapolate:n});if(RE.str(e.output[0]))return UE(e);const r=e,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,s);return function(e,t,n,r,i,s,o,a,l){let u=l?l(e):e;if(u<t){if("identity"===o)return u;"clamp"===o&&(u=t)}if(u>n){if("identity"===a)return u;"clamp"===a&&(u=n)}if(r===i)return r;if(t===n)return e<=t?r:i;t===-1/0?u=-u:n===1/0?u-=t:u=(u-t)/(n-t);u=s(u),r===-1/0?u=-u:i===1/0?u+=r:u=u*(i-r)+r;return u}(e,s[t],s[t+1],i[t],i[t+1],l,o,a,r.map)}};var wT=1.70158,_T=1.525*wT,xT=wT+1,ST=2*Math.PI/3,kT=2*Math.PI/4.5,CT=e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},ET={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>xT*e*e*e-wT*e*e,easeOutBack:e=>1+xT*Math.pow(e-1,3)+wT*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-_T)/2:(Math.pow(2*e-2,2)*((_T+1)*(2*e-2)+_T)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*ST),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*ST)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*kT)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*kT)/2+1,easeInBounce:e=>1-CT(1-e),easeOutBounce:CT,easeInOutBounce:e=>e<.5?(1-CT(1-2*e))/2:(1+CT(2*e-1))/2,steps:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";return n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e;return((e,t,n)=>Math.min(Math.max(n,e),t))(0,1,("end"===t?Math.floor(r):Math.ceil(r))/e)}}},TT=Symbol.for("FluidValue.get"),NT=Symbol.for("FluidValue.observers"),IT=e=>Boolean(e&&e[TT]),jT=e=>e&&e[TT]?e[TT]():e,AT=e=>e[NT]||null;function RT(e,t){const n=e[NT];n&&n.forEach((e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var PT=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");DT(this,e)}},DT=(e,t)=>UT(e,TT,t);function MT(e,t){if(e[TT]){let n=e[NT];n||UT(e,NT,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function OT(e,t){const n=e[NT];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[NT]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var LT,UT=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),FT=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,zT=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,BT=new RegExp(`(${FT.source})(%|[a-z]+)`,"i"),VT=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,qT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,$T=e=>{const[t,n]=WT(e);if(!t||BE())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&qT.test(n)?$T(n):n||e},WT=e=>{const t=qT.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},HT=(e,t,n,r,i)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,KT=e=>{LT||(LT=VE?new RegExp(`(${Object.keys(VE).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map((e=>jT(e).replace(qT,$T).replace(zT,vT).replace(LT,vT))),n=t.map((e=>e.match(FT).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))).map((t=>bT({...e,output:t})));return e=>{const n=!BT.test(t[0])&&t.find((e=>BT.test(e)))?.replace(FT,"");let i=0;return t[0].replace(FT,(()=>`${r[i++](e)}${n||""}`)).replace(VT,HT)}},GT="react-spring: ",QT=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError(`${GT}once requires a function parameter`);return function(){n||(t(...arguments),n=!0)}},JT=QT(console.warn);var YT=QT(console.warn);function XT(e){return RE.str(e)&&("#"==e[0]||/\d/.test(e)||!BE()&&qT.test(e)||e in(VE||{}))}var ZT=BE()?s.useEffect:s.useLayoutEffect;function eN(){const e=(0,s.useState)()[1],t=(()=>{const e=(0,s.useRef)(!1);return ZT((()=>(e.current=!0,()=>{e.current=!1})),[]),e})();return()=>{t.current&&e(Math.random())}}var tN=e=>(0,s.useEffect)(e,nN),nN=[];function rN(e){const t=(0,s.useRef)();return(0,s.useEffect)((()=>{t.current=e})),t.current}var iN=Symbol.for("Animated:node"),sN=e=>e&&e[iN],oN=(e,t)=>{return n=e,r=iN,i=t,Object.defineProperty(n,r,{value:i,writable:!0,configurable:!0});var n,r,i},aN=e=>e&&e[iN]&&e[iN].getPayload(),lN=class{constructor(){oN(this,this)}getPayload(){return this.payload||[]}},uN=class extends lN{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,RE.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new uN(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return RE.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,RE.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},cN=class extends uN{constructor(e){super(0),this._string=null,this._toString=bT({output:[e,e]})}static create(e){return new cN(e)}getValue(){const e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(RE.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=bT({output:[this.getValue(),e]})),this._value=0,super.reset()}},hN={dependencies:null},dN=class extends lN{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return ME(this.source,((n,r)=>{var i;(i=n)&&i[iN]===i?t[r]=n.getValue(e):IT(n)?t[r]=jT(n):e||(t[r]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&DE(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return ME(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){hN.dependencies&&IT(e)&&hN.dependencies.add(e);const t=aN(e);t&&DE(t,(e=>this.add(e)))}},fN=class extends dN{constructor(e){super(e)}static create(e){return new fN(e)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){const t=this.getPayload();return e.length==t.length?t.map(((t,n)=>t.setValue(e[n]))).some(Boolean):(super.setValue(e.map(pN)),!0)}};function pN(e){return(XT(e)?cN:uN).create(e)}function mN(e){const t=sN(e);return t?t.constructor:RE.arr(e)?fN:XT(e)?cN:uN}var gN=(e,t)=>{const n=!RE.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,s.forwardRef)(((r,i)=>{const o=(0,s.useRef)(null),a=n&&(0,s.useCallback)((e=>{o.current=function(e,t){e&&(RE.fun(e)?e(t):e.current=t);return t}(i,e)}),[i]),[l,u]=function(e,t){const n=new Set;hN.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)});return e=new dN(e),hN.dependencies=null,[e,n]}(r,t),c=eN(),h=()=>{const e=o.current;if(n&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,l.getValue(!0)))&&c()},d=new yN(h,u),f=(0,s.useRef)();ZT((()=>(f.current=d,DE(u,(e=>MT(e,d))),()=>{f.current&&(DE(f.current.deps,(e=>OT(e,f.current))),dE.cancel(f.current.update))}))),(0,s.useEffect)(h,[]),tN((()=>()=>{const e=f.current;DE(e.deps,(t=>OT(t,e)))}));const p=t.getComponentProps(l.getValue());return s.createElement(e,{...p,ref:a})}))},yN=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&dE.write(this.update)}};var vN=Symbol.for("AnimatedComponent"),bN=e=>RE.str(e)?e:e&&RE.str(e.displayName)?e.displayName:RE.fun(e)&&e.name||null;function wN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return RE.fun(e)?e(...n):e}var _N=(e,t)=>!0===e||!!(t&&e&&(RE.fun(e)?e(t):OE(e).includes(t))),xN=(e,t)=>RE.obj(e)?t&&e[t]:e,SN=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,kN=e=>e,CN=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kN,n=EN;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));const r={};for(const i of n){const n=t(e[i],i);RE.und(n)||(r[i]=n)}return r},EN=["config","onProps","onStart","onChange","onPause","onResume","onRest"],TN={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function NN(e){const t=function(e){const t={};let n=0;if(ME(e,((e,r)=>{TN[r]||(t[r]=e,n++)})),n)return t}(e);if(t){const n={to:t};return ME(e,((e,r)=>r in t||(n[r]=e))),n}return{...e}}function IN(e){return e=jT(e),RE.arr(e)?e.map(IN):XT(e)?jE.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function jN(e){for(const t in e)return!0;return!1}function AN(e){return RE.fun(e)||RE.arr(e)&&RE.obj(e[0])}function RN(e,t){e.ref?.delete(e),t?.delete(e)}function PN(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var DN={tension:170,friction:26,mass:1,damping:1,easing:ET.linear,clamp:!1},MN=class{constructor(){this.velocity=0,Object.assign(this,DN)}};function ON(e,t){if(RE.und(t.decay)){const n=!RE.und(t.tension)||!RE.und(t.friction);!n&&RE.und(t.frequency)&&RE.und(t.damping)&&RE.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var LN=[],UN=class{constructor(){this.changed=!1,this.values=LN,this.toValues=null,this.fromValues=LN,this.config=new MN,this.immediate=!1}};function FN(e,t){let{key:n,props:r,defaultProps:i,state:s,actions:o}=t;return new Promise(((t,a)=>{let l,u,c=_N(r.cancel??i?.cancel,n);if(c)f();else{RE.und(r.pause)||(s.paused=_N(r.pause,n));let e=i?.pause;!0!==e&&(e=s.paused||_N(e,n)),l=wN(r.delay||0,n),e?(s.resumeQueue.add(d),o.pause()):(o.resume(),d())}function h(){s.resumeQueue.add(d),s.timeouts.delete(u),u.cancel(),l=u.time-dE.now()}function d(){l>0&&!jE.skipAnimation?(s.delayed=!0,u=dE.setTimeout(f,l),s.pauseQueue.add(h),s.timeouts.add(u)):f()}function f(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(h),s.timeouts.delete(u),e<=(s.cancelId||0)&&(c=!0);try{o.start({...r,callId:e,cancel:c},t)}catch(n){a(n)}}}))}var zN=(e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?qN(e.get()):t.every((e=>e.noop))?BN(e.get()):VN(e.get(),t.every((e=>e.finished))),BN=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),VN=function(e,t){return{value:e,finished:t,cancelled:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},qN=e=>({value:e,cancelled:!0,finished:!1});function $N(e,t,n,r){const{callId:i,parentId:s,onRest:o}=t,{asyncTo:a,promise:l}=n;return s||e!==a||t.reset?n.promise=(async()=>{n.asyncId=i,n.asyncTo=e;const u=CN(t,((e,t)=>"onRest"===t?void 0:e));let c,h;const d=new Promise(((e,t)=>(c=e,h=t))),f=e=>{const t=i<=(n.cancelId||0)&&qN(r)||i!==n.asyncId&&VN(r,!1);if(t)throw e.result=t,h(e),e},p=(e,t)=>{const s=new HN,o=new KN;return(async()=>{if(jE.skipAnimation)throw WN(n),o.result=VN(r,!1),h(o),o;f(s);const a=RE.obj(e)?{...e}:{...t,to:e};a.parentId=i,ME(u,((e,t)=>{RE.und(a[t])&&(a[t]=e)}));const l=await r.start(a);return f(s),n.paused&&await new Promise((e=>{n.resumeQueue.add(e)})),l})()};let m;if(jE.skipAnimation)return WN(n),VN(r,!1);try{let t;t=RE.arr(e)?(async e=>{for(const t of e)await p(t)})(e):Promise.resolve(e(p,r.stop.bind(r))),await Promise.all([t.then(c),d]),m=VN(r.get(),!0,!1)}catch(g){if(g instanceof HN)m=g.result;else{if(!(g instanceof KN))throw g;m=g.result}}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return RE.fun(o)&&dE.batchedUpdates((()=>{o(m,r,r.item)})),m})():l}function WN(e,t){LE(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var HN=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},KN=class extends Error{constructor(){super("SkipAnimationSignal")}},GN=e=>e instanceof JN,QN=1,JN=class extends PT{constructor(){super(...arguments),this.id=QN++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=sN(this);return e&&e.getValue()}to(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jE.to(this,t)}interpolate(){JT(`${GT}The "interpolate" function is deprecated in v9 (use "to" instead)`);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jE.to(this,t)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e){RT(this,{type:"change",parent:this,value:e,idle:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}_onPriorityChange(e){this.idle||JE.sort(this),RT(this,{type:"priority",parent:this,priority:e})}},YN=Symbol.for("SpringPhase"),XN=e=>(1&e[YN])>0,ZN=e=>(2&e[YN])>0,eI=e=>(4&e[YN])>0,tI=(e,t)=>t?e[YN]|=3:e[YN]&=-3,nI=(e,t)=>t?e[YN]|=4:e[YN]&=-5,rI=class extends JN{constructor(e,t){if(super(),this.animation=new UN,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!RE.und(e)||!RE.und(t)){const n=RE.obj(e)?{...e}:{...t,from:e};RE.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(ZN(this)||this._state.asyncTo)||eI(this)}get goal(){return jT(this.animation.to)}get velocity(){const e=sN(this);return e instanceof uN?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return XN(this)}get isAnimating(){return ZN(this)}get isPaused(){return eI(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=aN(r.to);!o&&IT(r.to)&&(i=OE(jT(r.to))),r.values.forEach(((a,l)=>{if(a.done)return;const u=a.constructor==cN?1:o?o[l].lastPosition:i[l];let c=r.immediate,h=u;if(!c){if(h=a.lastPosition,s.tension<=0)return void(a.done=!0);let t=a.elapsedTime+=e;const n=r.fromValues[l],i=null!=a.v0?a.v0:a.v0=RE.arr(s.velocity)?s.velocity[l]:s.velocity;let o;const d=s.precision||(n==u?.005:Math.min(1,.001*Math.abs(u-n)));if(RE.und(s.duration))if(s.decay){const e=!0===s.decay?.998:s.decay,r=Math.exp(-(1-e)*t);h=n+i/(1-e)*(1-r),c=Math.abs(a.lastPosition-h)<=d,o=i*r}else{o=null==a.lastVelocity?i:a.lastVelocity;const t=s.restVelocity||d/10,r=s.clamp?0:s.bounce,l=!RE.und(r),f=n==u?a.v0>0:n<u;let p,m=!1;const g=1,y=Math.ceil(e/g);for(let e=0;e<y&&(p=Math.abs(o)>t,p||(c=Math.abs(u-h)<=d,!c));++e){l&&(m=h==u||h>u==f,m&&(o=-o*r,h=u));o+=(1e-6*-s.tension*(h-u)+.001*-s.friction*o)/s.mass*g,h+=o*g}}else{let r=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,a.durationProgress>0&&(a.elapsedTime=s.duration*a.durationProgress,t=a.elapsedTime+=e)),r=(s.progress||0)+t/this._memoizedDuration,r=r>1?1:r<0?0:r,a.durationProgress=r),h=n+s.easing(r)*(u-n),o=(h-a.lastPosition)/e,c=1==r}a.lastVelocity=o,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),c=!0)}o&&!o[l].done&&(c=!1),c?a.done=!0:t=!1,a.setValue(h,s.round)&&(n=!0)}));const a=sN(this),l=a.getValue();if(t){const e=jT(r.to);l===e&&!n||s.decay?n&&s.decay&&this._onChange(l):(a.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(l)}set(e){return dE.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ZN(this)){const{to:e,config:t}=this.animation;dE.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return RE.und(e)?(n=this.queue||[],this.queue=[]):n=[RE.obj(e)?e:{...t,to:e}],Promise.all(n.map((e=>this._update(e)))).then((e=>zN(this,e)))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),WN(this._state,e&&this._lastCallId),dE.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=RE.obj(n)?n[t]:n,(null==n||AN(n))&&(n=void 0),r=RE.obj(r)?r[t]:r,null==r&&(r=void 0);const i={to:n,from:r};return XN(this)||(e.reverse&&([n,r]=[r,n]),r=jT(r),RE.und(r)?sN(this)||this._set(n):this._set(r)),i}_update(e,t){let{...n}=e;const{key:r,defaultProps:i}=this;n.default&&Object.assign(i,CN(n,((e,t)=>/^on/.test(t)?xN(e,r):e))),cI(this,n,"onProps"),hI(this,"onProps",n,this);const s=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const o=this._state;return FN(++this._lastCallId,{key:r,props:n,defaultProps:i,state:o,actions:{pause:()=>{eI(this)||(nI(this,!0),zE(o.pauseQueue),hI(this,"onPause",VN(this,iI(this,this.animation.to)),this))},resume:()=>{eI(this)&&(nI(this,!1),ZN(this)&&this._resume(),zE(o.resumeQueue),hI(this,"onResume",VN(this,iI(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then((e=>{if(n.loop&&e.finished&&(!t||!e.noop)){const e=sI(n);if(e)return this._update(e,!0)}return e}))}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(qN(this));const r=!RE.und(e.to),i=!RE.und(e.from);if(r||i){if(!(t.callId>this._lastToId))return n(qN(this));this._lastToId=t.callId}const{key:s,defaultProps:o,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:h=u}=e;!i||r||t.default&&!RE.und(c)||(c=h),t.reverse&&([c,h]=[h,c]);const d=!PE(h,u);d&&(a.from=h),h=jT(h);const f=!PE(c,l);f&&this._focus(c);const p=AN(t.to),{config:m}=a,{decay:g,velocity:y}=m;(r||i)&&(m.velocity=0),t.config&&!p&&function(e,t,n){n&&(ON(n={...n},t),t={...n,...t}),ON(e,t),Object.assign(e,t);for(const o in DN)null==e[o]&&(e[o]=DN[o]);let{frequency:r,damping:i}=e;const{mass:s}=e;RE.und(r)||(r<.01&&(r=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/r,2)*s,e.friction=4*Math.PI*i*s/r)}(m,wN(t.config,s),t.config!==o.config?wN(o.config,s):void 0);let v=sN(this);if(!v||RE.und(c))return n(VN(this,!0));const b=RE.und(t.reset)?i&&!t.default:!RE.und(h)&&_N(t.reset,s),w=b?h:this.get(),_=IN(c),x=RE.num(_)||RE.arr(_)||XT(_),S=!p&&(!x||_N(o.immediate||t.immediate,s));if(f){const e=mN(c);if(e!==v.constructor){if(!S)throw Error(`Cannot animate between ${v.constructor.name} and ${e.name}, as the "to" prop suggests`);v=this._set(_)}}const k=v.constructor;let C=IT(c),E=!1;if(!C){const e=b||!XN(this)&&d;(f||e)&&(E=PE(IN(w),_),C=!E),(PE(a.immediate,S)||S)&&PE(m.decay,g)&&PE(m.velocity,y)||(C=!0)}if(E&&ZN(this)&&(a.changed&&!b?C=!0:C||this._stop(l)),!p&&((C||IT(l))&&(a.values=v.getPayload(),a.toValues=IT(c)?null:k==cN?[1]:OE(_)),a.immediate!=S&&(a.immediate=S,S||b||this._set(l)),C)){const{onRest:e}=a;DE(uI,(e=>cI(this,t,e)));const r=VN(this,iI(this,l));zE(this._pendingCalls,r),this._pendingCalls.add(n),a.changed&&dE.batchedUpdates((()=>{a.changed=!b,e?.(r,this),b?wN(o.onRest,r):a.onStart?.(r,this)}))}b&&this._set(w),p?n($N(t.to,t,this._state,this)):C?this._start():ZN(this)&&!f?this._pendingCalls.add(n):n(BN(w))}_focus(e){const t=this.animation;e!==t.to&&(AT(this)&&this._detach(),t.to=e,AT(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;IT(t)&&(MT(t,this),GN(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;IT(e)&&OT(e,this)}_set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=jT(e);if(!RE.und(n)){const e=sN(this);if(!e||!PE(n,e.getValue())){const r=mN(n);e&&e.constructor==r?e.setValue(n):oN(this,r.create(n)),e&&dE.batchedUpdates((()=>{this._onChange(n,t)}))}}return sN(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,hI(this,"onStart",VN(this,iI(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),wN(this.animation.onChange,e,this)),wN(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;sN(this).reset(jT(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),ZN(this)||(tI(this,!0),eI(this)||this._resume())}_resume(){jE.skipAnimation?this.finish():JE.start(this)}_stop(e,t){if(ZN(this)){tI(this,!1);const n=this.animation;DE(n.values,(e=>{e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),RT(this,{type:"idle",parent:this});const r=t?qN(this.get()):VN(this.get(),iI(this,e??n.to));zE(this._pendingCalls,r),n.changed&&(n.changed=!1,hI(this,"onRest",r,this))}}};function iI(e,t){const n=IN(t);return PE(IN(e.get()),n)}function sI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to;const r=wN(t);if(r){const i=!0!==r&&NN(r),s=(i||e).reverse,o=!i||i.reset;return oI({...e,loop:t,default:!1,pause:void 0,to:!s||AN(n)?n:void 0,from:o?e.from:void 0,reset:o,...i})}}function oI(e){const{to:t,from:n}=e=NN(e),r=new Set;return RE.obj(t)&&lI(t,r),RE.obj(n)&&lI(n,r),e.keys=r.size?Array.from(r):null,e}function aI(e){const t=oI(e);return RE.und(t.default)&&(t.default=CN(t)),t}function lI(e,t){ME(e,((e,n)=>null!=e&&t.add(n)))}var uI=["onStart","onRest","onChange","onPause","onResume"];function cI(e,t,n){e.animation[n]=t[n]!==SN(t,n)?xN(t[n],e.key):void 0}function hI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];e.animation[t]?.(...r),e.defaultProps[t]?.(...r)}var dI=["onStart","onChange","onRest"],fI=1,pI=class{constructor(e,t){this.id=fI++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((e=>e.idle&&!e.isDelayed&&!e.isPaused))}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each(((t,n)=>e[n]=t.get())),e}set(e){for(const t in e){const n=e[t];RE.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(oI(e)),this}start(e){let{queue:t}=this;return e?t=OE(e).map(oI):this.queue=[],this._flush?this._flush(this,t):(_I(this,t),mI(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;DE(OE(t),(t=>n[t].stop(!!e)))}else WN(this._state,this._lastAsyncId),this.each((t=>t.stop(!!e)));return this}pause(e){if(RE.und(e))this.start({pause:!0});else{const t=this.springs;DE(OE(e),(e=>t[e].pause()))}return this}resume(e){if(RE.und(e))this.start({pause:!1});else{const t=this.springs;DE(OE(e),(e=>t[e].resume()))}return this}each(e){ME(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,LE(e,(e=>{let[t,n]=e;n.value=this.get(),t(n,this,this._item)})));const s=!r&&this._started,o=i||s&&n.size?this.get():null;i&&t.size&&LE(t,(e=>{let[t,n]=e;n.value=o,t(n,this,this._item)})),s&&(this._started=!1,LE(n,(e=>{let[t,n]=e;n.value=o,t(n,this,this._item)})))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}dE.onFrame(this._onFrame)}};function mI(e,t){return Promise.all(t.map((t=>gI(e,t)))).then((t=>zN(e,t)))}async function gI(e,t,n){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=t,u=RE.obj(t.default)&&t.default;o&&(t.loop=!1),!1===i&&(t.to=null),!1===s&&(t.from=null);const c=RE.arr(i)||RE.fun(i)?i:void 0;c?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):DE(dI,(n=>{const r=t[n];if(RE.fun(r)){const i=e._events[n];t[n]=e=>{let{finished:t,cancelled:n}=e;const s=i.get(r);s?(t||(s.finished=!1),n&&(s.cancelled=!0)):i.set(r,{value:null,finished:t||!1,cancelled:n||!1})},u&&(u[n]=t[n])}}));const h=e._state;t.pause===!h.paused?(h.paused=t.pause,zE(t.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(t.pause=!0);const d=(r||Object.keys(e.springs)).map((n=>e.springs[n].start(t))),f=!0===t.cancel||!0===SN(t,"cancel");(c||f&&h.asyncId)&&d.push(FN(++e._lastAsyncId,{props:t,state:h,actions:{pause:AE,resume:AE,start(t,n){f?(WN(h,e._lastAsyncId),n(qN(e))):(t.onRest=a,n($N(c,t,h,e)))}}})),h.paused&&await new Promise((e=>{h.resumeQueue.add(e)}));const p=zN(e,await Promise.all(d));if(o&&p.finished&&(!n||!p.noop)){const n=sI(t,o,i);if(n)return _I(e,[n]),gI(e,n,!0)}return l&&dE.batchedUpdates((()=>l(p,e,e.item))),p}function yI(e,t){const n={...e.springs};return t&&DE(OE(t),(e=>{RE.und(e.keys)&&(e=oI(e)),RE.obj(e.to)||(e={...e,to:void 0}),wI(n,e,(e=>bI(e)))})),vI(e,n),n}function vI(e,t){ME(t,((t,n)=>{e.springs[n]||(e.springs[n]=t,MT(t,e))}))}function bI(e,t){const n=new rI;return n.key=e,t&&MT(n,t),n}function wI(e,t,n){t.keys&&DE(t.keys,(r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function _I(e,t){DE(t,(t=>{wI(e.springs,t,(t=>bI(t,e)))}))}var xI=e=>{let{children:t,...n}=e;const r=(0,s.useContext)(SI),i=n.pause||!!r.pause,o=n.immediate||!!r.immediate;n=function(e,t){const[n]=(0,s.useState)((()=>({inputs:t,result:e()}))),r=(0,s.useRef)(),i=r.current;let o=i;o?Boolean(t&&o.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,o.inputs))||(o={inputs:t,result:e()}):o=n;return(0,s.useEffect)((()=>{r.current=o,i==n&&(n.inputs=n.result=void 0)}),[o]),o.result}((()=>({pause:i,immediate:o})),[i,o]);const{Provider:a}=SI;return s.createElement(a,{value:n},t)},SI=function(e,t){return Object.assign(e,s.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}(xI,{});xI.Provider=SI.Provider,xI.Consumer=SI.Consumer;var kI=()=>{const e=[],t=function(t){YT(`${GT}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);const r=[];return DE(e,((e,i)=>{if(RE.und(t))r.push(e.start());else{const s=n(t,e,i);s&&r.push(e.start(s))}})),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return DE(e,(e=>e.pause(...arguments))),this},t.resume=function(){return DE(e,(e=>e.resume(...arguments))),this},t.set=function(t){DE(e,((e,n)=>{const r=RE.fun(t)?t(n,e):t;r&&e.set(r)}))},t.start=function(t){const n=[];return DE(e,((e,r)=>{if(RE.und(t))n.push(e.start());else{const i=this._getProps(t,e,r);i&&n.push(e.start(i))}})),n},t.stop=function(){return DE(e,(e=>e.stop(...arguments))),this},t.update=function(t){return DE(e,((e,n)=>e.update(this._getProps(t,e,n)))),this};const n=function(e,t,n){return RE.fun(e)?e(n,t):e};return t._getProps=n,t};function CI(e,t,n){const r=RE.fun(t)&&t;r&&!n&&(n=[]);const i=(0,s.useMemo)((()=>r||3==arguments.length?kI():void 0),[]),o=(0,s.useRef)(0),a=eN(),l=(0,s.useMemo)((()=>({ctrls:[],queue:[],flush(e,t){const n=yI(e,t);return o.current>0&&!l.queue.length&&!Object.keys(n).some((t=>!e.springs[t]))?mI(e,t):new Promise((r=>{vI(e,n),l.queue.push((()=>{r(mI(e,t))})),a()}))}})),[]),u=(0,s.useRef)([...l.ctrls]),c=[],h=rN(e)||0;function d(e,n){for(let i=e;i<n;i++){const e=u.current[i]||(u.current[i]=new pI(null,l.flush)),n=r?r(i,e):t[i];n&&(c[i]=aI(n))}}(0,s.useMemo)((()=>{DE(u.current.slice(e,h),(e=>{RN(e,i),e.stop(!0)})),u.current.length=e,d(h,e)}),[e]),(0,s.useMemo)((()=>{d(0,Math.min(h,e))}),n);const f=u.current.map(((e,t)=>yI(e,c[t]))),p=(0,s.useContext)(xI),m=rN(p),g=p!==m&&jN(p);ZT((()=>{o.current++,l.ctrls=u.current;const{queue:e}=l;e.length&&(l.queue=[],DE(e,(e=>e()))),DE(u.current,((e,t)=>{i?.add(e),g&&e.start({default:p});const n=c[t];n&&(PN(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),tN((()=>()=>{DE(l.ctrls,(e=>e.stop(!0)))}));const y=f.map((e=>({...e})));return i?[y,i]:y}function EI(e,t){const n=RE.fun(e),[[r],i]=CI(1,n?e:[e],n?t||[]:t);return n||2==arguments.length?[r,i]:r}var TI=class extends JN{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=bT(...t);const n=this._get(),r=mN(n);oN(this,r.create(n))}advance(e){const t=this._get();PE(t,this.get())||(sN(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&II(this._active)&&jI(this)}_get(){const e=RE.arr(this.source)?this.source.map(jT):OE(jT(this.source));return this.calc(...e)}_start(){this.idle&&!II(this._active)&&(this.idle=!1,DE(aN(this),(e=>{e.done=!1})),jE.skipAnimation?(dE.batchedUpdates((()=>this.advance())),jI(this)):JE.start(this))}_attach(){let e=1;DE(OE(this.source),(t=>{IT(t)&&MT(t,this),GN(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){DE(OE(this.source),(e=>{IT(e)&&OT(e,this)})),this._active.clear(),jI(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=OE(this.source).reduce(((e,t)=>Math.max(e,(GN(t)?t.priority:0)+1)),0))}};function NI(e){return!1!==e.idle}function II(e){return!e.size||Array.from(e).every(NI)}function jI(e){e.idle||(e.idle=!0,DE(aN(e),(e=>{e.done=!0})),RT(e,{type:"idle",parent:e}))}var AI=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new TI(e,n)};jE.assign({createStringInterpolator:KT,to:(e,t)=>new TI(e,t)});JE.advance;var RI=/^--/;function PI(e,t){return null==t||"boolean"===typeof t||""===t?"":"number"!==typeof t||0===t||RI.test(e)||MI.hasOwnProperty(e)&&MI[e]?(""+t).trim():t+"px"}var DI={};var MI={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OI=["Webkit","Ms","Moz","O"];MI=Object.keys(MI).reduce(((e,t)=>(OI.forEach((n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t])),e)),MI);var LI=/^(matrix|translate|scale|rotate|skew)/,UI=/^(translate)/,FI=/^(rotate|skew)/,zI=(e,t)=>RE.num(e)&&0!==e?e+t:e,BI=(e,t)=>RE.arr(e)?e.every((e=>BI(e,t))):RE.num(e)?e===t:parseFloat(e)===t,VI=class extends dN{constructor(e){let{x:t,y:n,z:r,...i}=e;const s=[],o=[];(t||n||r)&&(s.push([t||0,n||0,r||0]),o.push((e=>[`translate3d(${e.map((e=>zI(e,"px"))).join(",")})`,BI(e,0)]))),ME(i,((e,t)=>{if("transform"===t)s.push([e||""]),o.push((e=>[e,""===e]));else if(LI.test(t)){if(delete i[t],RE.und(e))return;const n=UI.test(t)?"px":FI.test(t)?"deg":"";s.push(OE(e)),o.push("rotate3d"===t?e=>{let[t,r,i,s]=e;return[`rotate3d(${t},${r},${i},${zI(s,n)})`,BI(s,0)]}:e=>[`${t}(${e.map((e=>zI(e,n))).join(",")})`,BI(e,t.startsWith("scale")?1:0)])}})),s.length&&(i.transform=new qI(s,o)),super(i)}},qI=class extends PT{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return DE(this.inputs,((n,r)=>{const i=jT(n[0]),[s,o]=this.transforms[r](RE.arr(i)?i:n.map(jT));e+=" "+s,t=t&&o})),t?"none":e}observerAdded(e){1==e&&DE(this.inputs,(e=>DE(e,(e=>IT(e)&&MT(e,this)))))}observerRemoved(e){0==e&&DE(this.inputs,(e=>DE(e,(e=>IT(e)&&OT(e,this)))))}eventObserved(e){"change"==e.type&&(this._value=null),RT(this,e)}};jE.assign({batchedUpdates:l.unstable_batchedUpdates,createStringInterpolator:KT,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var $I=function(e){let{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=e=>new dN(e),getComponentProps:r=e=>e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},s=e=>{const t=bN(e)||"Anonymous";return(e=RE.str(e)?s[e]||(s[e]=gN(e,i)):e[vN]||(e[vN]=gN(e,i))).displayName=`Animated(${t})`,e};return ME(e,((t,n)=>{RE.arr(e)&&(n=bN(t)),s[n]=s(t)})),{animated:s}}(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{className:r,style:i,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...u}=t,c=Object.values(u),h=Object.keys(u).map((t=>n||e.hasAttribute(t)?t:DI[t]||(DI[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())))));void 0!==s&&(e.textContent=s);for(const d in i)if(i.hasOwnProperty(d)){const t=PI(d,i[d]);RI.test(d)?e.style.setProperty(d,t):e.style[d]=t}h.forEach(((t,n)=>{e.setAttribute(t,c[n])})),void 0!==r&&(e.className=r),void 0!==o&&(e.scrollTop=o),void 0!==a&&(e.scrollLeft=a),void 0!==l&&e.setAttribute("viewBox",l)},createAnimatedStyle:e=>new VI(e),getComponentProps:e=>{let{scrollTop:t,scrollLeft:n,...r}=e;return r}}),WI=$I.animated;const HI=n.p+"static/media/card-back.8fec901b131ffc01b12e.jpg";const KI=function(e){let{deck:t,cardIndex:n,placeholder:r,flip:i,position:o,backToChosenCards:a,highlight:l,size:u,showName:c,flyAway:h}=e;const[d,f]=(0,s.useState)(!1),p=o,[{transform:m,opacity:g,zIndex:y,boxShadow:v},b]=EI((()=>({boxShadow:"0 12.5px 10px -10px rgba(50, 50, 73, 0.4)",opacity:1,transform:"perspective(600px) rotateY(0deg) scale(1)",zIndex:0,config:{mass:5,tension:300,friction:100}})));(0,s.useEffect)((()=>{if(h&&!d){console.log({flyAway:h});const e=Math.random()>.5?1:-1,t=Math.random()*window.innerWidth,n=3e3*e;Math.random();b({to:{transform:`translateX(${t}px) translateY(${n}px) rotateY(180deg) scale(1)`},from:{transform:"translateX(0px) translateY(0px) rotateY(180deg) scale(1)"},config:{mass:1,tension:200,friction:300}}),f(!0)}}),[h,d,b]),(0,s.useEffect)((()=>{h||(b({transform:`perspective(600px) rotateY(${i?180:0}deg) scale(${i?1.2:1}) translateY(${i?p:"0px"})`,zIndex:i?10:0,opacity:i?1:0,immediate:e=>"zIndex"===e}),a&&b({transform:"perspective(600px) rotateY(180deg) scale(1) translateY(0px)",zIndex:0}))}),[i,a,b,p]),(0,s.useEffect)((()=>{l&&!h&&(console.log({highlight:l}),b({boxShadow:"0 0 20px 10px gold",transform:`perspective(600px) rotateY(180deg) scale(1.3) translateY(${p})`,zIndex:100,immediate:e=>"zIndex"===e}),setTimeout((()=>{b({boxShadow:"0 12.5px 10px -10px rgba(50, 50, 73, 0.4)",transform:"perspective(600px) rotateY(180deg) scale(1) translateY(0px)",zIndex:10})}),1500))}),[l]);const w={position:"relative",width:u.width,height:u.height,zIndex:y},_={position:"absolute",display:"flex",borderStyle:"solid",borderWidth:"4px",borderRadius:"4px",borderColor:"white",boxShadow:v,width:"100%",height:"100%",backfaceVisibility:"hidden",backgroundImage:`url(${HI})`,opacity:g.to((e=>1-e)),transform:m,transformStyle:"preserve-3d"};return r?(0,tx.jsx)("div",{style:{width:u.width,height:u.height,borderStyle:"dashed",borderWidth:"2px",borderColor:"white",borderRadius:"8px"}}):(0,tx.jsxs)(WI.div,{style:w,children:[(0,tx.jsx)(WI.div,{className:"card",style:{..._,backgroundImage:"url('images/card-back.jpg')",opacity:g.to((e=>1-e))}}),(0,tx.jsx)(WI.div,{className:"card "+(l?"highlight":""),style:{..._,backgroundImage:`url(${t[n].imageUrl})`,opacity:g,rotateY:"180deg"},children:c&&(()=>{const e=t[n].name,r=e.split(" ")[0],i=e.split(" ").slice(1).join(" ");return(0,tx.jsxs)("div",{className:"text-white text-center bg-gray-800 w-full p-1 text-sm flex justify-center self-end",children:[r," ",(0,tx.jsx)("br",{})," ",i," "]})})()})]})},GI=e=>{let{topCards:t,deck:n,deckType:r,cardSize:i,word:s}=e;const o=EI({from:{transform:"translateY(100%)",opacity:0},to:{transform:"translateY(0)",opacity:1}}),a="original"===r?"cards":r;return(0,tx.jsx)(WI.div,{style:o,className:"fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-50",children:(0,tx.jsxs)("div",{className:"bg-gray-800 text-white rounded-lg shadow-lg p-8 pb-9 border-4 border-gray-200",children:[(0,tx.jsxs)("h2",{className:"text-3xl font-bold mb-8 text-center",children:["Top 5 ",a," associated with the word ",(0,tx.jsx)("span",{className:"text-green-500 font-bold uppercase",children:s})]}),(0,tx.jsx)("div",{className:"grid grid-cols-5 gap-4",children:t.map(((e,t)=>(0,tx.jsx)("div",{className:"p-3",children:(0,tx.jsx)(KI,{size:i,deck:n,cardIndex:e,flip:!0,showName:Boolean(n[e].name)})},t)))})]})})},QI=e=>{let{gameData:t,gameRef:n,players:r,deck:i}=e;const{currentRound:o,shortId:a,numCards:l,deckType:u}=t,c=o%r.length,h=r[c].name,[d,f]=(0,s.useState)(null),[p,m]=(0,s.useState)(null),[g,y]=(0,s.useState)(!1),[v,b]=(0,s.useState)({stage:"",highlightedCard:null,cardIndex:0,playerIndex:0,score:0,startPosition:{x:0,y:0},endPosition:{x:0,y:0}}),[w,_]=(0,s.useState)([]),[x,S]=(0,s.useState)(!1);(0,s.useEffect)((()=>{_([]),S(!1);const e=mp(n,"rounds");vm(em(e,nm("roundNumber","==",o))).then((t=>{if(1===t.size){const n=t.docs[0].id,r=gp(e,n);_m(r,(e=>{m(r),f(e.data())}))}else console.error("Invalid short ID.")}))}),[o,n]),(0,s.useEffect)((()=>{const{stage:e,cardIndex:t,playerIndex:n}=v;"highlight"!==e||n>=r.length||function(){const e=r[n].chosenCards[t],i=(e=>{const{cardIndex:t,playerIndex:n}=v;let i=!1,s=0;for(let o=0;o<r.length;o++){if(o===n)continue;const a=r[o].chosenCards;e===a[t]?(i=!0,s+=G_(t,t)):-1!==a.indexOf(e)&&(i=!0,s+=G_(t,a.indexOf(e)))}return d.players[n].roundScore+=s,{match:i,score:s}})(e);i.match?setTimeout((()=>{b({...v,highlightedCard:e,stage:"adjustScore",score:i.score})}),500):b({...v,highlightedCard:null,stage:"nextCard",score:0})}()}),[v]),(0,s.useEffect)((()=>{const{stage:e,cardIndex:t,playerIndex:n,score:r}=v;"adjustScore"===e&&setTimeout((()=>{b({...v,stage:"animateScore"})}),100)}),[v]),(0,s.useEffect)((()=>{const{stage:e,cardIndex:t,playerIndex:n}=v;if("nextCard"!==e)return;let r=t+1,i=n,s=!1;4===t&&(i=n+1,r=0,s=!0);const o={...v,cardIndex:r,playerIndex:i,stage:"highlight"};setTimeout((()=>{b(o)}),s?500:0)}),[v]),(0,s.useEffect)((()=>{if(d&&d.flippedCards===l+1){const e=async()=>{const e=[...r];let t=[],n={};for(let r=0;r<e.length;r++){const i=e[r];i.roundScore=0;const s=d.players.find((e=>e.name===i.name));i.gameScore=s.gameScore,i.connections=s.connections;const o=i.chosenCards;for(const[e,t]of o.entries()){const r=10-e;n[t]?n[t]+=r:n[t]=r}for(let n=0;n<e.length;n++){if(r===n)continue;const s=e[n],a=Q_(o,s.chosenCards);i.roundScore+=a,i.connections&&i.connections[s.name]?i.connections[s.name]+=a:i.connections[s.name]=a,t.push(i.connections[s.name])}i.gameScore+=i.roundScore}S(!0),setTimeout((()=>{_(Object.entries(n).sort(((e,t)=>t[1]-e[1])).map((e=>e[0])).slice(0,5))}),1e3),t.sort(((e,t)=>e-t));const i=t[Math.floor(t.length/2)];try{await bm(p,{players:e,scoresCalculated:!0,connectionScores:t,connectionThreshold:i}),console.log("Update successful")}catch(Bm){console.error("Error updating document: ",Bm)}};d.scoresCalculated||e()}}),[d]),(0,s.useEffect)((()=>{(async()=>{let e=!0;for(let t of r)if(t.chosenCards.length<l){e=!1;break}if(e)try{await bm(p,{allCardsSubmitted:!0}),console.log("Update successful")}catch(Bm){console.error("Error updating document: ",Bm)}})()}),[r]);if(!d)return(0,tx.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,tx.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})});return(0,tx.jsxs)("div",{children:[(0,tx.jsx)(sx,{className:""+(r.length<=4?"max-w-screen-lg":"max-w-screen-xl"),gameCode:(0,tx.jsxs)("span",{children:["Game Code:  ",(0,tx.jsx)("span",{className:"text-yellow-500 font-bold uppercase",children:a})]}),round:o,word:(()=>{const e=d.word;return e?(0,tx.jsxs)("span",{children:["Word:  ",(0,tx.jsx)("span",{className:"text-green-500 font-bold uppercase",children:e})]}):(0,tx.jsxs)("span",{children:["Waiting for ",(0,tx.jsx)("span",{className:"text-green-500 font-bold",children:h})," to choose the word"]})})()}),(0,tx.jsx)("div",{className:(r.length>8?"mx-2":"max-w-screen-xl")+" mx-auto mt-2",children:(0,tx.jsx)("div",{className:`grid grid-cols-${Math.ceil(r.length/4)} gap-2`,children:r.map(((e,t)=>(0,tx.jsxs)("div",{className:"flex bg-gray-800 text-gray-200 rounded-lg shadow px-3 pt-2 "+(r.length<=4?"mx-auto":""),style:{width:r.length<=4?"55%":"auto"},children:[(0,tx.jsx)("div",{className:"flex flex-col justify-center items-center",children:(0,tx.jsx)("div",{className:"",children:(0,tx.jsx)("div",{className:"text-base font-semibold w-12 mr-2 pb-2 text-center",children:e.name})})}),(0,tx.jsx)("div",{className:"flex flex-col",children:(0,tx.jsx)("div",{className:"flex items-center mb-2",children:(0,tx.jsx)("div",{className:`flex-grow grid grid-cols-${l} gap-1`,children:e.chosenCards.length===l?e.chosenCards.map(((e,n)=>{return(0,tx.jsx)("div",{className:"p-1",children:(0,tx.jsx)(KI,{size:{width:100,height:140},deck:i,cardIndex:e,flip:d.flippedCards>n,position:(r=t,5*Math.floor(r/2)-30+"px"),backToChosenCards:n+1<d.flippedCards,highlight:e===v.highlightedCard,flyAway:x})},e);var r})):Array(l).fill().map(((e,t)=>(0,tx.jsx)("div",{className:"p-1",children:(0,tx.jsx)(KI,{size:{width:100,height:140},placeholder:!0})},t)))})})})]},t)))})}),w.length>0&&(0,tx.jsx)(GI,{topCards:w,deck:i,deckType:u,cardSize:{width:150,height:210},word:d.word})]})};const JI=function(e){let{word:t,points:n,highlight:r,allPlayersHaveWord:i,isRevealed:o,isCrossedOut:a}=e;const[{transform:l,boxShadow:u},c]=EI((()=>({transform:"scale(1)",config:{mass:5,tension:300,friction:100}})));(0,s.useEffect)((()=>{r&&(console.log({highlight:r}),c({transform:"scale(1.5)"}),setTimeout((()=>{c({transform:"scale(1)"})}),1500))}),[r]);const h={transform:l};return(0,tx.jsxs)(WI.div,{className:`text-center ${o?"":"blur-sm text-white"} ${a?"line-through text-gray-500":"text-white"}`,style:h,children:[t,o?a?(0,tx.jsx)("span",{className:"text-red-400 ml-1",children:"(0)"}):(0,tx.jsxs)("span",{className:"text-green-400 ml-1",children:["+",n]}):null]})},YI=e=>{let{gameData:t,gameRef:n,players:r}=e;const{currentRound:i,shortId:o}=t,a=i%r.length,l=r[a].name,[u,c]=(0,s.useState)(null),[h,d]=(0,s.useState)([]);if((0,s.useEffect)((()=>{const e=mp(n,"rounds");vm(em(e,nm("roundNumber","==",i))).then((t=>{if(1===t.size){const n=t.docs[0].id;_m(gp(e,n),(e=>{c(e.data())}))}else console.error("Invalid short ID.")}))}),[i,n]),(0,s.useEffect)((()=>{if(null!==u&&void 0!==u&&u.wordsRevealed&&0===h.length){const e=[...r].sort(((e,t)=>{var n,r;return((null===(n=t.foundWords)||void 0===n?void 0:n.length)||0)-((null===(r=e.foundWords)||void 0===r?void 0:r.length)||0)}));d(e)}}),[null===u||void 0===u?void 0:u.wordsRevealed,r]),!u)return(0,tx.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,tx.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})});const f=u.globallyRevealedWords||{},p=u.playerScores||{},m=u.revealState||{},g=m.currentPlayerIndex||0,y=m.currentWord||"",v=(h.length>0?h:[...r].sort(((e,t)=>{var n,r;return((null===(n=t.foundWords)||void 0===n?void 0:n.length)||0)-((null===(r=e.foundWords)||void 0===r?void 0:r.length)||0)}))).filter((e=>null!=e));return(0,tx.jsxs)("div",{children:[(0,tx.jsx)(sx,{className:""+(r.length<=4?"max-w-screen-lg":"max-w-screen-xl"),gameCode:(0,tx.jsxs)("span",{children:["Game Code:  ",(0,tx.jsx)("span",{className:"text-yellow-500 font-bold uppercase",children:o})]}),round:i,word:(()=>{const e=u.word;return e?(0,tx.jsxs)("span",{children:["Word:  ",(0,tx.jsx)("span",{className:"text-green-500 font-bold uppercase",children:e})]}):(0,tx.jsxs)("span",{children:["Waiting for ",(0,tx.jsx)("span",{className:"text-green-500 font-bold",children:l})," to choose the word"]})})()}),(0,tx.jsx)("div",{className:"grid grid-cols-4 gap-2 justify-stretch mt-2 mx-auto max-w-screen-xl",children:v.map(((e,t)=>{var n,r;const i=h.length>0&&(null===(n=h[g])||void 0===n?void 0:n.id)===e.id;return(0,tx.jsxs)("div",{className:"flex flex-col bg-gray-800 text-gray-200 rounded-lg p-4 m-2\n                "+(i?"border-2 border-yellow-500":""),children:[(0,tx.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-700 pb-2 mb-2",children:[(0,tx.jsx)("div",{className:"text-left font-semibold "+(i?"text-yellow-400":""),children:e.name}),(0,tx.jsxs)("div",{className:"text-lg",children:[(null===(r=e.foundWords)||void 0===r?void 0:r.length)||0," words | ",p[e.id]||0," pts"]})]}),(0,tx.jsx)("div",{className:"grid grid-cols-2 gap-2 text-2xl",children:Array.isArray(e.foundWords)&&e.foundWords.map(((t,n)=>{const{isRevealed:r,isCrossedOut:i,points:s}=((e,t)=>{const n=f[e];return n?{isRevealed:!0,isCrossedOut:n.revealedBy!==t||0===n.points,points:n.points}:{isRevealed:!1,isCrossedOut:!1,points:0}})(t,e.name),o=y===t;return(0,tx.jsx)(JI,{word:t,points:s,highlight:o,isRevealed:r,isCrossedOut:i},n)}))})]},e.id||t)}))})]})},XI=()=>(0,tx.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,tx.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}),ZI=e=>{let{small:t,height:n,width:r,data:i,strongestPlayer:o,strongestPair:a}=e;const l=20,u=20,c=40,h=20,d=4/i.nodes.length+.5,f=(0,s.useRef)();return(0,s.useEffect)((()=>{const e=(()=>{const e=i.nodes.reduce(((e,t)=>t.group>e?t.group:e),0)+1,t=Math.ceil(Math.sqrt(e)),s=Math.ceil(e/t),o=[];for(let i=0;i<s;i++)for(let a=0;a<t&&i*t+a<e;a++)o[i*t+a]={x:(a+1)*r/(t+1),y:(i+1)*n/(s+1)};return o})();CC(f.current).selectAll("*").remove();const s=CC(f.current).attr("width",r+h+u).attr("height",n+l+c).append("g").attr("transform",`translate(${h},${l})`),p=t?25:30*d,m=i.topScore;function g(e){return Math.pow((e-0)/(m-0),1)}const y=e=>{const n=g(e.value);return(t?25:30*d)*n},v=(t?-500:-2e3*d)/Object.keys(e).length;const b=e=>e.source.id===a.source&&e.target.id===a.target||e.source.id===a.target&&e.target.id===a.source,w=t=>{if(1===e.length)return t.id===o?1:.1;const n=i.nodes.filter((e=>e.group===t.group)).map((e=>e.id)),r=i.links.filter((e=>n.includes(e.source.id)||n.includes(e.target.id))),s={};for(let e of r)s[e.source.id]?s[e.source.id]+=e.value:s[e.source.id]=e.value;const a=Object.entries(s).sort(((e,t)=>t[1]-e[1]))[0];return 0===r.length||a[0]===t.id?1:.1},_=rE(i.nodes).force("link",function(e){var t,n,r,i,s,o,a=YC,l=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},u=HC(30),c=1;function h(r){for(var i=0,a=e.length;i<c;++i)for(var l,u,h,d,f,p,m,g=0;g<a;++g)u=(l=e[g]).source,d=(h=l.target).x+h.vx-u.x-u.vx||KC(o),f=h.y+h.vy-u.y-u.vy||KC(o),d*=p=((p=Math.sqrt(d*d+f*f))-n[g])/p*r*t[g],f*=p,h.vx-=d*(m=s[g]),h.vy-=f*m,u.vx+=d*(m=1-m),u.vy+=f*m}function d(){if(r){var o,l,u=r.length,c=e.length,h=new Map(r.map(((e,t)=>[a(e,t,r),e])));for(o=0,i=new Array(u);o<c;++o)(l=e[o]).index=o,"object"!==typeof l.source&&(l.source=XC(h,l.source)),"object"!==typeof l.target&&(l.target=XC(h,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(o=0,s=new Array(c);o<c;++o)l=e[o],s[o]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);t=new Array(c),f(),n=new Array(c),p()}}function f(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+l(e[n],n,e)}function p(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+u(e[t],t,e)}return null==e&&(e=[]),h.initialize=function(e,t){r=e,o=t,d()},h.links=function(t){return arguments.length?(e=t,d(),h):e},h.id=function(e){return arguments.length?(a=e,h):a},h.iterations=function(e){return arguments.length?(c=+e,h):c},h.strength=function(e){return arguments.length?(l="function"===typeof e?e:HC(+e),f(),h):l},h.distance=function(e){return arguments.length?(u="function"===typeof e?e:HC(+e),p(),h):u},h}(i.links).id((e=>e.id)).distance((e=>{const n=g(e.value);return(t?30:40*d)*(1/n)})).strength(1)).force("charge",function(){var e,t,n,r,i,s=HC(-30),o=1,a=1/0,l=.81;function u(n){var i,s=e.length,o=VC(e,eE,tE).visitAfter(h);for(r=n,i=0;i<s;++i)t=e[i],o.visit(d)}function c(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+s(n,t,e)}}function h(e){var t,n,r,s,o,a=0,l=0;if(e.length){for(r=s=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(a+=t.value,l+=n,r+=n*t.x,s+=n*t.y);e.x=r/l,e.y=s/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{a+=i[t.data.index]}while(t=t.next)}e.value=a}function d(e,s,u,c){if(!e.value)return!0;var h=e.x-t.x,d=e.y-t.y,f=c-s,p=h*h+d*d;if(f*f/l<p)return p<a&&(0===h&&(p+=(h=KC(n))*h),0===d&&(p+=(d=KC(n))*d),p<o&&(p=Math.sqrt(o*p)),t.vx+=h*e.value*r/p,t.vy+=d*e.value*r/p),!0;if(!(e.length||p>=a)){(e.data!==t||e.next)&&(0===h&&(p+=(h=KC(n))*h),0===d&&(p+=(d=KC(n))*d),p<o&&(p=Math.sqrt(o*p)));do{e.data!==t&&(f=i[e.data.index]*r/p,t.vx+=h*f,t.vy+=d*f)}while(e=e.next)}}return u.initialize=function(t,r){e=t,n=r,c()},u.strength=function(e){return arguments.length?(s="function"===typeof e?e:HC(+e),c(),u):s},u.distanceMin=function(e){return arguments.length?(o=e*e,u):Math.sqrt(o)},u.distanceMax=function(e){return arguments.length?(a=e*e,u):Math.sqrt(a)},u.theta=function(e){return arguments.length?(l=e*e,u):Math.sqrt(l)},u}().strength(v)).force("x",iE().x((t=>e[t.group].x)).strength(w)).force("y",sE().y((t=>e[t.group].y)).strength(w)).force("collide",JC(1.5*p)).alphaDecay(.01).velocityDecay(.5),x=s.append("g").attr("stroke-opacity",.6).selectAll("line").data(i.links).join("line").attr("stroke",(e=>b(e)?"darkgreen":"#bbb")).attr("stroke-width",(e=>(b(e),y(e)))),S=s.append("g").selectAll("circle").data(i.nodes).join("circle").attr("r",(e=>e.id===o?p+8:p)).attr("fill",(e=>V_[e.group])).attr("stroke-width",(e=>e.id===o?8:2)).attr("stroke",(e=>e.id===o?"gold":"#2c3e50")).call(function(e){return LC().on("start",(function(t){t.active||e.alphaTarget(.3).restart(),t.subject.fx=t.subject.x,t.subject.fy=t.subject.y})).on("drag",(function(e){e.subject.fx=e.x,e.subject.fy=e.y})).on("end",(function(t){t.active||e.alphaTarget(0),t.subject.fx=null,t.subject.fy=null}))}(_)),k=s.append("g").attr("class","labels").selectAll("text").data(i.nodes).join("text").text((e=>e.id)).attr("x",(e=>e.x)).attr("y",(e=>e.y+1)).attr("text-anchor","middle").attr("dominant-baseline","middle").style("fill",(e=>ex(V_[e.group]))).style("font-size",(e=>(t?18:20*d)-e.id.length+"px")).style("font-weight","bold");_.on("tick",(()=>{(()=>{i.nodes.length;let e,t,s=0,o=0;if(i.nodes.forEach((i=>{const a=Math.sqrt((r/2-i.x)*(r/2-i.x)+(n/2-i.y)*(n/2-i.y));a>s&&(o=s,s=a,t=e,e=i)})),Math.abs(s-o)>10){const t=r/2-e.x,s=n/2-e.y;i.nodes.forEach((e=>{e.vx+=.001*t,e.vy+=.001*s}))}})(),S.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)),k.attr("x",(e=>e.x)).attr("y",(e=>e.y)),x.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y))}))}),[i]),(0,tx.jsx)("svg",{ref:f})};const ej=function(e){let{gameData:t,gameRef:n}=e;const[r,i]=(0,s.useState)(null),[o,a]=(0,s.useState)({nodes:[],links:[]}),[l,u]=(0,s.useState)(null),[c,h]=(0,s.useState)(null);if(Math.floor(10*Math.random()),(0,s.useEffect)((()=>{const e=mp(n,"rounds");vm(em(e,nm("roundNumber","==",t.gameLength))).then((t=>{if(1===t.size){const n=t.docs[0].id;_m(gp(e,n),(e=>{i(e.data())}))}else console.error("Invalid short ID.")}))}),[t.gameLength,n]),(0,s.useEffect)((()=>{if(!r||!Number.isInteger(r.connectionThreshold))return;const e={nodes:[],links:[]};let t={};const n=(e,i)=>{if(!Object.hasOwn(t,i.name)){t[i.name]=e;for(let[t,s]of Object.entries(i.connections)){const i=r.players.find((e=>e.name===t));s>r.connectionThreshold&&n(e,i)}}};(()=>{let i=0;n(i,r.players[0]);for(let e=1;e<r.players.length;e++){const s=r.players[e];Object.hasOwn(t,s.name)||(i++,n(i,s))}for(let[n,r]of Object.entries(t))e.nodes.push({id:n,group:r})})();(()=>{for(let t=0;t<r.players.length;t++){const n=r.players[t];for(let i=t+1;i<r.players.length;i++){const t=n.connections[r.players[i].name];t>r.connectionThreshold&&e.links.push({source:n.name,target:r.players[i].name,value:t})}}})();const i=r.connectionScores[r.connectionScores.length-1];e.topScore=i,a(e);const s=[...r.players].sort(((e,t)=>t.gameScore-e.gameScore))[0];u(s),h(Object.values(s.connections).filter((e=>e>r.connectionThreshold)).length)}),[r]),!t||!r||!l)return(0,tx.jsx)(XI,{});[...r.players].sort(((e,t)=>t.roundScore-e.roundScore));let d=0,f=0,p={};(()=>{for(let e=0;e<r.players.length;e++){const t=r.players[e];for(let[e,n]of Object.entries(t.connections))f+=n,n>d&&(d=n,p={source:t.name,target:e,value:n})}})();const m=20*r.players.length+320;return(0,tx.jsx)("div",{children:l&&Number.isInteger(c)&&(0,tx.jsxs)("div",{children:[(0,tx.jsx)(sx,{className:"max-w-screen-md"}),(0,tx.jsxs)("div",{className:"max-w-screen-md mx-auto mt-3",children:[(0,tx.jsxs)("div",{className:"text-center mb-4 p-4 bg-gray-800 text-gray-200 rounded-lg",children:[(0,tx.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Game Summary"}),(0,tx.jsxs)("p",{className:"text-2xl",children:[(0,tx.jsx)("span",{className:"font-bold text-yellow-400",children:l.name})," had the most in common with everyone!"]}),(0,tx.jsxs)("p",{className:"text-2xl",children:[(0,tx.jsx)("span",{className:"font-bold text-green-500",children:p.source})," & ",(0,tx.jsx)("span",{className:"font-bold text-green-500",children:p.target})," had the most in common with each other!"]})]}),(0,tx.jsxs)("div",{className:"flex justify-around",children:[!1,(0,tx.jsx)("div",{className:"bg-gray-100 border border-4 border-gray-800 rounded-lg",children:(0,tx.jsx)(ZI,{width:724,height:m,data:o,strongestPlayer:l.name,strongestPair:p})})]})]})]})})},tj=()=>{const[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(null),[i,o]=(0,s.useState)([]),{shortId:a}=ie();if((0,s.useEffect)((()=>{vm(em(mp(F_,"games"),nm("shortId","==",a))).then((e=>{if(1===e.size){const n=e.docs[0].id,i=gp(F_,"games",n);r(i),_m(i,(e=>{t(e.data())}))}else console.error("Invalid short ID.")}))}),[a]),(0,s.useEffect)((()=>{if(n){const e=_m(em(mp(n,"players"),sm("joinedAt","asc")),(e=>{o((t=>{const n=new Map(t.map((e=>[e.id,e])));e.docs.forEach((e=>{const t={id:e.id,...e.data()},r=n.get(e.id);r&&JSON.stringify(r)===JSON.stringify(t)||n.set(e.id,t)}));const r=new Set(e.docs.map((e=>e.id)));return n.forEach(((e,t)=>{r.has(t)||n.delete(t)})),Array.from(n.values())}))}));return()=>e()}}),[n]),!e)return(0,tx.jsx)(XI,{});return(0,tx.jsx)("div",{children:(()=>{const{deckType:t,indexDeck:r,gameState:s,gameType:o}=e;if("setup"===s)return(0,tx.jsx)(uE,{gameData:e,gameRef:n,players:i});if("buildDeck"===s)return(0,tx.jsx)(cE,{gameData:e,gameRef:n,players:i});if("started"===s){if("Incommon"===o)return(0,tx.jsx)(QI,{deck:K_(r,t),gameData:e,gameRef:n,players:i});if("Out of Words, Words"===o)return(0,tx.jsx)(YI,{gameData:e,gameRef:n,players:i})}return"ended"===s?(0,tx.jsx)(ej,{deck:K_(r,t),gameData:e,gameRef:n,players:i}):(0,tx.jsx)("div",{children:"Something went wrong"})})()})};const nj={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function rj(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function ij(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-rj(t-e,n-t,r)+t:e>n?+rj(e-n,n-t,r)+n:e}function sj(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function oj(e,t,n){return(t=sj(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aj(Object(n),!0).forEach((function(t){oj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const uj={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function cj(e){return e?e[0].toUpperCase()+e.slice(1):""}const hj=["enter","leave"];function dj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=uj[e],i=r&&r[t]||t;return"on"+cj(e)+cj(i)+(function(){let e=arguments.length>1?arguments[1]:void 0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!hj.includes(e)}(n,i)?"Capture":"")}const fj=["gotpointercapture","lostpointercapture"];function pj(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=fj.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function mj(e){return"touches"in e}function gj(e){return mj(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function yj(e){return mj(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function vj(e){return function(e){return Array.from(e.touches).filter((t=>{var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((e=>e.identifier))}function bj(e){const t=yj(e);return mj(e)?t.identifier:t.pointerId}function wj(e){const t=yj(e);return[t.clientX,t.clientY]}function _j(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e(...n)}return e}function xj(){}function Sj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?xj:1===t.length?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function kj(e,t){return Object.assign({},t,e||{})}class Cj{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?_j(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:r}=this;t.args=this.args;let i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s})}return t}(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);nj.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[s,o]=t._movement,[a,l]=n.threshold,{_step:u,values:c}=t;if(n.hasCustomTransform?(!1===u[0]&&(u[0]=Math.abs(s)>=a&&c[0]),!1===u[1]&&(u[1]=Math.abs(o)>=l&&c[1])):(!1===u[0]&&(u[0]=Math.abs(s)>=a&&Math.sign(s)*a),!1===u[1]&&(u[1]=Math.abs(o)>=l&&Math.sign(o)*l)),t.intentional=!1!==u[0]||!1!==u[1],!t.intentional)return;const h=[0,0];if(n.hasCustomTransform){const[e,t]=c;h[0]=!1!==u[0]?e-u[0]:0,h[1]=!1!==u[1]?t-u[1]:0}else h[0]=!1!==u[0]?s-u[0]:0,h[1]=!1!==u[1]?o-u[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const d=t.offset,f=t._active&&!t._blocked||t.active;f&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=_j(n.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[p,m]=t.offset,[[g,y],[v,b]]=t._bounds;t.overflow=[p<g?-1:p>y?1:0,m<v?-1:m>b?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const w=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){let[r,i]=t,[s,o]=n;const[[a,l],[u,c]]=e;return[ij(r,a,l,s),ij(i,u,c,o)]}(t._bounds,t.offset,w),t.delta=nj.sub(t.offset,d),this.computeMovement(),f&&(!t.last||i>32)){t.delta=nj.sub(t.offset,d);const e=t.delta.map(Math.abs);nj.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[e[0]/i,e[1]/i],t.timeDelta=i)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const r=this.handler(lj(lj(lj({},t),e),{},{[this.aliasKey]:e.values}));void 0!==r&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class Ej extends Cj{constructor(){super(...arguments),oj(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=nj.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=nj.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const r="object"===typeof n.axisThreshold?n.axisThreshold[gj(e)]:n.axisThreshold;t.axis=function(e,t){let[n,r]=e;const i=Math.abs(n),s=Math.abs(r);return i>s&&i>t?"x":s>i&&s>t?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const Tj=e=>e,Nj={enabled(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},eventOptions:(e,t,n)=>lj(lj({},n.shared.eventOptions),e),preventDefault(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},rubberband(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return nj.toVector(e)}},from:e=>"function"===typeof e?e:null!=e?nj.toVector(e):void 0,transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||Tj},threshold:e=>nj.toVector(e,0)};const Ij=lj(lj({},Nj),{},{axis(e,t,n){let{axis:r}=n;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},bounds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return t=>Ij.bounds(e(t));if("current"in e)return()=>e.current;if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),jj={ArrowRight:function(e){return[e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowLeft:function(e){return[-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowUp:function(e){return[0,-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]},ArrowDown:function(e){return[0,e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]}};const Aj="undefined"!==typeof window&&window.document&&window.document.createElement;function Rj(){return Aj&&"ontouchstart"in window}const Pj={isBrowser:Aj,gesture:function(){try{return"constructor"in GestureEvent}catch(PP){return!1}}(),touch:Rj(),touchscreen:Rj()||Aj&&window.navigator.maxTouchPoints>1,pointer:Aj&&"onpointerdown"in window,pointerLock:Aj&&"exitPointerLock"in window.document},Dj=.5,Mj=50,Oj=250,Lj={mouse:0,touch:0,pen:8},Uj=lj(lj({},Ij),{},{device(e,t,n){let{pointer:{touch:r=!1,lock:i=!1,mouse:s=!1}={}}=n;return this.pointerLock=i&&Pj.pointerLock,Pj.touch&&r?"touch":this.pointerLock?"mouse":Pj.pointer&&!s?"pointer":Pj.touch?"touch":"mouse"},preventScrollAxis(e,t,n){let{preventScroll:r}=n;if(this.preventScrollDelay="number"===typeof r?r:r||void 0===r&&e?250:void 0,Pj.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture(e,t,n){let{pointer:{capture:r=!0,buttons:i=1,keys:s=!0}={}}=n;return this.pointerButtons=i,this.keys=s,!this.pointerLock&&"pointer"===this.device&&r},threshold(e,t,n){let{filterTaps:r=!1,tapsThreshold:i=3,axis:s}=n;const o=nj.toVector(e,r?i:s?1:0);return this.filterTaps=r,this.tapsThreshold=i,o},swipe(){let{velocity:e=Dj,distance:t=Mj,duration:n=Oj}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{velocity:this.transform(nj.toVector(e)),distance:this.transform(nj.toVector(t)),duration:n}},delay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?lj(lj({},Lj),e):Lj,keyboardDisplacement(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:10}});lj(lj({},Nj),{},{device(e,t,n){let{shared:r,pointer:{touch:i=!1}={}}=n;if(r.target&&!Pj.touch&&Pj.gesture)return"gesture";if(Pj.touch&&i)return"touch";if(Pj.touchscreen){if(Pj.pointer)return"pointer";if(Pj.touch)return"touch"}},bounds(e,t,n){let{scaleBounds:r={},angleBounds:i={}}=n;const s=e=>{const t=kj(_j(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},o=e=>{const t=kj(_j(i,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof r&&"function"!==typeof i?[s(),o()]:e=>[s(e),o(e)]},threshold(e,t,n){this.lockDirection="lock"===n.axis;return nj.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});lj(lj({},Ij),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});lj(lj({},Ij),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});const Fj=new Map,zj=new Map;const Bj={key:"drag",engine:class extends Ej{constructor(){super(...arguments),oj(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=Ij.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=bj(e),n._pointerActive=!0,this.computeValues(wj(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==gj(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;const r=bj(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;const i=wj(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=nj.sub(i,t._values),this.computeValues(i)),nj.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(o){0}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const r=bj(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[i,s]=t._distance;if(t.tap=i<=n.tapsThreshold&&s<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[e,r]=t._delta,[i,s]=t._movement,[o,a]=n.swipe.velocity,[l,u]=n.swipe.distance,c=n.swipe.duration;if(t.elapsedTime<c){const n=Math.abs(e/t.timeDelta),c=Math.abs(r/t.timeDelta);n>o&&Math.abs(i)>l&&(t.swipe[0]=Math.sign(e)),c>a&&Math.abs(s)>u&&(t.swipe[1]=Math.sign(r))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(e)}),this.config.delay)}keyDown(e){const t=jj[e.key];if(t){const n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,nj.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in jj&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:Uj};function Vj(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const qj={target(e){if(e)return()=>"current"in e?e.current:e},enabled(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},window(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pj.isBrowser?window:void 0},eventOptions(){let{passive:e=!0,capture:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{passive:e,capture:t}},transform:e=>e},$j=["target","eventOptions","window","enabled","transform"];function Wj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n={};for(const[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=Wj(e[r],i);break;case"boolean":i&&(n[r]=e[r])}return n}class Hj{constructor(e,t){oj(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,r,i){const s=this._listeners,o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=uj[e];return e+(n&&n[t]||t)}(t,n),a=lj(lj({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(o,r,a);const l=()=>{e.removeEventListener(o,r,a),s.delete(l)};return s.add(l),l}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class Kj{constructor(){oj(this,"_timeouts",new Map)}add(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];this._timeouts.set(e,window.setTimeout(t,n,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class Gj{constructor(e){oj(this,"gestures",new Set),oj(this,"_targetEventStore",new Hj(this)),oj(this,"gestureEventStores",{}),oj(this,"gestureTimeoutStores",{}),oj(this,"handlers",{}),oj(this,"config",{}),oj(this,"pointerIds",new Set),oj(this,"touchIds",new Set),oj(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&Qj(e,"drag");t.wheel&&Qj(e,"wheel");t.scroll&&Qj(e,"scroll");t.move&&Qj(e,"move");t.pinch&&Qj(e,"pinch");t.hover&&Qj(e,"hover")}(this,e)}setEventIds(e){return mj(e)?(this.touchIds=new Set(vj(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,u=Vj(r,$j);if(n.shared=Wj({target:i,eventOptions:s,window:o,enabled:a,transform:l},qj),t){const e=zj.get(t);n[t]=Wj(lj({shared:n.shared},u),e)}else for(const c in u){const e=zj.get(c);e&&(n[c]=Wj(lj({shared:n.shared},u[c]),e))}return n}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=this.config.shared,i={};let s;if(!r.target||(s=r.target(),s)){if(r.enabled){for(const n of this.gestures){const e=this.config[n],r=Jj(i,e.eventOptions,!!s);if(e.enabled){new(Fj.get(n))(this,t,n).bind(r)}}const e=Jj(i,r.eventOptions,!!s);for(const n in this.nativeHandlers)e(n,"",(e=>this.nativeHandlers[n](lj(lj({},this.state.shared),{},{event:e,args:t}))),void 0,!0)}for(const e in i)i[e]=Sj(...i[e]);if(!s)return i;for(const e in i){const{device:t,capture:n,passive:r}=pj(e);this._targetEventStore.add(s,t,"",i[e],{capture:n,passive:r})}}}}function Qj(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Hj(e,t),e.gestureTimeoutStores[t]=new Kj}const Jj=(e,t,n)=>function(r,i,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var l,u;const c=null!==(l=o.capture)&&void 0!==l?l:t.capture,h=null!==(u=o.passive)&&void 0!==u?u:t.passive;let d=a?r:dj(r,i,c);n&&h&&(d+="Passive"),e[d]=e[d]||[],e[d].push(s)};function Yj(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const i=s.useMemo((()=>new Gj(e)),[]);if(i.applyHandlers(e,r),i.applyConfig(t,n),s.useEffect(i.effect.bind(i)),s.useEffect((()=>i.clean.bind(i)),[]),void 0===t.target)return i.bind.bind(i)}function Xj(e,t){var n;return n=Bj,Fj.set(n.key,n.engine),zj.set(n.key,n.resolver),Yj({drag:e},t||{},"drag")}let Zj=900;const eA=-193,tA=263;let nA=[...Array(32)].map((()=>"ready"));const rA=function(e){let{deck:t,handleSelectCards:n,gameData:r}=e;const[i,o]=(0,s.useState)(!1),[a,l]=(0,s.useState)(null),[u,c]=(0,s.useState)([]),[h,d]=(0,s.useState)(new Set),{numCards:f}=r,p=(0,s.useRef)([]);(0,s.useEffect)((()=>{p.current=Array.from({length:f},(()=>(0,s.createRef)()))}),[]),(0,s.useEffect)((()=>{nA=[...Array(32)].map((()=>"ready")),c([])}),[r.currentRound]);const m=EI({from:{y:-1e3},to:{y:i?0:-1e3},config:{tension:200,friction:20}}),g=e=>{const t=nA[e].startsWith("box"),n="ready"===nA[e],r="marked"===nA[e];let s={width:130,height:190,scale:1,rot:6*Math.random()-3,delay:10*e};return i?t?{...s,zIndex:1e3}:n?{...s,x:0,y:0}:{...s,x:0,y:-1e3}:t?{...s,y:-1e3}:r?{...s,x:0,y:tA,zIndex:Zj-e}:{...s,x:0,y:0,zIndex:e}},y=(e,t)=>`rotateY(${e/10}deg) rotateZ(${e}deg) scale(${t})`,v=()=>"scale(1)",[b,w]=CI(nA.length,(e=>({...g(e),from:{x:0,rot:0,scale:1,y:-1e3}})));function _(){if(o(!i),i){for(let e=0;e<nA.length;e++)if("deck"===nA[e])nA[e]="ready";else if("ready"===nA[e]||"reviewed"===nA[e]){nA[e]="marked";const t=new Set(h);t.add(e),d(t)}}else{for(let t=0;t<nA.length;t++)if("reviewed"===nA[t]||"ready"===nA[t])nA[t]="deck";else if("marked"===nA[t]){nA[t]="ready";const e=new Set(h);e.delete(t),d(e)}const e=[...u];e[f]="placeholder"+Math.random(),c(e)}}(0,s.useEffect)((()=>{w.start((e=>({...g(e)})))}),[i,w]);const x=e=>{if(e===f)return{bx:0,by:0};const t=p.current[e].current;return{bx:t.offsetLeft+-235,by:t.offsetTop+166}},S=()=>{for(let e=0;e<f;e++)if(!Number.isInteger(u[e]))return!1;return!0};(0,s.useEffect)((()=>{w.start((e=>{const t=nA.filter((e=>"ready"===e)).length,n=u.findIndex((t=>t===e));if(-1!==n){if(n===f){const e=[...u];e[f]=void 0,c(e)}const{bx:e,by:r}=x(n);return{x:e,y:r,scale:1,rot:0,zIndex:n===f?t+Zj:1e3}}return{}}))}),[u,w]);const k=(e,t,n)=>{if(t>4)nA[e]="ready",n[t]=e;else{const r=n[t];n[t]=e,nA[e]="box"+t,Number.isInteger(r)&&k(r,t+1,n)}},C=Xj((e=>{let{args:[t],active:n,xy:[r,s],movement:[o,f],offset:[m,g],direction:[y,v],velocity:[b,_]}=e,S=nA[t];if(console.log({state:nA[t],mx:o,my:f}),"ready"===S?f>80&&!i?nA[t]="readyToMarked":o<-80&&(nA[t]="toReviewed"):"reviewed"===S?f>60&&!i?nA[t]="reviewedToMarked":o>80&&(nA[t]="toReady"):"marked"===S&&f<-80&&!i&&(nA[t]="markedToReady"),n){let e=!1;const t={width:90,height:160,x:r,y:s};p.current.forEach(((n,r)=>{if(n.current){const i=n.current.getBoundingClientRect(),s=-85,o=-150;t.x+s<i.right&&t.x+s+t.width>i.left&&t.y+o<i.bottom&&t.y+o+t.height>i.top&&(l(r),e=!0)}})),e||l(null)}if(!n){if(Number.isInteger(a)&&Number.isInteger(t)){console.log({hoveredBox:a,index:t});const e=[...u],n=e.findIndex((e=>e===t));-1!==n&&(e[n]=null);const r=e[a];Number.isInteger(r)&&k(r,a+1,e),e[a]=t,c(e),nA[t]="box"+a}l(null)}w.start((e=>{if(t!==e)return;S=nA[e];let r=o,l=f,p=2e3;const m=nA.filter((e=>"ready"===e)).length,g=nA.filter((e=>"reviewed"===e)).length,y=nA.filter((e=>"marked"===e)).length;switch(S){case"ready":n||(r=0,l=0,p=m+Zj);break;case"toReviewed":n||(r=eA,l=0,p=g+Zj,nA[e]="reviewed");break;case"reviewed":n?r=o+eA:(r=eA,l=0,p=g+Zj);break;case"toReady":n?r=o+eA:(r=0,l=0,p=m+Zj,nA[e]="ready")}if(i){if(S.startsWith("box")){const t=parseInt(S.charAt(3)),{bx:i,by:h}=x(t);if(n)r=o+i,l=f+h;else if(!Number.isInteger(a)){console.log({y:s}),r=0,l=0,p=m+Zj,nA[e]="ready";const n=[...u];n[t]=null,c(n)}}}else switch(S){case"readyToMarked":if(!n){r=0,l=tA,p=y+Zj,nA[e]="marked";const t=new Set(h);t.add(e),d(t)}break;case"reviewedToMarked":if(n)r=o+eA;else{r=0,l=tA,p=y+Zj,nA[e]="marked";const t=new Set(h);t.add(e),d(t)}break;case"markedToReady":if(n)l=f+tA;else{r=0,l=0,p=m+Zj,nA[e]="ready";const t=new Set(h);t.delete(e),d(t)}break;case"marked":n?(r=o,l=f+tA):(r=0,l=tA,p=y+Zj)}return{x:r,y:l,zIndex:p,vx:b,vy:_,scale:n?1.3:1,delay:0,config:{friction:40,tension:400,mass:1},immediate:e=>"zIndex"===e&&n}}))})),E=(0,tx.jsxs)("div",{className:"absolute bg-gray-800 bg-text-300 border-t border-gray-500 mt-2",children:[(0,tx.jsx)("div",{className:"flex flex-wrap justify-center items-center mt-2 max-h-screen",children:p.current.length>0&&p.current.map(((e,t)=>(0,tx.jsx)(WI.div,{ref:e,className:`box ${a===t?"bg-gray-300 text-gray-800 border-solid shadow-[0_0_10px_10px_rgba(255,255,255,1)]":"text-gray-300 border-dashed"} \n          border-2 border-gray-300 p-6 m-1 rounded-lg flex items-center justify-center \n          text-2xl font-bold w-[100px] h-[140px] ${t>2?"mt-2":""}`,style:m,children:t+1},t)))}),(0,tx.jsxs)("div",{className:"flex items-center mt-2",children:[(0,tx.jsx)(ix,{className:"w-1/2 mx-4 mb-4 mt-2 bg-gray-800 border border-gray-300 text-gray-300",style:{fontSize:"1rem"},buttonType:"secondary",onClick:_,children:"Back to Deck"}),(0,tx.jsx)(ix,{style:{fontSize:"1rem"},className:"w-1/2 mx-4 mb-4 mt-2 "+(S()?"bg-green-600 text-white":"bg-gray-500 text-gray-100"),disabled:!S(),onClick:()=>(e=>{S()?n(e):alert(`You must select ${f} cards in order`)})(u),children:"Submit Cards"})]})]}),T=()=>(0,tx.jsx)("div",{style:{width:i?118:150,height:i?162:210},className:"text-gray-100 border-dashed border-2 border-gray-100 rounded-lg"}),N=e=>{const n=t[e].name;if(!n)return;const r=n.split(" ")[0],s=n.split(" ").slice(1).join(" ");return(0,tx.jsxs)("div",{className:`text-white text-center bg-gray-800 opacity-90 w-full p-1 ${i?"text-xs":"text-sm"} flex justify-center self-end`,children:[r," ",(0,tx.jsx)("br",{})," ",s]})},I=()=>{const e=[...nA].filter((e=>"marked"===e||e.startsWith("box"))).length;return e};return(0,tx.jsxs)("div",{className:"",children:[(0,tx.jsxs)("div",{className:"text-gray-100 bg-gray-800 border-b border-gray-500 shadow py-2",children:[(0,tx.jsxs)("div",{className:"relative flex items-center justify-evenly",style:{height:i?"175px":"230px"},children:[b.map(((e,n)=>{let{x:r,y:s,width:o,height:a,zIndex:l,rot:c,scale:h,flip:d,vx:p,vy:m}=e,g=y,b=18;if(i){b=27;const e=u.findIndex((e=>e===n)),t=-1!==e&&e<f;g=t?v:y,t?(o=96,a=136):(o=110,a=154)}const w=nA[n].startsWith("box");return(0,tx.jsx)(WI.div,{className:"deck",style:{right:b,x:r,y:s,zIndex:l},children:(0,tx.jsx)(WI.div,{...C(n),className:"rounded-lg",style:{display:"flex",zIndex:l,width:o,height:a,transform:AI([c,h],g),backgroundImage:`url(${t[n].imageUrl})`},children:!w&&N(n)})},n)})),T(),(0,tx.jsx)("div",{className:"",children:(0,tx.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:(0,tx.jsx)("path",{fillRule:"evenodd",d:"M15.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l3.22-3.22H7.5a.75.75 0 0 1 0-1.5h11.69l-3.22-3.22a.75.75 0 0 1 0-1.06Zm-7.94 9a.75.75 0 0 1 0 1.06l-3.22 3.22H16.5a.75.75 0 0 1 0 1.5H4.81l3.22 3.22a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"})})}),T()]}),!i&&(0,tx.jsxs)("div",{className:"flex justify-around",children:[(0,tx.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,tx.jsx)("path",{fillRule:"evenodd",d:"M3.97 3.97a.75.75 0 0 1 1.06 0l13.72 13.72V8.25a.75.75 0 0 1 1.5 0V19.5a.75.75 0 0 1-.75.75H8.25a.75.75 0 0 1 0-1.5h9.44L3.97 5.03a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})}),(0,tx.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,tx.jsx)("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v16.19l6.22-6.22a.75.75 0 1 1 1.06 1.06l-7.5 7.5a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 1 1 1.06-1.06l6.22 6.22V3a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})})]}),i&&E]}),!i&&(0,tx.jsxs)("div",{className:"flex justify-evenly markedSection pb-6",children:[(0,tx.jsxs)("div",{className:"p-4 w-1/2 ml-2 mr-4",children:[(0,tx.jsxs)("div",{className:"markedInstructions text-gray-300 flex items-center justify-center text-xl pt-6",children:["Swipe ",f," or more cards down to order"]}),(0,tx.jsx)(ix,{onClick:_,disabled:I()<f,className:"w-full mt-8",children:"Ready to Order"})]}),(0,tx.jsxs)("div",{className:"w-1/2 ml-5",children:[(0,tx.jsx)("div",{className:"markedCards text-gray-300 border-dashed border-2 border-gray-300 rounded-lg flex items-center justify-center text-2xl font-bold",children:"First Pass Cards"}),(0,tx.jsxs)("div",{className:"relative text-xl text-gray-300 font-bold pt-2",children:[I()," cards ready"]})]})]})]})},iA=e=>{let{gameData:t,gameRef:n,players:r,deck:i}=e;const{currentRound:o,gameLength:a,wordSelection:l,deckType:u,numCards:c}=t,h=o%r.length,{currentPlayerName:d,currentPlayerId:f}=(0,s.useContext)(nx),p=r[0].name===d,[m,g]=(0,s.useState)(""),[y,v]=(0,s.useState)(""),[b,w]=(0,s.useState)(null),[_,x]=(0,s.useState)(!1),[S,k]=(0,s.useState)(0),[C,E]=(0,s.useState)([]);(0,s.useEffect)((()=>{console.log({currentPlayerId:f})}),[f]),(0,s.useEffect)((()=>{const e=mp(n,"rounds");vm(em(e,nm("roundNumber","==",o))).then((t=>{if(1===t.size){const n=t.docs[0].id,r=gp(e,n);_m(r,(e=>{w(r),v(e.data())}))}else console.error("Invalid short ID.")}))}),[o,n]),(0,s.useEffect)((()=>{const e=r.find((e=>e.name===d));x(e.chosenCards&&e.chosenCards.length>0)}),[r,d]);const T=async e=>{e.preventDefault(),await bm(b,{word:m}),g("")},N=async e=>{const t=Object.values(e).slice(0,c);try{const e=gp(n,"players",f);await bm(e,{chosenCards:t}),x(!0)}catch(Bm){console.error("Error updating player's chosenCards: ",Bm)}},I=async()=>{if(S<=c){const e=S+1;k(e),await bm(b,{flippedCards:e})}},j=async()=>{(async()=>{const e=em(mp(n,"players"));try{const t=(await vm(e)).docs;for(const e of t){const t=e.ref;await bm(t,{chosenCards:[]})}}catch(Bm){console.error("Error clearing chosen cards: ",Bm)}})(),k(0),g(""),E([]);const e=[...r];for(let t=0;t<y.players.length;t++)e[t].gameScore=y.players[t].gameScore,e[t].connections=y.players[t].connections;try{if(o===a)await bm(n,{gameState:"ended"});else{const t=mp(n,"rounds");await wm(t,{roundNumber:o+1,word:"",players:e}),await bm(n,{currentRound:o+1})}}catch(Bm){console.error("Error updating document: ",Bm)}},A=()=>{if("wordList"===l){if(!C||0===C.length){const e=function(e){const t=[],n=B_[e];for(let r=0;r<5;r++){let e=!1;for(;!e;){const r=n[Math.floor(Math.random()*n.length)];W_.includes(r)||(t.push(r),W_.push(r),e=!0)}}return t}(u);E(e)}return(0,tx.jsxs)("div",{className:"bg-gray-800 mx-4 text-gray-300 text-lg p-6 mt-4 rounded-lg",children:[(0,tx.jsxs)("p",{className:"text-2xl font-semibold mb-4",children:["Choose the word for ",(0,tx.jsx)("br",{}),"round ",o]}),(0,tx.jsx)("div",{className:"",children:C.map(((e,t)=>(0,tx.jsx)(ix,{onClick:()=>(async e=>{g(e),await bm(b,{word:e})})(e),buttonType:"large",className:"w-full mb-6",children:e},t)))})]})}return(0,tx.jsx)("div",{className:"bg-gray-800 mx-4 text-gray-300 text-lg p-4 mt-4 rounded-lg",children:(0,tx.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,tx.jsxs)("p",{className:"text-lg font-semibold",children:["Choose the word for round ",o]}),(0,tx.jsx)("input",{type:"text",placeholder:"Enter your word...",value:m,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-500 rounded shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,tx.jsx)(ix,{className:"w-full",type:"submit",children:"Choose Word"})]})})};return(0,tx.jsx)("div",{className:"max-w-screen-sm mx-auto text-center",children:(()=>{const e=r[h].name===d;return y.word?_?p?(()=>{let e="Start Next Round";return y.allCardsSubmitted?(S<c?e=`Flip ${J_(S+1)} Card`:S===c?e="Show Top Cards":o===a&&(e="Show End Screen"),(0,tx.jsx)("div",{className:"m-4",children:S<=c?(0,tx.jsx)(ix,{className:"w-full",onClick:I,children:e}):(0,tx.jsx)(ix,{className:"w-full",onClick:j,children:e})})):(0,tx.jsxs)("p",{className:"mx-4 text-xl font-semibold text-gray-300 bg-gray-800 px-4 py-2 rounded-lg shadow mt-4",children:["Sit tight. ",(0,tx.jsx)("br",{})," Some people are slow."]})})():y.allCardsSubmitted?(0,tx.jsxs)("p",{className:"mx-4 text-lg font-semibold text-gray-300 bg-gray-800 px-4 py-2 rounded-lg shadow mt-4",children:["All cards are in! ",(0,tx.jsx)("br",{}),"Now ",(0,tx.jsx)("span",{className:"text-green-500 font-bold",children:r[0].name})," can flip the cards."]}):(0,tx.jsx)("p",{className:"mx-4 text-lg font-semibold text-gray-300 bg-gray-800 px-4 py-2 rounded-lg shadow mt-4",children:"Sit tight. Not everyone is as fast as you."}):(0,tx.jsx)("div",{className:"max-w-screen-sm bg-gray-800",children:(0,tx.jsxs)("div",{className:"deckContainer mb-4 mx-auto bg-gray-800",children:[(0,tx.jsxs)("p",{className:"flex justify-between items-center font-semibold text-gray-300 bg-gray-800 border-b border-gray-500 px-2 py-1",children:[(0,tx.jsxs)("span",{className:"text-md",children:["Round ",o]}),(0,tx.jsx)("span",{className:"text-lg font-bold uppercase text-green-500",children:y.word})]}),(0,tx.jsx)(rA,{deck:i,gameData:t,handleSelectCards:N})]})}):e?A():(0,tx.jsx)("div",{className:"m-4 text-gray-300 bg-gray-800 rounded-lg shadow",children:(0,tx.jsxs)("p",{className:"text-2xl font-semibold  px-4 py-2",children:["Waiting for ",(0,tx.jsx)("span",{className:"text-green-500 font-bold",children:r[h].name})," ",(0,tx.jsx)("br",{}),"to choose the word"]})})})()})},sA=e=>{let{duration:t}=e;const[n,r]=(0,s.useState)(t),[i,o]=(0,s.useState)("100%");(0,s.useEffect)((()=>{if(n>0){const e=setInterval((()=>{r((e=>{const n=e-1;return o(n/t*100+"%"),n}))}),1e3);return()=>clearInterval(e)}}),[n,t]);return(0,tx.jsx)("div",{className:"w-full h-4 bg-gray-700 rounded",children:(0,tx.jsx)("div",{className:`h-full rounded ${(()=>{const e=n/t*100;return e<=20?"bg-red-500":e<=40?"bg-yellow-500":"bg-green-500"})()}`,style:{width:i}})})},oA=e=>{let{word:t,minWordLength:n,foundWords:r,setFoundWords:i,duration:o}=e;const a=t.split(""),[l,u]=(0,s.useState)([]),[c,h]=(0,s.useState)(""),[d,f]=(0,s.useState)([]),[p,m]=(0,s.useState)(!0),[g,y]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{try{const e=await fetch("words/wordlist.txt");if(!e.ok)throw new Error("Failed to load word list");const t=(await e.text()).split("\n").map((e=>e.trim()));f(t),m(!1)}catch(e){y(e.message),m(!1)}})()}),[]);const v=e=>l.some((t=>t.index===e));return p?(0,tx.jsx)("div",{className:"text-gray-300",children:"Loading word list..."}):g?(0,tx.jsxs)("div",{className:"text-red-500",children:["Error: ",g]}):(0,tx.jsxs)(tx.Fragment,{children:[(0,tx.jsx)("div",{className:"px-2 py-4",children:(0,tx.jsx)(sA,{duration:o})}),(0,tx.jsxs)("div",{className:"out-of-words-words px-4 bg-gray-800 rounded-lg text-gray-300",children:[(0,tx.jsxs)("div",{className:"controls-container flex items-center justify-between gap-4",children:[(0,tx.jsx)("button",{onClick:()=>{const e=[...l];e.pop(),u(e),h(e.map((e=>e.letter.toUpperCase())).join(""))},className:"backspace-button px-4 py-3 bg-red-500 text-white rounded shadow text-xl",children:"Delete"}),(0,tx.jsx)("div",{className:"current-word-container mb-4 text-3xl",children:(0,tx.jsx)("span",{className:"guess font-bold",children:c})}),(0,tx.jsx)("button",{onClick:()=>{c.length<n?alert("too short"):r.includes(c)?alert("already found!"):d.includes(c.toLowerCase())?i([...r,c]):alert(`Word "${c}" is not valid!`),u([]),h("")},className:"submit-button px-4 py-3 bg-green-500 text-white rounded shadow text-xl",children:"Enter"})]}),(0,tx.jsx)("div",{className:"letters-container flex flex-wrap justify-center mb-4",children:a.map(((e,t)=>(0,tx.jsx)("button",{onClick:()=>((e,t)=>{const n=[...l,{letter:e,index:t}];u(n),h(c+e.toUpperCase())})(e,t),disabled:v(t),className:"letter-button w-14 h-14 m-1 rounded shadow text-3xl font-bold "+(v(t)?"bg-gray-500 text-gray-300":"bg-blue-500 text-white"),children:e.toUpperCase()},t)))}),(0,tx.jsxs)("div",{className:"found-words-container mt-6 bg-gray-900 p-4 rounded-lg",children:[(0,tx.jsx)("h3",{className:"text-2xl font-bold mb-4",children:"Found Words:"}),(0,tx.jsx)("div",{className:"grid grid-cols-3 gap-2",children:r.length>0&&r.map(((e,t)=>(0,tx.jsx)("div",{className:"text-white text-xl",children:e},t)))})]})]})]})},aA=e=>{let{gameData:t,gameRef:n,players:r}=e;const{currentRound:i,minWordLength:o,gameTime:a,numRounds:l}=t,u=i%r.length,{currentPlayerName:c,currentPlayerId:h}=(0,s.useContext)(nx),d=r[0].name===c,[f,p]=(0,s.useState)(""),[m,g]=(0,s.useState)(""),[y,v]=(0,s.useState)(null),[b,w]=(0,s.useState)([]),[_,x]=(0,s.useState)(!1),[S,k]=(0,s.useState)([]),[C,E]=(0,s.useState)(!1),[T,N]=(0,s.useState)(""),[I,j]=(0,s.useState)([]),[A,R]=(0,s.useState)(0),[P,D]=(0,s.useState)(0),[M,O]=(0,s.useState)(!1),[L,U]=(0,s.useState)({}),[F,z]=(0,s.useState)({}),B=60*a;let V;(0,s.useEffect)((()=>{console.log({currentPlayerId:h})}),[h]),(0,s.useEffect)((()=>{if(_){async function e(){try{const e=gp(n,"players",h);await bm(e,{foundWords:S})}catch(Bm){console.error("Error updating player's chosenCards: ",Bm)}}e()}}),[_]),(0,s.useEffect)((()=>{x(!1),k([]),E(!1),g(null),j([]),R(0),D(0),U({}),z({});const e=mp(n,"rounds");vm(em(e,nm("roundNumber","==",i))).then((t=>{if(1===t.size){const n=t.docs[0].id,r=gp(e,n);_m(r,(e=>{v(r),g(e.data()),e.data().word&&!V&&(V=setTimeout((()=>x(!0)),1e3*B))}))}else console.error("Invalid short ID.")}))}),[i,n]),(0,s.useEffect)((()=>{r.find((e=>e.name===c))}),[r,c]);const q=async e=>{p(e),await bm(y,{word:e})},$=async()=>{E(!0);const e=[...r].sort(((e,t)=>{var n,r;return((null===(n=t.foundWords)||void 0===n?void 0:n.length)||0)-((null===(r=e.foundWords)||void 0===r?void 0:r.length)||0)}));j(e);const t={};e.forEach((e=>{t[e.id]=0})),z(t),await bm(y,{wordsRevealed:!0,revealState:{currentPlayerIndex:0,currentWordIndex:0,currentWord:""}})},W=(e,t,n)=>{if(null===e||void 0===e||!e.foundWords)return{word:null,index:-1};for(let r=t;r<e.foundWords.length;r++)if(void 0===n[e.foundWords[r]])return{word:e.foundWords[r],index:r};return{word:null,index:-1}},H=async()=>{if(M)return;let e=A,t=P,n=null,r=-1,i=-1;for(;e<I.length;){const s=I[e],{word:o,index:a}=W(s,t,L);if(null!==o){n=o,r=e,i=a;break}e++,t=0}if(null===n){const e=I.map((e=>({...e,score:F[e.id]||0,gameScore:(e.gameScore||0)+(F[e.id]||0)})));return void await bm(y,{players:e,globallyRevealedWords:L,playerScores:F,revealComplete:!0,revealState:{currentPlayerIndex:A,currentWordIndex:P,currentWord:""}})}r!==A&&R(r),D(i),O(!0);const s=I.filter((e=>{var t;return null===(t=e.foundWords)||void 0===t?void 0:t.includes(n)})),o=I.length-s.length,a=n.length*o,l={...L,[n]:{points:a,revealedBy:I[r].name}};U(l);const u={...F};s.forEach((e=>{u[e.id]=(u[e.id]||0)+a})),z(u),await bm(y,{globallyRevealedWords:l,playerScores:u,revealState:{currentPlayerIndex:r,currentWordIndex:i,currentWord:n}}),setTimeout((()=>{D(i+1),O(!1)}),2e3)},K=async()=>{w([]);const e=[...r];for(let t=0;t<m.players.length;t++)e[t].gameScore=m.players[t].gameScore;try{const t=l||m.players.length;if(i===t)await bm(n,{gameState:"ended"});else{const t=mp(n,"rounds");await wm(t,{roundNumber:i+1,word:"",players:e}),await bm(n,{currentRound:i+1})}}catch(Bm){console.error("Error updating document: ",Bm)}},G=()=>{const e=m.revealState||{},t=e.currentWord||"",n=d?F:m.playerScores||{},s=(n[h],r.find((e=>e.name===c))),o=(null===s||void 0===s?void 0:s.foundWords)||[],a=I.length>0?I:[...r].sort(((e,t)=>{var n,r;return((null===(n=t.foundWords)||void 0===n?void 0:n.length)||0)-((null===(r=e.foundWords)||void 0===r?void 0:r.length)||0)})),u=d?A:e.currentPlayerIndex||0,f=a[u],p=f?`${f.name}'s words`:"";return(0,tx.jsxs)("div",{className:"m-4",children:[t&&(0,tx.jsxs)("div",{className:"bg-gray-800 border-2 border-green-500 p-5 rounded-lg mb-4",children:[(0,tx.jsx)("p",{className:"text-lg text-gray-400 uppercase",children:"Revealing"}),(0,tx.jsx)("p",{className:"text-5xl font-bold text-green-400 uppercase",children:t})]}),d&&!m.revealComplete&&(0,tx.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg mb-4",children:[(0,tx.jsx)("p",{className:"text-lg text-gray-300 mb-3",children:p}),(0,tx.jsx)(ix,{className:"w-full text-xl",buttonType:"large",onClick:H,disabled:M,children:M?"Revealing...":"Next"})]}),(0,tx.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg mb-4",children:[(0,tx.jsx)("p",{className:"text-xl text-gray-400 mb-3 border-b border-gray-600 pb-2",children:"Leaderboard"}),(0,tx.jsx)("div",{className:"flex flex-col gap-2",children:[...a].map((e=>({...e,score:n[e.id]||0}))).sort(((e,t)=>t.score-e.score)).map(((e,t)=>{var n;const r=e.name===c,i=(null===(n=a[u])||void 0===n?void 0:n.id)===e.id,s=0===t?"\ud83e\udd47":1===t?"\ud83e\udd48":2===t?"\ud83e\udd49":"";return(0,tx.jsxs)("div",{className:"flex justify-between items-center px-3 py-2 rounded-lg\n                      "+(i?"border-2 border-blue-400 bg-blue-900/50":r?"bg-gray-700":"bg-gray-900"),children:[(0,tx.jsxs)("span",{className:"text-xl "+(r?"font-bold text-white":"text-gray-300"),children:[s," ",e.name]}),(0,tx.jsx)("span",{className:"text-xl font-bold text-green-400",children:e.score})]},e.id||t)}))})]}),(0,tx.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,tx.jsx)("p",{className:"text-xl text-gray-400 mb-3 border-b border-gray-600 pb-2",children:"Your Words"}),(0,tx.jsx)("div",{className:"grid grid-cols-2 gap-3 text-2xl",children:o.map(((e,n)=>{const{isRevealed:r,isCrossedOut:i,points:s}=(e=>{const t=(d?L:m.globallyRevealedWords||{})[e];return t?{isRevealed:!0,isCrossedOut:t.revealedBy!==c||0===t.points,points:t.points}:{isRevealed:!1,isCrossedOut:!1,points:0}})(e),o=t===e;return(0,tx.jsx)(JI,{word:e,points:s,highlight:o,isRevealed:!0,isCrossedOut:!!r&&i},n)}))})]}),m.revealComplete&&(0,tx.jsx)("div",{className:"mt-4",children:d?(0,tx.jsx)(ix,{className:"w-full",buttonType:"large",onClick:K,children:i===(l||r.length)?"End Game":"Start Next Round"}):(0,tx.jsxs)("p",{className:"text-xl font-semibold text-gray-300 bg-gray-800 px-4 py-3 rounded-lg",children:["Waiting for ",(0,tx.jsx)("span",{className:"text-green-500 font-bold",children:r[0].name})," to ",i===(l||r.length)?"end the game":"start next round"]})})]})},Q=()=>{if(!b||0===b.length){const e=function(){const e=[],t=B_.outofwords;for(let n=0;n<5;n++){let n=!1;for(;!n;){const r=t[Math.floor(Math.random()*t.length)].toUpperCase();W_.includes(r)||(e.push(r),W_.push(r),n=!0)}}return e}();w(e)}return(0,tx.jsxs)("div",{className:"bg-gray-800 mx-4 text-gray-300 text-xl p-6 mt-4 rounded-lg",children:[(0,tx.jsxs)("p",{className:"text-2xl font-semibold mb-4",children:["Choose the word for ",(0,tx.jsx)("br",{}),"round ",i]}),(0,tx.jsx)("div",{className:"",children:b.map(((e,t)=>(0,tx.jsx)(ix,{onClick:()=>q(e),buttonType:"large",className:"w-full mb-6 text-xl",children:e},t)))}),(0,tx.jsxs)("div",{className:"mt-2 border-t border-gray-600 pt-4",children:[(0,tx.jsx)("p",{className:"text-xl mb-2",children:"Or type your own:"}),(0,tx.jsxs)("div",{className:"flex gap-2",children:[(0,tx.jsx)("input",{type:"text",value:T,onChange:e=>N(e.target.value.toUpperCase()),className:"flex-1 px-4 py-3 bg-gray-700 rounded text-white uppercase text-xl",placeholder:"Enter word..."}),(0,tx.jsx)(ix,{onClick:()=>q(T),disabled:T.length<6,className:"text-xl px-4",children:"Use"})]})]})]})};return(0,tx.jsx)("div",{className:"max-w-screen-sm mx-auto text-center",children:(()=>{if(!m)return(0,tx.jsx)("div",{className:"m-4 text-gray-300",children:(0,tx.jsx)("div",{className:"animate-pulse",children:"Loading round..."})});const e=r[u].name===c;return m.word?_?d?m.wordsRevealed?G():(0,tx.jsx)("div",{className:"m-4",children:(0,tx.jsx)(ix,{className:"w-full",buttonType:"large",onClick:$,children:"Reveal Words"})}):m.wordsRevealed?G():(0,tx.jsxs)("p",{className:"mx-4 text-xl font-semibold text-gray-300 bg-gray-800 px-4 py-3 rounded-lg shadow mt-4",children:["Times up! ",(0,tx.jsx)("br",{}),"Now ",(0,tx.jsx)("span",{className:"text-green-500 font-bold",children:r[0].name})," can start the reveal."]}):(0,tx.jsx)("div",{className:"max-w-screen-sm bg-gray-800",children:(0,tx.jsxs)("div",{className:"deckContainer mb-4 mx-auto bg-gray-800",children:[(0,tx.jsxs)("p",{className:"flex justify-between items-center font-semibold text-gray-300 bg-gray-800 border-b border-gray-500 px-3 py-2",children:[(0,tx.jsxs)("span",{className:"text-lg",children:["Round ",i]}),(0,tx.jsx)("span",{className:"text-2xl font-bold uppercase text-green-500",children:m.word})]}),(0,tx.jsx)("div",{children:(0,tx.jsx)(oA,{word:m.word,minWordLength:o,foundWords:S,setFoundWords:k,duration:B})})]})}):e?Q():(0,tx.jsx)("div",{className:"m-4 text-gray-300 bg-gray-800 rounded-lg shadow",children:(0,tx.jsxs)("p",{className:"text-2xl font-semibold px-4 py-4",children:["Waiting for ",(0,tx.jsx)("span",{className:"text-green-500 font-bold",children:r[u].name})," ",(0,tx.jsx)("br",{}),"to choose the word"]})})})()})},lA=e=>{let{header:t,message:n,dismiss:r,modalAction:i}=e;const s=EI({from:{transform:"translateY(100%)",opacity:0},to:{transform:"translateY(0)",opacity:1}});return(0,tx.jsx)(WI.div,{style:s,className:"fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-50",children:(0,tx.jsxs)("div",{className:"bg-gray-800 text-white rounded-lg shadow-lg p-6 border-4 border-gray-200",children:[(0,tx.jsx)("h2",{className:"text-3xl font-bold mb-4 text-center",children:t}),(0,tx.jsx)("div",{className:"flex justify-center",children:(0,tx.jsx)("div",{className:"w-56",children:n})}),(0,tx.jsxs)("div",{className:"flex items-center mt-2",children:[(0,tx.jsx)(ix,{className:"w-1/2 mx-4 mb-4 mt-2 bg-gray-800 border border-gray-300 text-gray-300",style:{fontSize:"1rem"},buttonType:"secondary",onClick:r,children:"Cancel"}),(0,tx.jsx)(ix,{style:{fontSize:"1rem"},className:"w-1/2 mx-4 mb-4 mt-2",onClick:i,children:"Ok"})]})]})})},uA=e=>{let{gameData:t,gameRef:n,players:r}=e;const{currentPlayerName:i,currentPlayerId:o}=(0,s.useContext)(nx),[a,l]=(0,s.useState)(t.deckType||"life"),[u,c]=(0,s.useState)(t.gameLength||3),[h,d]=(0,s.useState)(t.wordSelection||"wordList"),[f,p]=(0,s.useState)(t.minWordLength||4),[m,g]=(0,s.useState)(t.gameTime||2),[y,v]=(0,s.useState)(t.numRounds||r.length),[b,w]=(0,s.useState)(!1),[_,x]=(0,s.useState)("");(0,s.useEffect)((()=>{y<r.length&&v(r.length)}),[r.length]),(0,s.useEffect)((()=>{(async()=>{"Incommon"===t.gameType?await bm(n,{gameLength:parseInt(u),deckType:a,wordSelection:h}):"Out of Words, Words"===t.gameType&&await bm(n,{minWordLength:parseInt(f),gameTime:parseInt(m),numRounds:parseInt(y)})})()}),[u,a,h,f,m,y]);const S=e=>{d(e.target.value)},k=e=>{l(e.target.value)},C=e=>{c(e.target.value)},E=e=>{p(e.target.value)},T=e=>{g(e.target.value)},N=e=>{v(e.target.value)};if(!r.length)return(0,tx.jsx)(XI,{});const{shortId:I}=t,j=r[0].name===i,A=async()=>{const e=em(mp(F_,"games",n.id,"players"),nm("name","==",_));try{const r=await vm(e);if(r.empty)return void console.log("Player not found.");const i=gp(F_,"games",n.id,"players",r.docs[0].id);await(t=i,xm(lp(t.firestore,bp),[new Tc(t._key,pc.none())])),console.log("Player deleted successfully."),x("")}catch(Bm){console.error("Error deleting player:",Bm)}var t},R=()=>{x("")};return(0,tx.jsxs)("div",{className:"max-w-screen-sm mx-auto p-4 text-lg text-gray-300",children:[(()=>{const e=_===i?"yourself":_;return 1===r.length?_&&(0,tx.jsx)(lA,{header:"Last One Standing",message:"You can't remove yourself, silly! You're the last one here.",dismiss:R,modalAction:R}):_&&(0,tx.jsx)(lA,{header:"Remove Player",message:`Are you sure you want to remove ${e}?`,dismiss:R,modalAction:A})})(),(0,tx.jsxs)("h2",{className:"bg-gray-800 text-gray-300 text-xl font-bold mb-4 p-4 text-gray-300 rounded-lg",children:["Game Code: ",I]}),(0,tx.jsxs)("div",{className:"mt-4 p-4 bg-gray-800 rounded-lg",children:[(0,tx.jsx)("div",{className:"pb-2 border-b-2 border-gray-700 text-left text-lg",children:"Joined Players"}),(0,tx.jsx)("div",{className:"flex flex-wrap pt-2",children:r.map(((e,t)=>(0,tx.jsx)("div",{style:{backgroundColor:V_[t],color:ex(V_[t])},className:"text-gray-100 text-md rounded py-1 px-2 m-1",children:j?(0,tx.jsxs)("div",{onClick:()=>x(e.name),className:"flex items-center cursor-pointer",children:[e.name,(0,tx.jsx)("div",{className:"flex items-center pl-2",children:(0,tx.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-4 h-4",children:(0,tx.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}):(0,tx.jsx)("div",{children:e.name})},e.name)))})]}),(0,tx.jsx)("div",{className:"text-gray-300 mt-4 p-4 bg-gray-800 rounded-lg",children:"Incommon"===t.gameType?(0,tx.jsxs)(tx.Fragment,{children:[j?(0,tx.jsxs)("div",{className:"flex items-center pb-4 border-b-2 border-gray-700",children:[(0,tx.jsx)("label",{htmlFor:"deckType",className:"block font-bold w-5/12",children:"Deck"}),(0,tx.jsxs)("select",{id:"deckType",value:a,onChange:k,className:"block appearance-none w-7/12 bg-gray-700 border border-gray-500 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-gray-600 focus:border-gray-500",children:[(0,tx.jsx)("option",{value:"life",children:"Life"}),(0,tx.jsx)("option",{value:"celebrities",children:"Celebrities"}),(0,tx.jsx)("option",{value:"actors",children:"Actors"}),(0,tx.jsx)("option",{value:"famousPeople",children:"Famous People"}),(0,tx.jsx)("option",{value:"animals",children:"Animals"}),(0,tx.jsx)("option",{value:"custom",children:"Custom*"})]})]}):(0,tx.jsx)("div",{className:"",children:(0,tx.jsxs)("label",{htmlFor:"deckType",className:"block pb-2 font-normal border-b-2 border-gray-700",children:["Deck: ",(0,tx.jsx)("span",{className:"font-bold",children:X_(t.deckType)})]})}),j?(0,tx.jsxs)("div",{className:"flex items-center py-4 border-b-2 border-gray-700",children:[(0,tx.jsx)("label",{htmlFor:"deckType",className:"block font-bold w-5/12",children:"Game Length"}),(0,tx.jsxs)("select",{id:"deckType",value:u,onChange:C,className:"block appearance-none w-7/12 bg-gray-700 border border-gray-500 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-gray-600 focus:border-gray-500",children:[(0,tx.jsx)("option",{value:"3",children:"Short"},"3"),(0,tx.jsx)("option",{value:"5",children:"Medium"},"5"),(0,tx.jsx)("option",{value:"10",children:"Long"},"10")]})]}):(0,tx.jsx)("div",{className:"",children:(0,tx.jsxs)("label",{htmlFor:"deckType",className:"block py-2 font-normal border-b-2 border-gray-700",children:["Game Length: ",(0,tx.jsx)("span",{className:"font-bold",children:Y_(t.gameLength)})]})}),j?(0,tx.jsxs)("div",{className:"flex items-center pt-4",children:[(0,tx.jsx)("label",{htmlFor:"deckType",className:"block font-bold w-5/12",children:"Word Choice"}),(0,tx.jsxs)("select",{id:"deckType",value:h,onChange:S,className:"block appearance-none w-7/12 bg-gray-700 border border-gray-500 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-gray-600 focus:border-gray-500",children:[(0,tx.jsx)("option",{value:"wordList",children:"Word List"}),(0,tx.jsx)("option",{value:"custom",children:"Custom"})]})]}):(0,tx.jsx)("div",{className:"",children:(0,tx.jsxs)("label",{htmlFor:"deckType",className:"block pt-2 font-normal",children:["Word Choice: ",(0,tx.jsx)("span",{className:"font-bold",children:Z_(t.wordSelection)})]})})]}):"Out of Words, Words"===t.gameType?(0,tx.jsxs)(tx.Fragment,{children:[j?(0,tx.jsxs)("div",{className:"flex items-center py-4 border-b-2 border-gray-700",children:[(0,tx.jsx)("label",{htmlFor:"gameTime",className:"block font-bold w-5/12",children:"Game Time (Minutes)"}),(0,tx.jsxs)("select",{id:"gameTime",value:m,onChange:T,className:"block appearance-none w-7/12 bg-gray-700 border border-gray-500 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-gray-600 focus:border-gray-500",children:[(0,tx.jsx)("option",{value:"1",children:"1"},"1"),(0,tx.jsx)("option",{value:"2",children:"2"},"2"),(0,tx.jsx)("option",{value:"3",children:"3"},"3"),(0,tx.jsx)("option",{value:"5",children:"5"},"5")]})]}):(0,tx.jsx)("div",{className:"",children:(0,tx.jsxs)("label",{htmlFor:"gameTime",className:"block py-2 font-normal border-b-2 border-gray-700",children:["Game Time (Minutes): ",(0,tx.jsx)("span",{className:"font-bold",children:t.gameTime})]})}),j?(0,tx.jsxs)("div",{className:"flex items-center py-4 border-b-2 border-gray-700",children:[(0,tx.jsx)("label",{htmlFor:"minWordLength",className:"block font-bold w-5/12",children:"Minimum Word Length"}),(0,tx.jsxs)("select",{id:"minWordLength",value:f,onChange:E,className:"block appearance-none w-7/12 bg-gray-700 border border-gray-500 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-gray-600 focus:border-gray-500",children:[(0,tx.jsx)("option",{value:"3",children:"3"},"3"),(0,tx.jsx)("option",{value:"4",children:"4"},"4"),(0,tx.jsx)("option",{value:"5",children:"5"},"5")]})]}):(0,tx.jsx)("div",{className:"",children:(0,tx.jsxs)("label",{htmlFor:"minWordLength",className:"block py-2 font-normal border-b-2 border-gray-700",children:["Minimum Word Length: ",(0,tx.jsx)("span",{className:"font-bold",children:t.minWordLength})]})}),j?(0,tx.jsxs)("div",{className:"flex items-center pt-4",children:[(0,tx.jsx)("label",{htmlFor:"numRounds",className:"block font-bold w-5/12",children:"Number of Rounds"}),(0,tx.jsx)("select",{id:"numRounds",value:y,onChange:N,className:"block appearance-none w-7/12 bg-gray-700 border border-gray-500 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-gray-600 focus:border-gray-500",children:[...Array(10)].map(((e,t)=>(0,tx.jsx)("option",{value:t+1,children:t+1},t+1)))})]}):(0,tx.jsx)("div",{className:"",children:(0,tx.jsxs)("label",{htmlFor:"numRounds",className:"block pt-2 font-normal",children:["Number of Rounds: ",(0,tx.jsx)("span",{className:"font-bold",children:t.numRounds||r.length})]})})]}):void 0}),j&&(0,tx.jsx)(ix,{onClick:async()=>{let e={};if("Incommon"===t.gameType){let t=function(e){let t;switch(e){case"celebrities":case"actors":case"famousPeople":t=H_(z_[e].length);break;case"original":t=H_(52);break;case"life":t=H_(65);break;case"animals":t=H_(62)}return t}(a);void 0===t&&(t=[]);const n="custom"===a?"buildDeck":"started";e={gameLength:parseInt(u),currentRound:1,deckType:a,indexDeck:t,gameState:n,numCards:r.length<=8?5:4}}else"Out of Words, Words"===t.gameType&&(e={currentRound:1,gameState:"started"});const i=mp(n,"rounds");await wm(i,{roundNumber:1,word:"",players:r}),await bm(n,e)},className:"mt-4 w-full text-xl p-4 "+(r.length>=3?"bg-green-600 text-white":"bg-gray-500 text-gray-100"),disabled:r.length<1,children:"Start Game"})]})};function cA(e,t){return function(){return e.apply(t,arguments)}}const{toString:hA}=Object.prototype,{getPrototypeOf:dA}=Object,fA=(pA=Object.create(null),e=>{const t=hA.call(e);return pA[t]||(pA[t]=t.slice(8,-1).toLowerCase())});var pA;const mA=e=>(e=e.toLowerCase(),t=>fA(t)===e),gA=e=>t=>typeof t===e,{isArray:yA}=Array,vA=gA("undefined");const bA=mA("ArrayBuffer");const wA=gA("string"),_A=gA("function"),xA=gA("number"),SA=e=>null!==e&&"object"===typeof e,kA=e=>{if("object"!==fA(e))return!1;const t=dA(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},CA=mA("Date"),EA=mA("File"),TA=mA("Blob"),NA=mA("FileList"),IA=mA("URLSearchParams"),[jA,AA,RA,PA]=["ReadableStream","Request","Response","Headers"].map(mA);function DA(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),yA(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function MA(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const OA="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,LA=e=>!vA(e)&&e!==OA;const UA=(FA="undefined"!==typeof Uint8Array&&dA(Uint8Array),e=>FA&&e instanceof FA);var FA;const zA=mA("HTMLFormElement"),BA=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),VA=mA("RegExp"),qA=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};DA(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)};const $A=mA("AsyncFunction"),WA=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],OA.addEventListener("message",(e=>{let{source:t,data:i}=e;t===OA&&i===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),OA.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,_A(OA.postMessage)),HA="undefined"!==typeof queueMicrotask?queueMicrotask.bind(OA):"undefined"!==typeof process&&process.nextTick||WA,KA={isArray:yA,isArrayBuffer:bA,isBuffer:function(e){return null!==e&&!vA(e)&&null!==e.constructor&&!vA(e.constructor)&&_A(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||_A(e.append)&&("formdata"===(t=fA(e))||"object"===t&&_A(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&bA(e.buffer),t},isString:wA,isNumber:xA,isBoolean:e=>!0===e||!1===e,isObject:SA,isPlainObject:kA,isReadableStream:jA,isRequest:AA,isResponse:RA,isHeaders:PA,isUndefined:vA,isDate:CA,isFile:EA,isBlob:TA,isRegExp:VA,isFunction:_A,isStream:e=>SA(e)&&_A(e.pipe),isURLSearchParams:IA,isTypedArray:UA,isFileList:NA,forEach:DA,merge:function e(){const{caseless:t}=LA(this)&&this||{},n={},r=(r,i)=>{const s=t&&MA(n,i)||i;kA(n[s])&&kA(r)?n[s]=e(n[s],r):kA(r)?n[s]=e({},r):yA(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&DA(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return DA(t,((t,r)=>{n&&_A(t)?e[r]=cA(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&dA(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:fA,kindOfTest:mA,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(yA(e))return e;let t=e.length;if(!xA(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:zA,hasOwnProperty:BA,hasOwnProp:BA,reduceDescriptors:qA,freezeMethods:e=>{qA(e,((t,n)=>{if(_A(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];_A(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return yA(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:MA,global:OA,isContextDefined:LA,isSpecCompliantForm:function(e){return!!(e&&_A(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(SA(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=yA(e)?[]:{};return DA(e,((e,t)=>{const s=n(e,r+1);!vA(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:$A,isThenable:e=>e&&(SA(e)||_A(e))&&_A(e.then)&&_A(e.catch),setImmediate:WA,asap:HA};function GA(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}KA.inherits(GA,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:KA.toJSONObject(this.config),code:this.code,status:this.status}}});const QA=GA.prototype,JA={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{JA[e]={value:e}})),Object.defineProperties(GA,JA),Object.defineProperty(QA,"isAxiosError",{value:!0}),GA.from=(e,t,n,r,i,s)=>{const o=Object.create(QA);return KA.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),GA.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const YA=GA;function XA(e){return KA.isPlainObject(e)||KA.isArray(e)}function ZA(e){return KA.endsWith(e,"[]")?e.slice(0,-2):e}function eR(e,t,n){return e?e.concat(t).map((function(e,t){return e=ZA(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const tR=KA.toFlatObject(KA,{},null,(function(e){return/^is[A-Z]/.test(e)}));const nR=function(e,t,n){if(!KA.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=KA.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!KA.isUndefined(t[e])}))).metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&KA.isSpecCompliantForm(t);if(!KA.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(KA.isDate(e))return e.toISOString();if(!a&&KA.isBlob(e))throw new YA("Blob is not supported. Use a Buffer instead.");return KA.isArrayBuffer(e)||KA.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(KA.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(KA.isArray(e)&&function(e){return KA.isArray(e)&&!e.some(XA)}(e)||(KA.isFileList(e)||KA.endsWith(n,"[]"))&&(a=KA.toArray(e)))return n=ZA(n),a.forEach((function(e,r){!KA.isUndefined(e)&&null!==e&&t.append(!0===o?eR([n],r,s):null===o?n:n+"[]",l(e))})),!1;return!!XA(e)||(t.append(eR(i,n,s),l(e)),!1)}const c=[],h=Object.assign(tR,{defaultVisitor:u,convertValue:l,isVisitable:XA});if(!KA.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!KA.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),KA.forEach(n,(function(n,s){!0===(!(KA.isUndefined(n)||null===n)&&i.call(t,n,KA.isString(s)?s.trim():s,r,h))&&e(n,r?r.concat(s):[s])})),c.pop()}}(e),t};function rR(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function iR(e,t){this._pairs=[],e&&nR(e,this,t)}const sR=iR.prototype;sR.append=function(e,t){this._pairs.push([e,t])},sR.toString=function(e){const t=e?function(t){return e.call(this,t,rR)}:rR;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const oR=iR;function aR(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lR(e,t,n){if(!t)return e;const r=n&&n.encode||aR;KA.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(s=i?i(t,n):KA.isURLSearchParams(t)?t.toString():new oR(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const uR=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){KA.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},cR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hR={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:oR,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},dR="undefined"!==typeof window&&"undefined"!==typeof document,fR="object"===typeof navigator&&navigator||void 0,pR=dR&&(!fR||["ReactNative","NativeScript","NS"].indexOf(fR.product)<0),mR="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,gR=dR&&window.location.href||"http://localhost",yR={...r,...hR};const vR=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&KA.isArray(r)?r.length:s,a)return KA.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&KA.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&KA.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(KA.isFormData(e)&&KA.isFunction(e.entries)){const n={};return KA.forEachEntry(e,((e,r)=>{t(function(e){return KA.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const bR={transitional:cR,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=KA.isObject(e);i&&KA.isHTMLForm(e)&&(e=new FormData(e));if(KA.isFormData(e))return r?JSON.stringify(vR(e)):e;if(KA.isArrayBuffer(e)||KA.isBuffer(e)||KA.isStream(e)||KA.isFile(e)||KA.isBlob(e)||KA.isReadableStream(e))return e;if(KA.isArrayBufferView(e))return e.buffer;if(KA.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return nR(e,new yR.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return yR.isNode&&KA.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=KA.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return nR(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(KA.isString(e))try{return(t||JSON.parse)(e),KA.trim(e)}catch(PP){if("SyntaxError"!==PP.name)throw PP}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||bR.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(KA.isResponse(e)||KA.isReadableStream(e))return e;if(e&&KA.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(PP){if(n){if("SyntaxError"===PP.name)throw YA.from(PP,YA.ERR_BAD_RESPONSE,this,null,this.response);throw PP}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yR.classes.FormData,Blob:yR.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};KA.forEach(["delete","get","head","post","put","patch"],(e=>{bR.headers[e]={}}));const wR=bR,_R=KA.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xR=Symbol("internals");function SR(e){return e&&String(e).trim().toLowerCase()}function kR(e){return!1===e||null==e?e:KA.isArray(e)?e.map(kR):String(e)}function CR(e,t,n,r,i){return KA.isFunction(r)?r.call(this,t,n):(i&&(t=n),KA.isString(t)?KA.isString(r)?-1!==t.indexOf(r):KA.isRegExp(r)?r.test(t):void 0:void 0)}class ER{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=SR(t);if(!i)throw new Error("header name must be a non-empty string");const s=KA.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=kR(e))}const s=(e,t)=>KA.forEach(e,((e,n)=>i(e,n,t)));if(KA.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(KA.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&_R[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(KA.isHeaders(e))for(const[o,a]of e.entries())i(a,o,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=SR(e)){const n=KA.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(KA.isFunction(t))return t.call(this,e,n);if(KA.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=SR(e)){const n=KA.findKey(this,e);return!(!n||void 0===this[n]||t&&!CR(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=SR(e)){const i=KA.findKey(n,e);!i||t&&!CR(0,n[i],i,t)||(delete n[i],r=!0)}}return KA.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!CR(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return KA.forEach(this,((r,i)=>{const s=KA.findKey(n,i);if(s)return t[s]=kR(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=kR(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return KA.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&KA.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[xR]=this[xR]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=SR(e);t[r]||(!function(e,t){const n=KA.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return KA.isArray(e)?e.forEach(r):r(e),this}}ER.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),KA.reduceDescriptors(ER.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),KA.freezeMethods(ER);const TR=ER;function NR(e,t){const n=this||wR,r=t||n,i=TR.from(r.headers);let s=r.data;return KA.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function IR(e){return!(!e||!e.__CANCEL__)}function jR(e,t,n){YA.call(this,null==e?"canceled":e,YA.ERR_CANCELED,t,n),this.name="CanceledError"}KA.inherits(jR,YA,{__CANCEL__:!0});const AR=jR;function RR(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new YA("Request failed with status code "+n.status,[YA.ERR_BAD_REQUEST,YA.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const PR=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),u=r[o];i||(i=l),n[s]=a,r[s]=l;let c=o,h=0;for(;c!==s;)h+=n[c++],c%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const d=u&&l-u;return d?Math.round(1e3*h/d):void 0}};const DR=function(e,t){let n,r,i=0,s=1e3/t;const o=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=s,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];t>=s?o(l,e):(n=l,r||(r=setTimeout((()=>{r=null,o(n)}),s-t)))},()=>n&&o(n)]},MR=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=PR(50,250);return DR((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-r,l=i(a);r=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),n)},OR=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},LR=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return KA.asap((()=>e(...n)))},UR=yR.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,yR.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(yR.origin),yR.navigator&&/(msie|trident)/i.test(yR.navigator.userAgent)):()=>!0,FR=yR.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];KA.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),KA.isString(r)&&o.push("path="+r),KA.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function zR(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&r||0==n?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const BR=e=>e instanceof TR?{...e}:e;function VR(e,t){t=t||{};const n={};function r(e,t,n,r){return KA.isPlainObject(e)&&KA.isPlainObject(t)?KA.merge.call({caseless:r},e,t):KA.isPlainObject(t)?KA.merge({},t):KA.isArray(t)?t.slice():t}function i(e,t,n,i){return KA.isUndefined(t)?KA.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function s(e,t){if(!KA.isUndefined(t))return r(void 0,t)}function o(e,t){return KA.isUndefined(t)?KA.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,n)=>i(BR(e),BR(t),0,!0)};return KA.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||i,o=s(e[r],t[r],r);KA.isUndefined(o)&&s!==a||(n[r]=o)})),n}const qR=e=>{const t=VR({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=TR.from(a),t.url=lR(zR(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),KA.isFormData(r))if(yR.hasStandardBrowserEnv||yR.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(yR.hasStandardBrowserEnv&&(i&&KA.isFunction(i)&&(i=i(t)),i||!1!==i&&UR(t.url))){const e=s&&o&&FR.read(o);e&&a.set(s,e)}return t},$R="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=qR(e);let i=r.data;const s=TR.from(r.headers).normalize();let o,a,l,u,c,{responseType:h,onUploadProgress:d,onDownloadProgress:f}=r;function p(){u&&u(),c&&c(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=TR.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());RR((function(e){t(e),p()}),(function(e){n(e),p()}),{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new YA("Request aborted",YA.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new YA("Network Error",YA.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||cR;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new YA(t,i.clarifyTimeoutError?YA.ETIMEDOUT:YA.ECONNABORTED,e,m)),m=null},void 0===i&&s.setContentType(null),"setRequestHeader"in m&&KA.forEach(s.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),KA.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),h&&"json"!==h&&(m.responseType=r.responseType),f&&([l,c]=MR(f,!0),m.addEventListener("progress",l)),d&&m.upload&&([a,u]=MR(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",u)),(r.cancelToken||r.signal)&&(o=t=>{m&&(n(!t||t.type?new AR(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===yR.protocols.indexOf(y)?n(new YA("Unsupported protocol "+y+":",YA.ERR_BAD_REQUEST,e)):m.send(i||null)}))},WR=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof YA?t:new AR(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,i(new YA(`timeout ${t} of ms exceeded`,YA.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=()=>KA.asap(o),a}},HR=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},KR=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},GR=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of KR(e))yield*HR(n,t)}(e,t);let s,o=0,a=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let s=r.byteLength;if(n){let e=o+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},QR="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,JR=QR&&"function"===typeof ReadableStream,YR=QR&&("function"===typeof TextEncoder?(XR=new TextEncoder,e=>XR.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var XR;const ZR=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(PP){return!1}},eP=JR&&ZR((()=>{let e=!1;const t=new Request(yR.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),tP=JR&&ZR((()=>KA.isReadableStream(new Response("").body))),nP={stream:tP&&(e=>e.body)};var rP;QR&&(rP=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!nP[e]&&(nP[e]=KA.isFunction(rP[e])?t=>t[e]():(t,n)=>{throw new YA(`Response type '${e}' is not supported`,YA.ERR_NOT_SUPPORT,n)})})));const iP=async(e,t)=>{const n=KA.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(KA.isBlob(e))return e.size;if(KA.isSpecCompliantForm(e)){const t=new Request(yR.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return KA.isArrayBufferView(e)||KA.isArrayBuffer(e)?e.byteLength:(KA.isURLSearchParams(e)&&(e+=""),KA.isString(e)?(await YR(e)).byteLength:void 0)})(t):n},sP=QR&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:h="same-origin",fetchOptions:d}=qR(e);u=u?(u+"").toLowerCase():"text";let f,p=WR([i,s&&s.toAbortSignal()],o);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&eP&&"get"!==n&&"head"!==n&&0!==(g=await iP(c,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(KA.isFormData(r)&&(e=n.headers.get("content-type"))&&c.setContentType(e),n.body){const[e,t]=OR(g,MR(LR(l)));r=GR(n.body,65536,e,t)}}KA.isString(h)||(h=h?"include":"omit");const i="credentials"in Request.prototype;f=new Request(t,{...d,signal:p,method:n.toUpperCase(),headers:c.normalize().toJSON(),body:r,duplex:"half",credentials:i?h:void 0});let s=await fetch(f);const o=tP&&("stream"===u||"response"===u);if(tP&&(a||o&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=KA.toFiniteNumber(s.headers.get("content-length")),[n,r]=a&&OR(t,MR(LR(a),!0))||[];s=new Response(GR(s.body,65536,n,(()=>{r&&r(),m&&m()})),e)}u=u||"text";let y=await nP[KA.findKey(nP,u)||"text"](s,e);return!o&&m&&m(),await new Promise(((t,n)=>{RR(t,n,{data:y,headers:TR.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:f})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new YA("Network Error",YA.ERR_NETWORK,e,f),{cause:y.cause||y});throw YA.from(y,y&&y.code,e,f)}}),oP={http:null,xhr:$R,fetch:sP};KA.forEach(oP,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(PP){}Object.defineProperty(e,"adapterName",{value:t})}}));const aP=e=>`- ${e}`,lP=e=>KA.isFunction(e)||null===e||!1===e,uP=e=>{e=KA.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!lP(n)&&(r=oP[(t=String(n)).toLowerCase()],void 0===r))throw new YA(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(aP).join("\n"):" "+aP(e[0]):"as no adapter specified";throw new YA("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function cP(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new AR(null,e)}function hP(e){cP(e),e.headers=TR.from(e.headers),e.data=NR.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return uP(e.adapter||wR.adapter)(e).then((function(t){return cP(e),t.data=NR.call(e,e.transformResponse,t),t.headers=TR.from(t.headers),t}),(function(t){return IR(t)||(cP(e),t&&t.response&&(t.response.data=NR.call(e,e.transformResponse,t.response),t.response.headers=TR.from(t.response.headers))),Promise.reject(t)}))}const dP="1.8.3",fP={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{fP[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const pP={};fP.transitional=function(e,t,n){function r(e,t){return"[Axios v1.8.3] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new YA(r(i," has been removed"+(t?" in "+t:"")),YA.ERR_DEPRECATED);return t&&!pP[i]&&(pP[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},fP.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const mP={assertOptions:function(e,t,n){if("object"!==typeof e)throw new YA("options must be an object",YA.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new YA("option "+s+" must be "+n,YA.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new YA("Unknown option "+s,YA.ERR_BAD_OPTION)}},validators:fP},gP=mP.validators;class yP{constructor(e){this.defaults=e,this.interceptors={request:new uR,response:new uR}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(PP){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=VR(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&mP.assertOptions(n,{silentJSONParsing:gP.transitional(gP.boolean),forcedJSONParsing:gP.transitional(gP.boolean),clarifyTimeoutError:gP.transitional(gP.boolean)},!1),null!=r&&(KA.isFunction(r)?t.paramsSerializer={serialize:r}:mP.assertOptions(r,{encode:gP.function,serialize:gP.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),mP.assertOptions(t,{baseUrl:gP.spelling("baseURL"),withXsrfToken:gP.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&KA.merge(i.common,i[t.method]);i&&KA.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=TR.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let u;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let c,h=0;if(!a){const e=[hP.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),c=e.length,u=Promise.resolve(t);h<c;)u=u.then(e[h++],e[h++]);return u}c=o.length;let d=t;for(h=0;h<c;){const e=o[h++],t=o[h++];try{d=e(d)}catch(Bm){t.call(this,Bm);break}}try{u=hP.call(this,d)}catch(Bm){return Promise.reject(Bm)}for(h=0,c=l.length;h<c;)u=u.then(l[h++],l[h++]);return u}getUri(e){return lR(zR((e=VR(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}KA.forEach(["delete","get","head","options"],(function(e){yP.prototype[e]=function(t,n){return this.request(VR(n||{},{method:e,url:t,data:(n||{}).data}))}})),KA.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(VR(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}yP.prototype[e]=t(),yP.prototype[e+"Form"]=t(!0)}));const vP=yP;class bP{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new AR(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new bP((function(t){e=t}));return{token:t,cancel:e}}}const wP=bP;const _P={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_P).forEach((e=>{let[t,n]=e;_P[n]=t}));const xP=_P;const SP=function e(t){const n=new vP(t),r=cA(vP.prototype.request,n);return KA.extend(r,vP.prototype,n,{allOwnKeys:!0}),KA.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(VR(t,n))},r}(wR);SP.Axios=vP,SP.CanceledError=AR,SP.CancelToken=wP,SP.isCancel=IR,SP.VERSION=dP,SP.toFormData=nR,SP.AxiosError=YA,SP.Cancel=SP.CanceledError,SP.all=function(e){return Promise.all(e)},SP.spread=function(e){return function(t){return e.apply(null,t)}},SP.isAxiosError=function(e){return KA.isObject(e)&&!0===e.isAxiosError},SP.mergeConfig=VR,SP.AxiosHeaders=TR,SP.formToJSON=e=>vR(KA.isHTMLForm(e)?new FormData(e):e),SP.getAdapter=uP,SP.HttpStatusCode=xP,SP.default=SP;const kP=SP,CP=e=>{let{gameData:t}=e;const[n,r]=(0,s.useState)(""),[i,o]=(0,s.useState)([]),[a,l]=(0,s.useState)([]);return(0,tx.jsxs)("div",{style:{padding:"20px"},children:[(0,tx.jsx)("h1",{children:"Build Your Deck"}),(0,tx.jsxs)("div",{children:[(0,tx.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"Search for images",style:{width:"80%",padding:"10px",marginBottom:"10px"}}),(0,tx.jsx)("button",{onClick:async()=>{try{const e=await kP.get("https://api.bing.microsoft.com/v7.0/images/search",{params:{q:n,count:10},headers:{"Ocp-Apim-Subscription-Key":"ee8e1ecaf0634e549b8a375c791dab7a"}});o(e.data.value);const t=e.data.value.map((e=>({name:"",imageUrl:e.thumbnailUrl})));l(t)}catch(Bm){console.error("Error fetching images:",Bm)}},style:{padding:"10px"},children:"Search"})]}),(0,tx.jsx)("div",{className:"max-w-screen-sm bg-gray-800",children:(0,tx.jsx)("div",{className:"deckContainer mb-4 mx-auto bg-gray-800",children:a.length&&(0,tx.jsx)(rA,{deck:a,gameData:t,handleSelectCards:async e=>{}})})})]})},EP=e=>{let{roundData:t,roundRef:n}=e;const{connectionScores:r}=t,i=(e=>{switch(e){case 12:case 11:return[.6,.8,.9];case 10:case 9:return[.55,.7,.85];case 8:case 7:return[.5,.65,.8];case 6:case 5:return[.3,.5,.7];default:return[0,.5]}})(t.players.length),o=["Strong","Stronger","Strongest"],a=[];for(let s=0;s<i.length;s++)a.push({label:o[s],value:r[Math.floor(r.length*i[s])]});const[l,u]=(0,s.useState)(a[0].value);return(0,tx.jsx)("div",{className:"flex justify-around p-2",children:a.map((e=>(0,tx.jsxs)("label",{className:"flex items-center space-x-1",children:[(0,tx.jsx)("input",{type:"radio",name:"connectionThreshold",value:e.value,checked:l===e.value,onChange:()=>(async e=>{u(e);try{await bm(n,{connectionThreshold:e}),console.log("Update successful")}catch(Bm){console.error("Error updating document: ",Bm)}})(e.value),className:"radio radio-primary w-8 h-8"}),(0,tx.jsx)("span",{className:"text-lg text-gray-200",children:e.label})," "]},e.value)))})};const TP=function(e){let{gameData:t,gameRef:n,players:r}=e;const[i,o]=(0,s.useState)(null),[a,l]=(0,s.useState)(null),[u,c]=(0,s.useState)(null),[h,d]=(0,s.useState)(null),{currentPlayerName:f}=(0,s.useContext)(nx),p=r[0].name===f;if((0,s.useEffect)((()=>{!async function(){const e=mp(n,"rounds"),r=em(e,nm("roundNumber","==",t.gameLength));try{const t=await vm(r);if(t.empty)console.log("No matching rounds found");else{const n=gp(e,t.docs[0].id);l(n);const r=t.docs.map((e=>({id:e.id,...e.data()})));o(r[0])}}catch(Bm){console.error("Error fetching round data: ",Bm)}}()}),[t.gameLength,n]),(0,s.useEffect)((()=>{if(!i)return;const e=[...i.players],t=e.findIndex((e=>e.name===f)),n=e[t],r=[{id:f,group:t}],s=[],o=Object.entries(n.connections).sort(((e,t)=>t[1]-e[1]));for(const[i,l]of o)l&&(r.push({id:i,group:t}),s.push({source:f,target:i,value:l}));const a=o[0][1];c({nodes:r,links:s,topScore:a}),d({source:f,target:o[0][0],value:o[0][1]})}),[i]),!t||!i)return(0,tx.jsx)(XI,{});const m=[...i.players].sort(((e,t)=>t.gameScore-e.gameScore)),g=m.find((e=>e.name===f)),y=m.findIndex((e=>e.name===f))+1,v=Object.entries(g.connections).filter((e=>{let[t,n]=e;return n>0})).sort(((e,t)=>t[1]-e[1]));return(0,tx.jsxs)("div",{className:"max-w-screen-sm mx-auto",children:[(0,tx.jsxs)("div",{className:"text-center m-2 p-4 bg-gray-800 text-gray-200 rounded-lg",children:[(0,tx.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Player Summary"}),(0,tx.jsx)("p",{className:"text-xl text-left pb-2 border-b-2 border-gray-700",children:1===y?(0,tx.jsx)("span",{className:"text-xl",children:"Most in common with everyone!"}):y===i.players.length?(0,tx.jsx)("span",{className:"text-xl",children:"Least in common with everyone!"}):(0,tx.jsxs)("span",{className:"text-xl",children:[J_(y)," most in common with everyone."]})}),(0,tx.jsxs)("p",{className:"text-xl text-left py-2 border-b-2 border-gray-700",children:["Strongest connection with ",(0,tx.jsx)("span",{className:"font-bold",children:v[0][0]}),"."]}),(0,tx.jsxs)("p",{className:"flex flex-col "+(p?"py-2":"pt-2"),children:[(0,tx.jsx)("div",{className:"text-left text-xl pb-2",children:"Your Connections"}),(0,tx.jsx)("div",{className:"flex flex-wrap gap-2",children:v.map((e=>{let[t,n]=e;return(0,tx.jsx)("span",{className:"text-gray-100 text-sm bg-gray-700 rounded px-2",children:`${t}: ${n}`},t)}))})]}),p&&(0,tx.jsxs)("div",{className:"",children:[(0,tx.jsx)("div",{className:"text-xl text-left pt-2 text-gray-200 border-t-2 border-gray-700",children:"Update Connection Threshold"}),(0,tx.jsx)(EP,{roundData:i,roundRef:a})]})]}),u&&(0,tx.jsx)("div",{className:"mx-2 bg-gray-100 border border-2 border-gray-800 rounded-lg",children:(0,tx.jsx)(ZI,{small:!0,width:315,height:200,data:u,strongestPlayer:f,strongestPair:h})})]})};const NP=function(){const{setCurrentPlayerName:e,setCurrentPlayerId:t,setGameRef:n}=(0,s.useContext)(nx),[r,i]=(0,s.useState)(""),[o,a]=(0,s.useState)(""),l=re();return(0,tx.jsx)("div",{className:"",children:(0,tx.jsx)("div",{className:"max-w-screen-md mx-auto text-gray-100",children:(0,tx.jsxs)("div",{className:"bg-gray-800 mx-4 p-4 mt-4 rounded-lg",children:[(0,tx.jsxs)("div",{className:"flex ",children:[(0,tx.jsxs)("div",{className:"mb-4 w-2/3",children:[(0,tx.jsx)("label",{htmlFor:"playerName",className:"block text-gray-300 text-sm font-bold mb-2",children:"Your Name"}),(0,tx.jsx)("input",{type:"text",id:"playerName",value:r,onChange:e=>i(e.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-200 leading-tight focus:outline-none focus:shadow-outline bg-gray-800 text-gray-300"})]}),(0,tx.jsxs)("div",{className:"ml-4 mb-4 w-1/3",children:[(0,tx.jsx)("label",{htmlFor:"shortId",className:"block text-gray-300 text-sm font-bold mb-2",children:"Game Code"}),(0,tx.jsx)("input",{type:"text",id:"shortId",value:o,onChange:e=>{return t=e.target.value,void a(t.toUpperCase());var t},className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-200 leading-tight focus:outline-none focus:shadow-outline bg-gray-800 text-gray-300"})]})]}),(0,tx.jsx)(ix,{onClick:async()=>{if(!r||!o)return void alert("Please enter your name and game code.");const i=em(mp(F_,"games"),nm("shortId","==",o));await vm(i).then((i=>{if(1===i.size){const s=i.docs[0].id,a=gp(F_,"games",s);n(a),e(r),((e,n)=>{vm(em(mp(e,"players"),nm("name","==",n,sm("joinedAt","asc")))).then((e=>{if(e.size>=1){const n=e.docs[0].id;t(n)}else console.error("Invalid Player Name.")}))})(a,r),l(`/player/${o}`)}else alert("Invalid game code.")}))},className:"w-full bg-blue-500 text-white font-bold py-2 px-4 rounded",children:"Rejoin Game"})]})})})},IP=()=>{const{shortId:e}=ie(),[t,n]=(0,s.useState)(null),[r,i]=(0,s.useState)([]),{gameRef:o,setGameRef:a,setCurrentPlayerId:l}=(0,s.useContext)(nx),{currentPlayerName:u}=(0,s.useContext)(nx),c=e=>{vm(em(mp(e,"players"),nm("name","==",u,sm("joinedAt","asc")))).then((e=>{if(e.size>=1){const t=e.docs[0].id;l(t)}else console.error("Invalid Player Name.")}))};if((0,s.useEffect)((()=>{if(o)_m(o,(e=>{console.log(e.data()),n(e.data()),u&&c(o)}));else{vm(em(mp(F_,"games"),nm("shortId","==",e))).then((e=>{if(1===e.size){const t=e.docs[0].id,r=gp(F_,"games",t);a(r),_m(r,(e=>{n(e.data())})),u&&c(r)}else console.error("Invalid short ID.")}))}}),[e,o,a]),(0,s.useEffect)((()=>{if(o){const e=_m(em(mp(o,"players"),sm("joinedAt","asc")),(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));i(t)}));return()=>e()}}),[o]),!t)return(0,tx.jsx)(XI,{});return(0,tx.jsxs)("div",{children:[(0,tx.jsx)(sx,{className:"max-w-screen-sm",name:u}),(()=>{if(!u)return(0,tx.jsx)(NP,{});const{deckType:e,indexDeck:n,gameState:i,gameType:s}=t;if("setup"===i)return(0,tx.jsx)(uA,{gameData:t,gameRef:o,players:r});if("buildDeck"===i)return(0,tx.jsx)(CP,{gameData:t,gameRef:o,players:r});if("started"===i){if("Incommon"===s)return(0,tx.jsx)(iA,{deck:K_(n,e),gameData:t,gameRef:o,players:r});if("Out of Words, Words"===s)return(0,tx.jsx)(aA,{gameData:t,gameRef:o,players:r})}return"ended"===i?(0,tx.jsx)(TP,{deck:K_(n,e),gameData:t,gameRef:o,players:r}):(0,tx.jsx)("div",{children:"Something went wrong"})})()]})},jP=()=>{const[e,t]=(0,s.useState)(null);return(0,s.useEffect)((()=>{vm(em(mp(F_,"games"),nm("shortId","==","DA2L"))).then((e=>{if(1===e.size){const n=e.docs[0].id;_m(gp(F_,"games",n),(e=>{console.log(e.data()),t(e.data())}))}else console.error("Invalid short ID.")}))}),[]),e?(0,tx.jsxs)("div",{children:[(0,tx.jsx)("h2",{children:"Test Page"}),(0,tx.jsx)("h2",{children:"Swipe cards left and down"}),(0,tx.jsx)(rA,{gameData:e})]}):(0,tx.jsx)("p",{children:"Loading..."})};const AP=function(){return(0,tx.jsx)(rx,{children:(0,tx.jsx)(Te,{children:(0,tx.jsxs)(_e,{children:[(0,tx.jsx)(be,{path:"/",element:(0,tx.jsx)(ox,{})}),(0,tx.jsx)(be,{path:"/host/:shortId",element:(0,tx.jsx)(tj,{})}),(0,tx.jsx)(be,{path:"/player/:shortId",element:(0,tx.jsx)(IP,{})}),(0,tx.jsx)(be,{path:"/test",element:(0,tx.jsx)(jP,{})})]})})})},RP=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};a.createRoot(document.getElementById("root")).render((0,tx.jsx)(AP,{})),RP()})();
//# sourceMappingURL=main.adccc87e.js.map